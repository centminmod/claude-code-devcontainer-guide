<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Claude Code Dev Containers - Complete Beginner's Guide</title>
    <meta
      name="description"
      content="A comprehensive beginner-friendly guide to development containers for Claude Code with React and Python examples"
    />

    <!-- Open Graph / Social Media Meta Tags -->
    <meta property="og:type" content="website" />
    <meta
      property="og:title"
      content="Claude Code Dev Containers - Complete Beginner's Guide"
    />
    <meta
      property="og:description"
      content="Learn everything about development containers for Claude Code with step-by-step React and Python examples"
    />
    <meta property="og:site_name" content="Claude Code Documentation" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Claude Code Dev Containers Guide" />
    <meta
      name="twitter:description"
      content="Master development containers with this beginner-friendly guide"
    />

    <!-- Theme Color - Material Design 3 -->
    <meta
      name="theme-color"
      content="#10A37F"
      media="(prefers-color-scheme: light)"
    />
    <meta
      name="theme-color"
      content="#0B0F19"
      media="(prefers-color-scheme: dark)"
    />
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://cdn.tailwindcss.com" crossorigin />

    <script src="https://cdn.tailwindcss.com"></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"
      integrity="sha384-F/bZzf7p3Joyp5psL90p/p89AZJsndkSoGwRpXcZhleCWhd8SnRuoYo4d0yirjJp"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"
      integrity="sha384-OqfnIfpOmAlErKRs2a525ZcwLuZ8Z1x8hPdIwBcMtHkJBbHnpJ6wX5/LVzASHkD5"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/json.min.js"
      integrity="sha384-RbRhXcXx5VHUdUaC5R0oV+XBXA5GhkaVCUzK8xN19K3FmtWSHyGVgulK92XnhBsI"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"
      integrity="sha384-FWJTgPmIGm1+zpNhubuHRC/ulS1UK7hAZ7qiUUmKD8yGfPcn5ZXYBd2qRgi6L8Tu"
      crossorigin="anonymous"
    ></script>
    <script
      defer
      src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/dockerfile.min.js"
      integrity="sha384-H3wUmCndJNBOuIIzcLSr2zLLZYs8PYuw6qKyENk7THEnYQJvOMDBu42P9XsJSRKw"
      crossorigin="anonymous"
    ></script>
    <!-- Fonts: Inter (sans), JetBrains Mono (mono) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Remove default HLJS theme; we'll provide a custom dual light/dark theme below -->
    <!-- (Replaced github-dark.min.css with bespoke CSS) -->
    <script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            fontFamily: {
              sans: [
                "Inter",
                "ui-sans-serif",
                "system-ui",
                "-apple-system",
                "Segoe UI",
                "Roboto",
                "Helvetica Neue",
                "Arial",
                "Noto Sans",
                "Apple Color Emoji",
                "Segoe UI Emoji",
                "Segoe UI Symbol",
              ],
              mono: [
                "JetBrains Mono",
                "ui-monospace",
                "SFMono-Regular",
                "Menlo",
                "Monaco",
                "Consolas",
                "Liberation Mono",
                "Courier New",
              ],
            },
            colors: {
              // OpenAI-style neutrals and brand accents
              brand: {
                DEFAULT: "#10A37F",
                600: "#0E8E70",
                700: "#0C7A60",
                800: "#0A6650",
              },
              accent: {
                DEFAULT: "#0B5FFF",
                600: "#0A54E0",
                700: "#094AC3",
              },
              // Soft neutrals
              surface: {
                50: "#FAFAFB",
                100: "#F6F7F9",
                200: "#ECEEF2",
                300: "#E3E6EC",
                800: "#121417",
                900: "#0B0F19",
              },
              success: "#10A37F",
              warning: "#F59E0B",
              danger: "#EF4444",
            },
          },
        },
      };

      // Initialize dark mode before page renders to avoid flash
      (function () {
        const theme = localStorage.getItem("theme");
        const prefersDark = window.matchMedia(
          "(prefers-color-scheme: dark)"
        ).matches;

        if (theme === "dark" || (!theme && prefersDark)) {
          document.documentElement.classList.add("dark");
        }
      })();
    </script>
    <style>
      /*
       * OpenAI-esque design tokens and typography
       * Content structure is unchanged; only visuals are updated.
       */
      :root {
        --bg: #ffffff;
        --surface-1: #ffffff;
        --surface-2: #f6f7f9;
        --border: #e5e7eb;
        --text-1: #0b0f19;
        --text-2: #374151;
        --muted: #5f6673; /* Improved from #6b7280 for WCAG AA (4.5:1) contrast */
        --brand: #10a37f;
        --brand-strong: #0e8e70;
        --accent: #0b5fff;
        --focus: 0 0 0 3px rgba(11, 95, 255, 0.35);
        --code-bg: #0f172a; /* editor-like dark bg */
        --code-fg: #f3f6fc;
        --code-border: #1f2937;
        --inline-code-bg: #eef2ff; /* higher contrast on light */
        --inline-code-fg: #0b0f19;
        --inline-code-border: #c7d2fe;
        /* Code token colors tuned for dark bg */
        --code-keyword: #a8ccff;
        --code-string: #b0f8b3;
        --code-number: #ffc8c8;
        --code-attr: #ffe08a;
        --code-title: #c7c5ff;
        --code-name: #7dd3fc;
        --code-comment: #a6b4c2;
        color-scheme: light dark;
      }
      .dark:root {
        --bg: #0b0f19;
        --surface-1: #0b0f19;
        --surface-2: #121417;
        --border: #1f2937;
        --text-1: #f3f4f6;
        --text-2: #e5e7eb;
        --muted: #9ca3af;
        --brand: #10a37f;
        --brand-strong: #10a37f;
        --accent: #5b8aff;
        --focus: 0 0 0 3px rgba(16, 163, 127, 0.4);
        --code-bg: #0f1d33; /* slightly lighter than page for separation */
        --code-fg: #eef2ff;
        --code-border: #2a3750;
        --inline-code-bg: #2b3a57; /* more contrast on dark */
        --inline-code-fg: #e7eaf3;
        --inline-code-border: #455879;
        --code-keyword: #a8ccff;
        --code-string: #b0f8b3;
        --code-number: #ffc8c8;
        --code-attr: #ffe599;
        --code-title: #d1d0ff;
        --code-name: #93e5ff;
        --code-comment: #a6b4c2;
        color-scheme: dark;
      }

      html,
      body {
        background: var(--bg);
        /* Prevent horizontal scroll causing off‚Äëviewport fixed elements */
        overflow-x: hidden;
      }
      body {
        font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI,
          Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji",
          "Segoe UI Emoji", "Segoe UI Symbol";
        color: var(--text-1);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }

      /* Links */
      a {
        color: var(--accent);
      }
      a:hover {
        color: var(--brand);
      }

      /* Headings scale + weight */
      .prose h1 {
        font-weight: 800;
        letter-spacing: -0.02em;
      }
      .prose h2 {
        font-weight: 700;
        letter-spacing: -0.02em;
      }
      .prose h3 {
        font-weight: 600;
        letter-spacing: -0.01em;
      }
      .prose h4 {
        font-weight: 600;
      }
      .prose p,
      .prose li {
        color: var(--text-2);
      }
      .prose strong {
        color: var(--text-1);
      }

      /* Card-like surfaces (exclude pre so code blocks can use dedicated bg) */
      .card,
      nav.sticky,
      header.sticky,
      #tocSidebar nav {
        background: var(--surface-1);
        border: 1px solid var(--border);
        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.02),
          0 8px 24px rgba(0, 0, 0, 0.04);
      }

      /* Buttons that used 'bg-primary/secondary' now use brand */
      .bg-primary,
      .text-primary {
        background-color: var(--brand) !important;
        color: #fff !important;
      }
      .hover\:bg-secondary:hover {
        background-color: var(--brand-strong) !important;
      }
      .text-primary {
        color: var(--brand) !important;
        background: none !important;
      }

      /* Map common Tailwind gray utilities to new tokens (scoped overrides) */
      .text-gray-900 {
        color: var(--text-1) !important;
      }
      .text-gray-800,
      .text-gray-700 {
        color: var(--text-2) !important;
      }
      .text-gray-600,
      .text-gray-500 {
        color: var(--muted) !important;
      }
      .bg-gray-50,
      .bg-white {
        background: var(--surface-1) !important;
      }
      /* Avoid overriding code block <pre> that may carry bg-gray-800 */
      .dark .bg-gray-800:not(pre),
      .dark .bg-gray-900:not(pre) {
        background: var(--surface-1) !important;
      }
      .border-gray-200 {
        border-color: var(--border) !important;
      }
      .dark .border-gray-700 {
        border-color: var(--border) !important;
      }

      /* Inputs and focus */
      :where(
          button,
          [role="button"],
          a,
          input,
          textarea,
          select
        ):focus-visible {
        outline: none;
        box-shadow: var(--focus);
        border-radius: 8px;
      }

      /* Code and pre styling */
      code,
      pre,
      .hljs {
        font-family: "JetBrains Mono", ui-monospace, SFMono-Regular, Menlo,
          Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      }
      .prose pre,
      pre,
      .code-block-wrapper pre {
        background: var(--code-bg) !important;
        background-color: var(--code-bg) !important;
        /* Light theme: softer overlays */
        background-image: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.04),
            rgba(255, 255, 255, 0) 28%
          ),
          linear-gradient(0deg, rgba(0, 0, 0, 0.06), rgba(0, 0, 0, 0) 24%) !important;
        background-repeat: no-repeat !important;
        color: var(--code-fg) !important;
        border: 1px solid var(--code-border) !important;
        /* Add subtle brand-tinted top accent + existing inner/dropshadow */
        box-shadow: inset 0 2px 0 rgba(16, 163, 127, 0.12),
          inset 0 0 0 1px rgba(255, 255, 255, 0.04),
          0 8px 16px rgba(0, 0, 0, 0.18);
        border-radius: 12px;
        padding: 1rem 1.25rem;
        line-height: 1.55; /* slightly tighter */
        overflow: auto;
      }
      /* Dark theme: stronger overlays + slightly stronger brand accent */
      .dark .prose pre,
      .dark pre,
      .dark .code-block-wrapper pre {
        background-image: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.1),
            rgba(255, 255, 255, 0) 28%
          ),
          linear-gradient(0deg, rgba(0, 0, 0, 0.14), rgba(0, 0, 0, 0) 24%) !important;
        box-shadow: inset 0 2px 0 rgba(16, 163, 127, 0.22),
          inset 0 0 0 1px rgba(255, 255, 255, 0.05),
          0 8px 16px rgba(0, 0, 0, 0.2);
      }
      @media (max-width: 640px) {
        .prose pre,
        pre,
        .code-block-wrapper pre {
          padding: 1.25rem 1.35rem;
        }
      }
      .prose code:not(pre code) {
        background: var(--inline-code-bg);
        color: var(--inline-code-fg);
        border: 1px solid var(--inline-code-border);
        border-radius: 6px;
        padding: 0.15rem 0.45rem;
        font-weight: 600 !important;
      }
      /* Subtle legibility bump for inline code on dark */
      .dark .prose code:not(pre code) {
        text-shadow: 0 1px 0 rgba(0, 0, 0, 0.25);
      }

      /* Custom Highlight.js theme (light/dark aware via CSS vars) */
      .hljs {
        background: transparent;
        color: var(--code-fg);
      }
      .hljs-comment,
      .hljs-quote {
        color: var(--code-comment);
        font-style: italic;
      }
      .hljs-keyword,
      .hljs-selector-tag,
      .hljs-literal {
        color: var(--code-keyword);
      }
      .hljs-type,
      .hljs-built_in,
      .hljs-title {
        color: var(--code-title);
      }
      .hljs-number,
      .hljs-selector-attr,
      .hljs-selector-pseudo {
        color: var(--code-number);
      }
      .hljs-string,
      .hljs-doctag {
        color: var(--code-string);
      }
      .hljs-attr,
      .hljs-attribute,
      .hljs-builtin-name {
        color: var(--code-attr);
      }
      .hljs-name,
      .hljs-section,
      .hljs-selector-id {
        color: var(--code-name);
      }
      .hljs-emphasis {
        font-style: italic;
      }
      .hljs-strong {
        font-weight: 600;
      }
      .hljs-link {
        color: #5b8aff;
        text-decoration: underline;
      }

      /* Tables */
      .prose table {
        border-collapse: separate;
        border-spacing: 0;
        overflow: hidden;
        border-radius: 10px;
      }
      .prose thead th {
        background: var(--surface-2);
        color: var(--text-1);
      }
      .prose tbody tr {
        border-bottom: 1px solid var(--border);
      }

      /* Nav & sidebar polish */
      header.sticky {
        background: color-mix(in oklab, var(--surface-1) 92%, transparent);
      }
      #tocSidebar nav .toc-link {
        position: relative;
        display: block;
        transition: all 0.2s ease;
        border-left: 2px solid transparent;
      }
      #tocSidebar nav .toc-link:hover {
        background: color-mix(in oklab, var(--surface-2) 100%, transparent);
        border-left-color: var(--brand);
        padding-left: 1rem;
      }
      #tocSidebar nav .toc-link.active {
        background: color-mix(in oklab, var(--brand) 10%, transparent);
        color: var(--brand);
        font-weight: 600;
        border-left-color: var(--brand);
        padding-left: 1rem;
      }
      #tocSidebar nav .toc-link.active::before {
        content: '';
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        width: 4px;
        height: 60%;
        background: var(--brand);
        border-radius: 0 4px 4px 0;
      }

      /* KBD badges */
      kbd {
        background: var(--surface-2) !important;
        border: 1px solid var(--border) !important;
        color: var(--text-1) !important;
      }

      /* Back to top button refinements */
      #backToTop {
        background: var(--brand);
        border: none;
      }
      #backToTop:hover {
        background: var(--brand-strong);
      }

      /* Subtle section entrances */
      .animate-fade-in {
        will-change: transform, opacity;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }
      .animate-fade-in {
        animation: fadeIn 0.6s ease-out forwards;
      }
      .code-block-wrapper {
        position: relative;
        margin: 1.5rem 0;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07), 0 2px 4px rgba(0, 0, 0, 0.05);
      }

      /* Loading state for code blocks before syntax highlighting */
      pre code:not(.hljs) {
        opacity: 0.6;
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      @keyframes pulse {
        0%, 100% {
          opacity: 0.6;
        }
        50% {
          opacity: 0.4;
        }
      }

      pre code.hljs {
        opacity: 1;
        animation: none;
      }

      /* Language badge */
      .code-block-wrapper[data-language]::before {
        content: attr(data-language);
        position: absolute;
        top: 0.75rem;
        left: 1rem;
        padding: 0.25rem 0.75rem;
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 6px;
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--code-fg);
        z-index: 10;
        font-family: var(--font-mono);
      }

      /* Add extra top padding to code blocks with language badges */
      .code-block-wrapper[data-language] pre {
        padding-top: 2.5rem !important;
      }

      /* Enhanced copy button */
      .copy-button {
        position: absolute;
        top: 0.75rem;
        right: 1rem;
        padding: 0.5rem 1rem;
        background: rgba(16, 163, 127, 0.9);
        backdrop-filter: blur(8px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        border-radius: 8px;
        color: white;
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        opacity: 0;
        transform: translateY(-4px);
        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 10;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .code-block-wrapper:hover .copy-button {
        opacity: 1;
        transform: translateY(0);
      }

      .copy-button:hover {
        background: rgba(16, 163, 127, 1);
        box-shadow: 0 4px 12px rgba(16, 163, 127, 0.3);
        transform: scale(1.05);
      }

      .copy-button:active {
        transform: scale(0.95);
      }

      .copy-button:focus {
        opacity: 1;
        outline: 2px solid var(--brand);
        outline-offset: 2px;
      }

      .copy-button.copied {
        background: rgba(16, 185, 129, 0.9);
      }

      /* Mobile responsive layout for code blocks */
      @media (max-width: 640px) {
        .code-block-wrapper[data-language]::before {
          font-size: 0.65rem;
          padding: 0.2rem 0.5rem;
          left: 0.75rem;
        }

        .copy-button {
          padding: 0.4rem 0.75rem;
          font-size: 0.75rem;
          right: 0.75rem;
          /* Always show on mobile since hover doesn't work well */
          opacity: 1;
        }

        /* Maintain top padding on mobile */
        .code-block-wrapper[data-language] pre {
          padding-top: 2.5rem !important;
        }

        /* Ensure adequate spacing between badge and button */
        .code-block-wrapper {
          min-height: 3.5rem;
        }
      }

      /* Enhanced callout/alert system */
      [class*="bg-md-primary-50"],
      [class*="bg-md-secondary-50"],
      [class*="bg-md-tertiary-50"],
      [class*="bg-md-error-50"] {
        position: relative;
        overflow: hidden;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.04);
      }

      /* Subtle gradient overlay for callouts */
      [class*="bg-md-primary-50"]::after {
        content: '';
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: linear-gradient(135deg, transparent 0%, rgba(25, 118, 210, 0.03) 100%);
        pointer-events: none;
      }

      .dark [class*="bg-md-primary-900/20"]::after {
        background: linear-gradient(135deg, transparent 0%, rgba(59, 130, 246, 0.05) 100%);
      }

      [class*="bg-md-tertiary-50"]::after {
        background: linear-gradient(135deg, transparent 0%, rgba(46, 125, 50, 0.03) 100%);
      }

      .dark [class*="bg-md-tertiary-900/20"]::after {
        background: linear-gradient(135deg, transparent 0%, rgba(16, 185, 129, 0.05) 100%);
      }

      [class*="bg-md-error-50"]::after {
        background: linear-gradient(135deg, transparent 0%, rgba(245, 124, 0, 0.03) 100%);
      }

      .dark [class*="bg-md-error-900/20"]::after {
        background: linear-gradient(135deg, transparent 0%, rgba(245, 158, 11, 0.05) 100%);
      }

      /* Ensure content is above overlay */
      [class*="bg-md-"] > * {
        position: relative;
        z-index: 1;
      }

      /* Terminal-style command blocks */
      .terminal {
        background: #1E1E1E;
        border-radius: 12px;
        overflow: hidden;
        margin: 1.5rem 0;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
      }

      .terminal-header {
        display: flex;
        align-items: center;
        gap: 1rem;
        padding: 0.75rem 1rem;
        background: #2D2D2D;
        border-bottom: 1px solid #3D3D3D;
      }

      .terminal-buttons {
        display: flex;
        gap: 0.5rem;
      }

      .terminal-button {
        width: 12px;
        height: 12px;
        border-radius: 50%;
      }

      .terminal-button.close {
        background: #FF5F56;
      }

      .terminal-button.minimize {
        background: #FFBD2E;
      }

      .terminal-button.maximize {
        background: #27C93F;
      }

      .terminal-title {
        font-size: 0.875rem;
        color: #999;
        font-weight: 500;
      }

      .terminal-body {
        padding: 1.5rem;
      }

      .terminal-body pre {
        background: transparent !important;
        border: none !important;
        box-shadow: none !important;
        margin: 0;
        padding: 0;
      }

      .terminal-body code::before {
        content: '$ ';
        color: #10A37F;
        font-weight: 700;
        user-select: none;
      }

      .prose h2 {
        scroll-margin-top: 5rem;
      }
      .prose h3 {
        scroll-margin-top: 5rem;
      }

      /* Smooth transitions for dark mode (scoped) */
      .transition-theme {
        transition: background-color 0.2s ease, color 0.2s ease,
          border-color 0.2s ease;
      }

      /* Back to top button */
      #backToTop {
        position: fixed;
        /* Respect mobile safe areas (iOS notch etc.) */
        bottom: max(1rem, env(safe-area-inset-bottom));
        right: max(1rem, env(safe-area-inset-right));
        opacity: 0;
        transform: translateY(100px);
        transition: opacity 0.3s, transform 0.3s;
        z-index: 40;
        will-change: transform, opacity;
      }
      @media (max-width: 640px) {
        #backToTop {
          bottom: max(0.75rem, env(safe-area-inset-bottom));
          right: max(0.75rem, env(safe-area-inset-right));
        }
      }
      #backToTop.show {
        opacity: 1;
        transform: translateY(0);
      }

      /* Scroll progress bar */
      #scrollProgress {
        position: fixed;
        top: 64px;
        left: 0;
        height: 3px;
        background: linear-gradient(to right, #6366f1, #8b5cf6);
        transform-origin: left;
        z-index: 49;
      }

      /* Enhanced focus states */
      button:focus-visible,
      a:focus-visible {
        outline: 2px solid #6366f1;
        outline-offset: 2px;
        border-radius: 0.375rem;
      }

      /* Better link hover states */
      a:hover {
        text-decoration-thickness: 2px;
      }

      /* Skip to content link for accessibility */
      #skip-to-content {
        position: absolute;
        top: -100px;
        left: 0;
        background: #6366f1;
        color: white;
        padding: 0.5rem 1rem;
        text-decoration: none;
        z-index: 100;
      }
      #skip-to-content:focus {
        top: 0;
      }

      /* Keyboard shortcuts help */
      #keyboardHelp {
        position: fixed;
        bottom: 6rem;
        right: 2rem;
        background: white;
        border: 1px solid #e5e7eb;
        border-radius: 0.5rem;
        padding: 1rem;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.3s, transform 0.3s;
        z-index: 40;
        pointer-events: none;
      }
      #keyboardHelp.show {
        opacity: 1;
        transform: translateY(0);
        pointer-events: auto;
      }
      .dark #keyboardHelp {
        background: #1f2937;
        border-color: #374151;
      }

      /* Print styles */
      @media print {
        #skip-to-content,
        #scrollProgress,
        #backToTop,
        #darkModeToggle,
        #mobileMenuToggle,
        #tocSidebar,
        #keyboardHelp,
        .copy-button {
          display: none !important;
        }

        body {
          background: white !important;
          color: black !important;
        }

        header {
          position: relative !important;
          background: white !important;
          border-bottom: 2px solid black !important;
        }

        section {
          page-break-inside: avoid;
          break-inside: avoid;
        }

        pre,
        code {
          border: 1px solid #ddd;
          page-break-inside: avoid;
        }

        a {
          text-decoration: underline;
        }

        a[href^="http"]:after {
          content: " (" attr(href) ")";
          font-size: 0.8em;
        }
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        * {
          animation: none !important;
          transition: none !important;
        }
        html {
          scroll-behavior: auto !important;
        }
      }

      /* Quick Start ‚Üí Prerequisites readability tweak
         Ensures comfortable line-height for the blue note paragraph
         without affecting other sections. Also trims inline code
         vertical padding so it doesn‚Äôt bloat the line box. */
      #quick-start .prereq-text {
        line-height: 1.7;
      }
      #quick-start .prereq-text code {
        padding-top: 0.05rem;
        padding-bottom: 0.05rem;
      }

      /* Screen-reader only utility */
      .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 1px, 1px);
        white-space: nowrap;
        border: 0;
      }

      /* Mobile menu slide-in animation */
      @media (max-width: 768px) {
        #tocSidebar {
          position: fixed;
          top: 64px;
          left: 0;
          right: 0;
          bottom: 0;
          background: var(--surface-1);
          z-index: 40;
          transform: translateX(-100%);
          transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          overflow-y: auto;
        }

        #tocSidebar.mobile-open {
          transform: translateX(0);
        }

        #tocSidebar:not(.mobile-open) {
          display: block !important; /* Override hidden class for animation */
        }
      }
    </style>
  </head>
  <body
    class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 transition-theme"
  >
    <!-- Skip to Content Link for Accessibility -->
    <a href="#main-content" id="skip-to-content">Skip to main content</a>

    <!-- Scroll Progress Bar -->
    <div id="scrollProgress" style="width: 0%"></div>

    <!-- Back to Top Button -->
    <button
      id="backToTop"
      class="bg-primary hover:bg-secondary text-white p-4 rounded-full shadow-lg transition-all duration-300 hover:shadow-xl"
      aria-label="Back to top"
    >
      <svg
        class="w-6 h-6"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
        aria-hidden="true"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M5 10l7-7m0 0l7 7m-7-7v18"
        />
      </svg>
    </button>

    <!-- Keyboard Shortcuts Help Panel -->
    <div
      id="keyboardHelp"
      class="text-sm"
      role="dialog"
      aria-label="Keyboard shortcuts"
    >
      <div class="font-semibold mb-2 text-gray-900 dark:text-white">
        Keyboard Shortcuts
      </div>
      <div class="space-y-1 text-gray-700 dark:text-gray-300">
        <div>
          <kbd class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs"
            >T</kbd
          >
          Toggle dark mode
        </div>
        <div>
          <kbd class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs"
            >?</kbd
          >
          Show/hide this help
        </div>
        <div>
          <kbd class="bg-gray-200 dark:bg-gray-700 px-2 py-1 rounded text-xs"
            >Esc</kbd
          >
          Close mobile menu
        </div>
      </div>
    </div>

    <!-- Header -->
    <header
      class="sticky top-0 z-50 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border-b border-gray-200 dark:border-gray-700 shadow-sm transition-theme"
    >
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
          <div class="flex items-center gap-3">
            <svg
              class="w-8 h-8 text-primary"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
              aria-hidden="true"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"
              />
            </svg>
            <div class="flex flex-col">
              <h1
                class="text-xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent"
              >
                Claude Code Dev Containers
              </h1>
              <p class="text-xs text-gray-600 dark:text-gray-400">
                by
                <a
                  href="https://github.com/centminmod"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary hover:text-secondary hover:underline font-medium"
                  >George Liu</a
                >
              </p>
            </div>
          </div>
          <div class="flex items-center gap-4">
            <a
              href="https://www.buymeacoffee.com/georgeliu"
              target="_blank"
              rel="noopener noreferrer"
              class="hidden sm:block hover:opacity-80 transition-opacity"
              aria-label="Buy me a coffee"
            >
              <img
                src="https://cdn.buymeacoffee.com/buttons/v2/arial-violet.png"
                alt="Buy Me A Coffee"
                style="height: 40px !important; width: 145px !important"
              />
            </a>
            <button
              id="darkModeToggle"
              class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors"
              aria-label="Toggle dark mode"
              aria-pressed="false"
            >
              <svg
                id="sunIcon"
                class="w-5 h-5 hidden dark:block"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                />
              </svg>
              <svg
                id="moonIcon"
                class="w-5 h-5 block dark:hidden"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                />
              </svg>
            </button>
            <button
              id="mobileMenuToggle"
              class="md:hidden p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600"
              aria-label="Toggle mobile menu"
              aria-controls="tocSidebar"
              aria-expanded="false"
            >
              <svg
                class="w-6 h-6"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
                aria-hidden="true"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4 6h16M4 12h16M4 18h16"
                />
              </svg>
            </button>
          </div>
        </div>
      </div>
    </header>

    <!-- Main Container -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
      <div class="flex flex-col md:flex-row gap-8">
        <!-- Table of Contents Sidebar -->
        <aside id="tocSidebar" class="hidden md:block md:w-64 flex-shrink-0">
          <nav
            class="sticky top-24 bg-white dark:bg-gray-800 rounded-lg p-6 shadow-lg border border-gray-200 dark:border-gray-700"
            aria-label="Table of contents"
          >
            <h2
              class="font-semibold text-sm uppercase tracking-wider text-gray-500 dark:text-gray-400 mb-4"
            >
              Table of Contents
            </h2>
            <ul class="space-y-2 text-sm">
              <li>
                <a
                  href="#introduction"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Introduction</a
                >
              </li>
              <li>
                <a
                  href="#ai-prompts"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >AI Copy Prompts</a
                >
              </li>
              <li>
                <a
                  href="#template-files"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Template Files Reference</a
                >
              </li>
              <li>
                <a
                  href="#prerequisites"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Prerequisites</a
                >
              </li>
              <li>
                <a
                  href="#quick-start"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Quick Start</a
                >
              </li>
              <li>
                <a
                  href="#what-are-devcontainers"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >What Are Dev Containers?</a
                >
              </li>
              <li>
                <a
                  href="#why-use-devcontainers"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Why Use Them?</a
                >
              </li>
              <li>
                <a
                  href="#when-not-to-use"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >When NOT to Use</a
                >
              </li>
              <li>
                <a
                  href="#architecture"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Architecture</a
                >
              </li>
              <li>
                <a
                  href="#security-firewall"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Security & Firewall</a
                >
              </li>
              <li>
                <a
                  href="#claude-config"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Claude Code Configuration & MCP</a
                >
              </li>
              <li>
                <a
                  href="#session-start-hook"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Session Start Hook</a
                >
              </li>
              <li>
                <a
                  href="#launching-container"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Launching Your Dev Container</a
                >
              </li>
              <li>
                <a
                  href="#react-example"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >React Project Setup</a
                >
              </li>
              <li>
                <a
                  href="#python-example"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Basic Python Setup</a
                >
              </li>
              <li>
                <a
                  href="#python-advanced-example"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Advanced Python Setup</a
                >
              </li>
              <li>
                <a
                  href="#nextjs-example"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Next.js Project Setup</a
                >
              </li>
              <li>
                <a
                  href="#multi-ai-example"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Multiple AI Assistants</a
                >
              </li>
              <li>
                <a
                  href="#ai-cli-auth"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >AI CLI Authentication</a
                >
              </li>
              <li>
                <a
                  href="#github-cli-auth"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >GitHub CLI Authentication</a
                >
              </li>
              <li>
                <a
                  href="#examples"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Examples</a
                >
              </li>
              <li>
                <a
                  href="#troubleshooting"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Troubleshooting</a
                >
              </li>
              <li>
                <a
                  href="#resources"
                  class="toc-link block py-1 px-2 rounded hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors"
                  >Resources</a
                >
              </li>
            </ul>
          </nav>
        </aside>

        <!-- Main Content -->
        <main id="main-content" class="flex-1 min-w-0">
          <!-- Hero Section - Enhanced -->
          <div class="relative overflow-hidden bg-gradient-to-br from-brand via-brand-700 to-accent-600 dark:from-brand-600 dark:via-brand-700 dark:to-accent-700 rounded-2xl p-8 md:p-12 mb-8 shadow-2xl animate-fade-in">
            <!-- Animated background pattern -->
            <div class="absolute inset-0 opacity-10">
              <svg class="w-full h-full" xmlns="http://www.w3.org/2000/svg">
                <defs>
                  <pattern id="hero-grid" width="40" height="40" patternUnits="userSpaceOnUse">
                    <path d="M 40 0 L 0 0 0 40" fill="none" stroke="white" stroke-width="1"/>
                  </pattern>
                </defs>
                <rect width="100%" height="100%" fill="url(#hero-grid)" />
              </svg>
            </div>

            <div class="relative z-10">
              <div class="inline-flex items-center gap-2 bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full text-white text-sm font-medium mb-6 border border-white/30">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                  <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                </svg>
                Complete Beginner's Guide
              </div>

              <h1 class="text-4xl md:text-5xl lg:text-6xl font-black text-white mb-4 tracking-tight leading-tight">
                Claude Code<br/>
                <span class="text-white/90">Dev Containers</span>
              </h1>

              <p class="text-xl md:text-2xl text-white/95 mb-8 max-w-2xl leading-relaxed">
                Master containerized development environments with step-by-step examples for React, Python, and Next.js
              </p>

              <div class="flex flex-wrap gap-3 mb-6">
                <a href="#quick-start"
                   class="inline-flex items-center gap-2 px-6 py-3 bg-white text-brand-700 font-semibold rounded-lg hover:bg-white/95 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-0.5">
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                  </svg>
                  Quick Start
                </a>
                <a href="#react-example"
                   class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 backdrop-blur-sm text-white font-semibold rounded-lg hover:bg-white/20 transition-all border border-white/30">
                  View Examples
                  <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
                  </svg>
                </a>
              </div>

              <div class="flex flex-wrap gap-2">
                <span class="px-3 py-1.5 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm text-white border border-white/30">
                  üê≥ Docker
                </span>
                <span class="px-3 py-1.5 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm text-white border border-white/30">
                  üîí Isolated
                </span>
                <span class="px-3 py-1.5 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm text-white border border-white/30">
                  üîÑ Reproducible
                </span>
                <span class="px-3 py-1.5 rounded-full text-sm font-medium bg-white/20 backdrop-blur-sm text-white border border-white/30">
                  ‚ö° Fast Setup
                </span>
              </div>
            </div>
          </div>

          <!-- Introduction -->
          <section
            id="introduction"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">
              üëã Welcome!
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <p class="text-gray-700 dark:text-gray-300 leading-relaxed">
                This guide will teach you everything you need to know about
                development containers (devcontainers) for Claude Code. Whether
                you're a complete beginner or looking to refine your setup,
                you're in the right place. The guide was created from all my own
                experiences and collected context documentation used to create
                my own dev containers and will be continually updated as my
                development and experience progresses. If you like this guide
                and find it useful, consider
                <a
                  href="https://www.buymeacoffee.com/georgeliu"
                  class="text-md-primary-600 dark:text-md-primary-400 hover:underline"
                  target="_blank"
                  rel="noopener noreferrer"
                  >buying me a coffee</a
                >
                to support my work.
              </p>
              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 my-6 rounded-r-lg"
              >
                <p
                  class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                >
                  üìö What You'll Learn:
                </p>
                <ul
                  class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300"
                >
                  <li>What dev containers are and how they work</li>
                  <li>Setting up a React project with dev containers</li>
                  <li>Setting up a Python project with dev containers</li>
                  <li>Setting up a Next.js application with dev containers</li>
                  <li>Configuring multiple AI assistants in one container</li>
                  <li>Troubleshooting common issues</li>
                </ul>
              </div>
              <div
                class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 my-6 rounded-r-lg"
              >
                <p
                  class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                >
                  üí° Pro Tip for AI Users:
                </p>
                <p class="text-md-tertiary-800 dark:text-md-tertiary-300">
                  You can provide
                  <a
                    href="https://claude-devcontainers.centminmod.com/llms.txt"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="underline hover:text-green-600 dark:hover:text-green-400"
                  >
                    this comprehensive llms.txt guide
                  </a>
                  to AI assistants like Claude to help with dev container
                  creation and usage. It contains detailed examples and best
                  practices!
                </p>
              </div>
            </div>
          </section>

          <!-- AI Copy Prompts (moved to top) -->
          <section
            id="ai-prompts"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">
              ‚ú® AI Copy Prompts
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <p class="text-gray-700 dark:text-gray-300">
                Use these one‚Äëclick prompts to generate your
                <code>.devcontainer/</code>
                files exactly as this guide specifies, using
                <a
                  href="https://claude-devcontainers.centminmod.com/llms.txt"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="underline hover:text-green-600 dark:hover:text-green-400"
                  >llms.txt</a
                >
                as the source of truth. AI may hallucinate so double check with
                actual below guide to be 100% sure. You will have a more
                accurate response using Claude, Qwen3 Max, Kimi K2 Thinking than ChatGPT from my experience.
                Prefer to start from a working example? Fork the
                <a
                  href="https://github.com/centminmod/claude-code-devcontainers"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="underline hover:text-green-600 dark:hover:text-green-400"
                  >template repository</a
                >
                which already includes a configured <code>.devcontainer/</code>.
              </p>
            </div>

            <!-- Copy‚ÄëReady AI Prompts -->
            <section
              id="ai-prompts-v3"
              aria-label="AI Prompt Helpers"
              class="mt-4"
            >
              <div
                id="ai-prompt-cta-multi-v3"
                class="card"
                style="
                  border-radius: 12px;
                  padding: 16px;
                  background: var(--surface-1);
                  margin-bottom: 14px;
                "
              >
                <strong style="color: var(--text-1)"
                  >Multi‚ÄëAI Dev Container Prompt</strong
                >
                <textarea
                  id="ai-prompt-text-multi-v3"
                  rows="8"
                  style="
                    width: 100%;
                    font: 13px/1.45 ui-monospace, Menlo, Consolas, monospace;
                    padding: 10px;
                    border: 1px solid var(--code-border);
                    border-radius: 8px;
                    margin-top: 8px;
                    background: var(--code-bg);
                    color: var(--code-fg);
                  "
                  readonly
                ></textarea>
                <div
                  style="
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                    margin-top: 10px;
                  "
                >
                  <button
                    id="copy-ai-prompt-multi-v3"
                    type="button"
                    style="
                      background: var(--brand);
                      color: #fff;
                      border: 0;
                      border-radius: 999px;
                      padding: 10px 14px;
                      cursor: pointer;
                    "
                  >
                    Copy prompt
                  </button>
                  <a
                    id="open-chatgpt-multi-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in ChatGPT</a
                  >
                  <a
                    id="open-claude-multi-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in Claude</a
                  >
                  <a
                    id="open-cursor-multi-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in Cursor</a
                  >
                </div>
                <small style="color: var(--muted)"
                  >Links prefill the same text as the copy button.</small
                >
              </div>

              <div
                id="ai-prompt-cta-single-v3"
                class="card"
                style="
                  border-radius: 12px;
                  padding: 16px;
                  background: var(--surface-1);
                "
              >
                <strong style="color: var(--text-1)"
                  >Single‚ÄëAI Dev Container Prompt</strong
                >
                <textarea
                  id="ai-prompt-text-single-v3"
                  rows="8"
                  style="
                    width: 100%;
                    font: 13px/1.45 ui-monospace, Menlo, Consolas, monospace;
                    padding: 10px;
                    border: 1px solid var(--code-border);
                    border-radius: 8px;
                    margin-top: 8px;
                    background: var(--code-bg);
                    color: var(--code-fg);
                  "
                  readonly
                ></textarea>
                <div
                  style="
                    display: flex;
                    gap: 8px;
                    flex-wrap: wrap;
                    margin-top: 10px;
                  "
                >
                  <button
                    id="copy-ai-prompt-single-v3"
                    type="button"
                    style="
                      background: var(--brand);
                      color: #fff;
                      border: 0;
                      border-radius: 999px;
                      padding: 10px 14px;
                      cursor: pointer;
                    "
                  >
                    Copy prompt
                  </button>
                  <a
                    id="open-chatgpt-single-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in ChatGPT</a
                  >
                  <a
                    id="open-claude-single-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in Claude</a
                  >
                  <a
                    id="open-cursor-single-v3"
                    role="button"
                    target="_blank"
                    rel="noopener"
                    style="
                      text-decoration: none;
                      border: 1px solid var(--border);
                      border-radius: 999px;
                      padding: 10px 14px;
                      color: var(--text-1);
                      background: var(--surface-1);
                    "
                    >Open in Cursor</a
                  >
                </div>
                <small style="color: var(--muted)"
                  >Links prefill the same text as the copy button.</small
                >
              </div>
            </section>

            <script>
              (function () {
                function wire(kind, lines) {
                  const prompt = lines.join("\n");
                  const $t = document.getElementById(
                    "ai-prompt-text-" + kind + "-v3"
                  );
                  const $c = document.getElementById(
                    "copy-ai-prompt-" + kind + "-v3"
                  );
                  const $g = document.getElementById(
                    "open-chatgpt-" + kind + "-v3"
                  );
                  const $a = document.getElementById(
                    "open-claude-" + kind + "-v3"
                  );
                  const $u = document.getElementById(
                    "open-cursor-" + kind + "-v3"
                  );
                  if (!$t) return;
                  $t.value = prompt;
                  if ($c) {
                    $c.addEventListener("click", async () => {
                      try {
                        await navigator.clipboard.writeText(prompt);
                        $c.textContent = "Copied!";
                        setTimeout(
                          () => ($c.textContent = "Copy prompt"),
                          1200
                        );
                      } catch (_) {
                        $t.removeAttribute("readonly");
                        $t.focus();
                        $t.select();
                      }
                    });
                  }
                  if ($g)
                    $g.href =
                      "https://chatgpt.com/?hints=search&q=" +
                      encodeURIComponent(prompt);
                  if ($a)
                    $a.href =
                      "https://claude.ai/new?q=" + encodeURIComponent(prompt);
                  if ($u)
                    $u.href =
                      "https://cursor.com/link/prompt?text=" +
                      encodeURIComponent(prompt);
                }
                wire("multi", [
                  "Docs: https://claude-devcontainers.centminmod.com/llms.txt (tech ref) & https://claude-devcontainers.centminmod.com/ (guide)",
                  "Template: https://github.com/centminmod/claude-code-devcontainers",
                  "",
                  "Verify guide includes: Claude Code (MCP), Codex/GPT (config.toml), Gemini CLI, OpenCode, Copilot.",
                  "Search guide for each tool name before claiming missing.",
                  "",
                  "Task: Create Multi-AI devcontainer (Claude+GPT+Gemini+OpenCode).",
                  "",
                  "Ask: a) Complexity: Minimal (8 vols) | Production (13 vols) | Complete (all features)",
                  "     b) Format: Complete files | Patch diffs",
                  "",
                  "CRITICAL: All levels = 12 files (2 base + 6 init + 4 provider). Difference is config detail, NOT file count.",
                  "",
                  "Generate in .devcontainer/:",
                  "Base (download‚Üímodify): devcontainer.json, Dockerfile",
                  "Init scripts (6): init-firewall.sh, init-claude-config.sh, init-codex-config.sh, init-python.sh, init-claude-hooks.sh, setup-git-hooks.sh",
                  "Provider templates (fetch exact, NO mods): config.toml.template, mcp.json.template, settings.json.template, session-start.sh.template",
                  "",
                  "Browse: https://github.com/centminmod/claude-code-devcontainers/tree/master/.devcontainer",
                  "Fetch raw: https://raw.githubusercontent.com/centminmod/claude-code-devcontainers/refs/heads/master/.devcontainer/[filename]",
                  "Files: devcontainer.json, Dockerfile, config.toml.template, mcp.json.template, settings.json.template, session-start.sh.template",
                  "",
                  "Format templates by base type (not .template extension):",
                  ".toml ‚Üí sections on own lines",
                  ".json ‚Üí 2-space indent, multi-line",
                  ".sh ‚Üí each command on own line",
                  "Single-line = WRONG. Multi-line with proper indentation = RIGHT.",
                  "",
                  "DO NOT fabricate/simplify templates. Fetch exact contents from repo.",
                  "",
                  "Base templates: Download‚ÜíModify",
                  "Provider templates: Download‚ÜíKeep exact‚ÜíFormat by type",
                  "Don't skip downloads!",
                  "",
                  "Follow llms.txt Complete Example (lines 505-885). Include all Multi-AI extensions. Copy templates to /usr/local/share/claude-defaults/. Use user's chosen output format.",
                  "",
                  "Verify: 2 base modified + 6 init + 4 provider exact = 12 files. Volume mounts: 8 (minimal) or 13 (production). Init scripts in postCreateCommand. Templates copied to /usr/local/share/claude-defaults/. Proper formatting (multi-line, indented).",
                  "",
                  "After solution, compare to https://claude-devcontainers.centminmod.com and list differences. Reference specific AI tools used.",
                ]);
                wire("single", [
                  "Docs: https://claude-devcontainers.centminmod.com/llms.txt (tech ref) & https://claude-devcontainers.centminmod.com/ (guide)",
                  "Template: https://github.com/centminmod/claude-code-devcontainers",
                  "",
                  "Verify guide supports: Claude (MCP, settings.json), Codex/GPT (config.toml), Gemini (API), OpenCode (multi-model).",
                  "Search guide for provider before claiming unsupported.",
                  "",
                  "Task: Create Single-AI devcontainer (one provider).",
                  "",
                  "Ask: a) Provider: Claude | Codex/GPT | Gemini | OpenCode",
                  "     b) Complexity: Minimal (8 vols) | Production (13 vols) | Complete (all features)",
                  "     c) Format: Complete files | Patch diffs",
                  "",
                  "CRITICAL: All levels = required files (varies by provider). Difference is config detail, NOT file count.",
                  "",
                  "Generate in .devcontainer/:",
                  "Base (download‚Üímodify for single-AI): devcontainer.json (remove unused extensions), Dockerfile (remove unused init scripts)",
                  "Init scripts (4-5): init-firewall.sh, init-python.sh, init-claude-hooks.sh, setup-git-hooks.sh, + provider script if needed",
                  "Provider templates (fetch exact, NO mods): Based on chosen provider",
                  "  Claude: settings.json.template, mcp.json.template, session-start.sh.template (3)",
                  "  Codex/GPT: config.toml.template, session-start.sh.template (2)",
                  "  Gemini/OpenCode: session-start.sh.template (1)",
                  "",
                  "Fetch: https://raw.githubusercontent.com/centminmod/claude-code-devcontainers/refs/heads/master/.devcontainer/[filename]",
                  "Files: config.toml.template, mcp.json.template, settings.json.template, session-start.sh.template",
                  "",
                  "Format templates by base type (not .template extension):",
                  ".toml ‚Üí sections on own lines",
                  ".json ‚Üí 2-space indent, multi-line",
                  ".sh ‚Üí each command on own line",
                  "Single-line = WRONG. Multi-line with proper indentation = RIGHT.",
                  "",
                  "DO NOT fabricate/simplify templates. Fetch exact contents from repo.",
                  "",
                  "Base templates: Download‚ÜíModify for chosen provider",
                  "Provider templates: Download‚ÜíKeep exact‚ÜíFormat by type",
                  "Don't skip downloads!",
                  "",
                  "Follow llms.txt Complete Example (lines 505-885). Include ONLY chosen provider's extensions. Remove unused volume mounts. Copy templates to /usr/local/share/claude-defaults/. Use user's chosen output format.",
                  "",
                  "Verify files: Claude=10, Codex=9, Gemini/OpenCode=7. Volume mounts: 8 (minimal) or 13 (production). Init scripts in postCreateCommand. Templates copied to /usr/local/share/claude-defaults/. Proper formatting (multi-line, indented).",
                  "",
                  "After solution, compare to https://claude-devcontainers.centminmod.com and list differences. Reference specific provider used.",
                ]);
              })();
            </script>
          </section>

          <!-- Template Files Reference -->
          <section
            id="template-files"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üìÑ Template Files Reference
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-6">
                The devcontainer setup uses 4 template files that are copied to
                <code class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded"
                  >/usr/local/share/claude-defaults/</code
                >
                during container build and deployed to user-specific locations
                by init scripts. These templates ensure consistent configuration
                across container rebuilds.
              </p>

              <!-- WARNING for AI Assistants -->
              <div
                class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg"
              >
                <h3
                  class="font-semibold text-amber-900 dark:text-amber-200 mb-2 flex items-center"
                >
                  ‚ö†Ô∏è FOR AI ASSISTANTS - Critical Warning
                </h3>
                <p class="text-amber-900 dark:text-amber-200 text-sm mb-2">
                  When users request devcontainer setup, fetch
                  <strong>EXACT</strong> template contents from repository links
                  below.
                </p>
                <p class="text-amber-900 dark:text-amber-200 text-sm">
                  <strong>DO NOT</strong>: Fabricate simplified versions, invent
                  field names, or create placeholder scripts.<br />
                  <strong>ALWAYS</strong>: Use repository links to fetch
                  production-tested templates.
                </p>
              </div>

              <!-- Template Files Table -->
              <div class="overflow-x-auto mb-8">
                <table
                  class="min-w-full border-collapse border border-gray-300 dark:border-gray-600"
                >
                  <thead>
                    <tr class="bg-gray-100 dark:bg-gray-700">
                      <th
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left text-gray-900 dark:text-white font-semibold"
                      >
                        File Name
                      </th>
                      <th
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left text-gray-900 dark:text-white font-semibold"
                      >
                        Purpose
                      </th>
                      <th
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-left text-gray-900 dark:text-white font-semibold"
                      >
                        Deployed To
                      </th>
                      <th
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center text-gray-900 dark:text-white font-semibold"
                      >
                        Required?
                      </th>
                      <th
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center text-gray-900 dark:text-white font-semibold"
                      >
                        Repository Link
                      </th>
                    </tr>
                  </thead>
                  <tbody class="text-gray-700 dark:text-gray-300">
                    <tr>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >config.toml.template</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        Codex CLI configuration with Landlock sandbox fix for
                        Docker
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >~/.codex/config.toml</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <span
                          class="inline-block px-3 py-1 bg-md-tertiary-100 dark:bg-md-tertiary-900/30 text-md-tertiary-800 dark:text-md-tertiary-200 rounded-full text-sm font-medium"
                          >GPT/Codex</span
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <a
                          href="https://github.com/centminmod/claude-code-devcontainers/blob/master/.devcontainer/config.toml.template"
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-md-primary-600 dark:text-md-primary-400 hover:underline text-sm"
                          >52 lines</a
                        >
                      </td>
                    </tr>
                    <tr class="bg-gray-50 dark:bg-gray-800/50">
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >mcp.json.template</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        MCP servers configuration (context7, cf-docs)
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >~/.claude/mcp.json</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <span
                          class="inline-block px-3 py-1 bg-md-tertiary-100 dark:bg-md-tertiary-900/30 text-md-tertiary-800 dark:text-md-tertiary-200 rounded-full text-sm font-medium"
                          >Claude</span
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <a
                          href="https://github.com/centminmod/claude-code-devcontainers/blob/master/.devcontainer/mcp.json.template"
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-md-primary-600 dark:text-md-primary-400 hover:underline text-sm"
                          >16 lines</a
                        >
                      </td>
                    </tr>
                    <tr>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >settings.json.template</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        Claude Code optimizations: session hooks, performance
                        settings. <strong>Note:</strong> Template includes
                        OpenTelemetry config (optional - comment out if not
                        using otel-collector service)
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >~/.claude/settings.json</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <span
                          class="inline-block px-3 py-1 bg-md-tertiary-100 dark:bg-md-tertiary-900/30 text-md-tertiary-800 dark:text-md-tertiary-200 rounded-full text-sm font-medium"
                          >Claude</span
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <a
                          href="https://github.com/centminmod/claude-code-devcontainers/blob/master/.devcontainer/settings.json.template"
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-md-primary-600 dark:text-md-primary-400 hover:underline text-sm"
                          >32 lines</a
                        >
                      </td>
                    </tr>
                    <tr class="bg-gray-50 dark:bg-gray-800/50">
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >session-start.sh.template</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        Session validation hook: checks volumes, tools, MCP
                        servers at session start
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3"
                      >
                        <code
                          class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-sm"
                          >.claude/hooks/session-start.sh</code
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <span
                          class="inline-block px-3 py-1 bg-md-primary-100 dark:bg-md-primary-900/30 text-md-primary-800 dark:text-md-primary-200 rounded-full text-sm font-medium"
                          >Recommended</span
                        >
                      </td>
                      <td
                        class="border border-gray-300 dark:border-gray-600 px-4 py-3 text-center"
                      >
                        <a
                          href="https://github.com/centminmod/claude-code-devcontainers/blob/master/.devcontainer/session-start.sh.template"
                          target="_blank"
                          rel="noopener noreferrer"
                          class="text-md-primary-600 dark:text-md-primary-400 hover:underline text-sm"
                          >144 lines</a
                        >
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <!-- Deployment Workflow -->
              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
              >
                <h3
                  class="font-semibold text-md-primary-900 dark:text-md-primary-200 mb-2"
                >
                  üîÑ How Template Deployment Works
                </h3>
                <ol
                  class="list-decimal list-inside space-y-2 text-md-primary-900 dark:text-md-primary-200 ml-2"
                >
                  <li>
                    Dockerfile copies
                    <code
                      class="px-2 py-1 bg-md-primary-100 dark:bg-md-primary-800 rounded text-sm"
                      >.devcontainer/*.template</code
                    >
                    to
                    <code
                      class="px-2 py-1 bg-md-primary-100 dark:bg-md-primary-800 rounded text-sm"
                      >/usr/local/share/claude-defaults/</code
                    >
                  </li>
                  <li>
                    Init scripts (<code
                      class="px-2 py-1 bg-md-primary-100 dark:bg-md-primary-800 rounded text-sm"
                      >init-claude-config.sh</code
                    >,
                    <code
                      class="px-2 py-1 bg-md-primary-100 dark:bg-md-primary-800 rounded text-sm"
                      >init-codex-config.sh</code
                    >) run at
                    <code
                      class="px-2 py-1 bg-md-primary-100 dark:bg-md-primary-800 rounded text-sm"
                      >postCreateCommand</code
                    >
                  </li>
                  <li>
                    Templates are copied to user config directories (only if
                    files don't already exist)
                  </li>
                  <li>
                    User configs persist across container rebuilds via Docker
                    volume mounts
                  </li>
                </ol>
              </div>

              <!-- Key Content Snippets -->
              <h3
                class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white"
              >
                üîë Key Configuration Highlights
              </h3>

              <!-- config.toml -->
              <div class="mb-6">
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  config.toml.template (Codex CLI)
                </h4>
                <div
                  class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mb-3 rounded-r-lg"
                >
                  <p class="text-md-error-900 dark:text-md-error-200 text-sm">
                    <strong>‚ö†Ô∏è Critical:</strong> Disables Landlock sandbox (not
                    supported in Docker's LinuxKit kernel). Security is provided
                    by Docker isolation instead.
                  </p>
                </div>
                <div class="code-block-wrapper" data-language="ini">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-ini">model = "gpt-5"
model_reasoning_effort = "medium"

# CRITICAL: Disable Landlock sandbox (not supported in Docker)
sandbox_mode = "danger-full-access"
approval_policy = "never"

[mcp_servers.cf-docs]
command = "npx"
args = ["-y", "mcp-remote", "https://docs.mcp.cloudflare.com/sse"]

[mcp_servers.chrome-devtools]
command = "npx"
args = ["-y", "chrome-devtools-mcp@latest", ...]</code></pre>
                </div>
              </div>

              <!-- settings.json -->
              <div class="mb-6">
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  settings.json.template (Claude Code)
                </h4>
                <div
                  class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-3 rounded-r-lg"
                >
                  <p
                    class="text-md-tertiary-900 dark:text-md-tertiary-200 text-sm"
                  >
                    <strong>‚ú® Features:</strong> Enables OpenTelemetry metrics
                    export, session start hooks, and optimizes Claude Code
                    performance settings.
                  </p>
                </div>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "dangerously_skip_permissions": true,
  "verbose": true,
  "hooks": {
    "SessionStart": [{
      "hooks": [{
        "type": "command",
        "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/session-start.sh"
      }]
    }]
  },
  "env": {
    "MAX_MCP_OUTPUT_TOKENS": "60000",
    "BASH_DEFAULT_TIMEOUT_MS": "300000",
    "CLAUDE_CODE_ENABLE_TELEMETRY": "1",
    "OTEL_EXPORTER_OTLP_ENDPOINT": "http://otel-collector:4317"
  }
}</code></pre>
                </div>
              </div>

              <!-- Quick Reference -->
              <div class="bg-gray-100 dark:bg-gray-700 p-6 rounded-lg">
                <h4
                  class="text-lg font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  üìã Quick Reference
                </h4>
                <ul class="space-y-2 text-gray-700 dark:text-gray-300">
                  <li>
                    <strong>View templates in container:</strong>
                    <code
                      class="px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-sm"
                      >ls -la /usr/local/share/claude-defaults/</code
                    >
                  </li>
                  <li>
                    <strong>Check deployed configs:</strong>
                    <code
                      class="px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-sm"
                      >ls -la ~/.claude/ ~/.codex/</code
                    >
                  </li>
                  <li>
                    <strong>Force redeploy:</strong> Delete config file, then
                    run init script manually
                  </li>
                  <li>
                    <strong>Customize:</strong> Edit deployed files in
                    <code
                      class="px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-sm"
                      >~/.claude/</code
                    >
                    or
                    <code
                      class="px-2 py-1 bg-gray-200 dark:bg-gray-600 rounded text-sm"
                      >~/.codex/</code
                    >
                    (changes persist via volumes)
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <!-- Prerequisites -->
          <section
            id="prerequisites"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üìã Prerequisites
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Let's get your development environment ready. You'll need these
              three tools:
            </p>

            <div class="space-y-4 mb-6">
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-gray-900 dark:text-white"
                >
                  1. VS Code
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  The editor that will connect to your containers.
                </p>
                <a
                  href="https://code.visualstudio.com/"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary hover:text-secondary underline"
                >
                  Download VS Code ‚Üí
                </a>
              </div>

              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-gray-900 dark:text-white"
                >
                  2. Docker Desktop
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  The engine that runs containers.
                </p>
                <a
                  href="https://www.docker.com/products/docker-desktop"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary hover:text-secondary underline"
                >
                  Download Docker Desktop ‚Üí
                </a>
                <div class="mt-2 text-sm text-gray-600 dark:text-gray-400">
                  <strong>Note:</strong> Windows users need WSL2 enabled first.
                </div>
              </div>

              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-gray-900 dark:text-white"
                >
                  3. Dev Containers Extension
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  VS Code extension to manage dev containers.
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-400">
                  Install from VS Code: Press
                  <kbd
                    class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                    >Cmd+Shift+X</kbd
                  >
                  (Mac) or
                  <kbd
                    class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                    >Ctrl+Shift+X</kbd
                  >
                  (Windows/Linux), search "Dev Containers", and click Install.
                </p>
              </div>
            </div>

            <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-6">
              <h3 class="font-semibold mb-3 text-gray-900 dark:text-white">
                ‚úì Verify Installation
              </h3>
              <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                Run these commands in your terminal:
              </p>
              <div class="code-block-wrapper" data-language="bash">
                <button
                  class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                  aria-label="Copy code"
                >
                  Copy
                </button>
                <pre
                  class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                ><code class="language-bash"># Check Docker is running
docker --version
docker ps

# Check VS Code is installed
code --version</code></pre>
              </div>
            </div>
          </section>

          <!-- Quick Start -->
          <section
            id="quick-start"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-4 text-gray-900 dark:text-white">
              üöÄ Quick Start
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <div
                class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 mb-6 rounded-r-lg"
              >
                <p class="text-blue-900 dark:text-blue-200 font-medium mb-2">
                  üìã Prerequisites
                </p>
                <p
                  class="text-sm text-blue-800 dark:text-blue-300 leading-relaxed prereq-text"
                >
                  Before you can open a project in a dev container, you need a
                  <code class="bg-blue-100 dark:bg-blue-900 px-1 rounded"
                    >.devcontainer</code
                  >
                  folder with configuration files (<code
                    class="bg-blue-100 dark:bg-blue-900 px-1 rounded"
                    >devcontainer.json</code
                  >,
                  <code class="bg-blue-100 dark:bg-blue-900 px-1 rounded"
                    >Dockerfile</code
                  >, etc.).
                  <strong
                    >This guide will show you how to create these files
                    step-by-step in the sections below.</strong
                  >
                  If you prefer a faster start, you can also use the
                  <a
                    href="https://github.com/centminmod/claude-code-devcontainers"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="underline hover:text-blue-700 dark:hover:text-blue-300"
                  >
                    prebuilt template repository
                  </a>
                  which already includes a ready-to-use
                  <code class="bg-blue-100 dark:bg-blue-900 px-1 rounded"
                    >.devcontainer</code
                  >
                  folder.
                </p>
              </div>
              <ol
                class="list-decimal list-inside space-y-2 text-gray-700 dark:text-gray-300"
              >
                <li>
                  Install VS Code, Docker Desktop, and the Dev Containers
                  extension.
                </li>
                <li>Open your project folder in VS Code.</li>
                <li>
                  Run <span class="kbd">Cmd+Shift+P</span> (Mac) or
                  <span class="kbd">Ctrl+Shift+P</span> (Win/Linux) ‚Üí
                  <code>Dev Containers: Open Folder in Container</code>.
                </li>
                <li>
                  Wait for first build (5‚Äì10 min). Subsequent launches:
                  <code>Dev Containers: Reopen in Container</code> (‚â≤30s).
                </li>
                <li>
                  Verify inside the container terminal: <code>node -v</code>,
                  <code>python -V</code> or run your app.
                </li>
              </ol>
              <div class="code-block-wrapper mt-4">
                <button
                  class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                  aria-label="Copy code"
                >
                  Copy
                </button>
                <pre
                  class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                ><code class="language-bash"># From VS Code Command Palette
Dev Containers: Open Folder in Container

# Verify inside container
node -v
python -V
</code></pre>
              </div>
            </div>
          </section>

          <!-- What Are Dev Containers -->
          <section
            id="what-are-devcontainers"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ü§î What Are Development Containers?
            </h2>
            <div class="prose prose-lg dark:prose-invert max-w-none">
              <p class="text-gray-700 dark:text-gray-300 leading-relaxed mb-6">
                Think of a development container as a
                <strong>complete development workspace in a box</strong>. It's
                like having a fresh computer dedicated just for your project,
                but it runs inside your current computer!
              </p>

              <div
                class="bg-gradient-to-r from-md-secondary-50 to-md-primary-50 dark:from-md-secondary-900/20 dark:to-md-primary-900/20 rounded-xl p-6 mb-6"
              >
                <h3
                  class="text-xl font-semibold mb-4 text-gray-900 dark:text-white"
                >
                  üí° Real-World Analogy
                </h3>
                <p class="text-gray-700 dark:text-gray-300">
                  Imagine you're a chef. Instead of installing every cooking
                  tool and ingredient in your home kitchen (which gets messy and
                  cluttered), a dev container is like having a fully-equipped
                  portable kitchen that appears ready to go whenever you need
                  it, then disappears when you're done. Each recipe (project)
                  gets its own kitchen setup!
                </p>
              </div>

              <h3
                class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white"
              >
                How It Works
              </h3>
              <div
                class="bg-gray-50 dark:bg-gray-900 rounded-lg p-6 mb-6 font-mono text-sm overflow-x-auto"
              >
                <pre class="text-gray-700 dark:text-gray-300">
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    Your Computer (Mac/Windows/Linux)   ‚îÇ
‚îÇ                                        ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ         VS Code                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  (Your Editor on the outside)     ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                  ‚îÇ                     ‚îÇ
‚îÇ                  ‚îÇ Connects to         ‚îÇ
‚îÇ                  ‚ñº                     ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ    Docker Container               ‚îÇ ‚îÇ
‚îÇ  ‚îÇ    (Isolated workspace)           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ                                   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  * Node.js 22                     ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  * Python 3.14 (via uv)           ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  * Git, Claude Code, tools        ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  * Your project files             ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò</pre
                >
              </div>

              <h3
                class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white"
              >
                Key Benefits
              </h3>
              <div class="grid md:grid-cols-2 gap-4 mb-6">
                <div
                  class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-4"
                >
                  <div class="flex items-start gap-3">
                    <span class="text-2xl" aria-hidden="true">‚ú®</span>
                    <div>
                      <h4
                        class="font-semibold text-md-tertiary-900 dark:text-md-tertiary-200 mb-1"
                      >
                        Zero Setup
                      </h4>
                      <p
                        class="text-sm text-md-tertiary-800 dark:text-md-tertiary-300"
                      >
                        No manual installation of Node.js, Python, or tools.
                        It's all pre-installed!
                      </p>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4"
                >
                  <div class="flex items-start gap-3">
                    <span class="text-2xl" aria-hidden="true">üîí</span>
                    <div>
                      <h4
                        class="font-semibold text-md-primary-900 dark:text-md-primary-200 mb-1"
                      >
                        Isolated
                      </h4>
                      <p
                        class="text-sm text-md-primary-800 dark:text-md-primary-300"
                      >
                        Each project runs in its own container. No conflicts
                        between projects!
                      </p>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border border-md-secondary-200 dark:border-md-secondary-800 rounded-lg p-4"
                >
                  <div class="flex items-start gap-3">
                    <span class="text-2xl" aria-hidden="true">üîÑ</span>
                    <div>
                      <h4
                        class="font-semibold text-purple-900 dark:text-purple-200 mb-1"
                      >
                        Reproducible
                      </h4>
                      <p class="text-sm text-purple-800 dark:text-purple-300">
                        Same setup on every computer. "Works on my machine"
                        problems disappear!
                      </p>
                    </div>
                  </div>
                </div>
                <div
                  class="bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-4"
                >
                  <div class="flex items-start gap-3">
                    <span class="text-2xl" aria-hidden="true">üóëÔ∏è</span>
                    <div>
                      <h4
                        class="font-semibold text-orange-900 dark:text-orange-200 mb-1"
                      >
                        Disposable
                      </h4>
                      <p class="text-sm text-orange-800 dark:text-orange-300">
                        Delete and rebuild anytime without losing your
                        configuration files.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>

          <!-- Why Use Dev Containers -->
          <section
            id="why-use-devcontainers"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚úÖ Why Use Development Containers?
            </h2>
            <div class="space-y-6">
              <div>
                <h3
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  For Individual Developers
                </h3>
                <ul class="space-y-2">
                  <li class="flex items-start gap-3">
                    <span class="text-green-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Clean Host System:</strong> Your computer stays
                      clean - no installing dozens of tools globally</span
                    >
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="text-green-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Multiple Environments:</strong> Work on Python
                      3.9 and Python 3.14 projects simultaneously without
                      conflicts</span
                    >
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="text-green-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Consistency:</strong> Same setup works perfectly
                      on Mac, Windows, and Linux</span
                    >
                  </li>
                </ul>
              </div>

              <div>
                <h3
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  For Teams
                </h3>
                <ul class="space-y-2">
                  <li class="flex items-start gap-3">
                    <span class="text-md-primary-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Fast Onboarding:</strong> New team members coding
                      in minutes instead of hours/days</span
                    >
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="text-md-primary-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Standardization:</strong> Everyone uses the exact
                      same tool versions</span
                    >
                  </li>
                  <li class="flex items-start gap-3">
                    <span class="text-md-primary-500 text-xl" aria-hidden="true"
                      >‚úì</span
                    >
                    <span class="text-gray-700 dark:text-gray-300"
                      ><strong>Documentation as Code:</strong> Setup is
                      version-controlled and documented automatically</span
                    >
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <!-- When NOT to Use -->
          <section
            id="when-not-to-use"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚ö†Ô∏è When NOT to Use Dev Containers
            </h2>
            <div
              class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-6 rounded-r-lg mb-6"
            >
              <p class="text-md-error-900 dark:text-md-error-200 mb-4">
                Dev containers aren't always the best solution. Here's when to
                skip them:
              </p>
              <ul class="space-y-3">
                <li class="flex items-start gap-3">
                  <span
                    class="text-red-500 text-xl flex-shrink-0"
                    aria-hidden="true"
                    >‚úó</span
                  >
                  <div>
                    <strong class="text-yellow-900 dark:text-yellow-100"
                      >Simple Scripts:</strong
                    >
                    <span class="text-md-error-800 dark:text-md-error-300">
                      For a single Python script or small Node.js file, just run
                      it locally</span
                    >
                  </div>
                </li>
                <li class="flex items-start gap-3">
                  <span
                    class="text-red-500 text-xl flex-shrink-0"
                    aria-hidden="true"
                    >‚úó</span
                  >
                  <div>
                    <strong class="text-yellow-900 dark:text-yellow-100"
                      >GUI Applications:</strong
                    >
                    <span class="text-md-error-800 dark:text-md-error-300">
                      Desktop apps requiring native UI don't work well in
                      containers</span
                    >
                  </div>
                </li>
                <li class="flex items-start gap-3">
                  <span
                    class="text-red-500 text-xl flex-shrink-0"
                    aria-hidden="true"
                    >‚úó</span
                  >
                  <div>
                    <strong class="text-yellow-900 dark:text-yellow-100"
                      >Hardware Access:</strong
                    >
                    <span class="text-md-error-800 dark:text-md-error-300">
                      USB devices, GPUs, specialized hardware need complex
                      setup</span
                    >
                  </div>
                </li>
                <li class="flex items-start gap-3">
                  <span
                    class="text-red-500 text-xl flex-shrink-0"
                    aria-hidden="true"
                    >‚úó</span
                  >
                  <div>
                    <strong class="text-yellow-900 dark:text-yellow-100"
                      >Resource-Constrained Machines:</strong
                    >
                    <span class="text-md-error-800 dark:text-md-error-300">
                      Docker overhead (1-2GB RAM) may be too much for older
                      computers</span
                    >
                  </div>
                </li>
              </ul>
            </div>
            <p class="text-gray-700 dark:text-gray-300">
              <strong>Better alternatives:</strong> For simple projects, use
              <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                >nvm</code
              >,
              <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                >pyenv</code
              >, or
              <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                >rbenv</code
              >
              for version management.
            </p>
          </section>

          <!-- Architecture -->
          <section
            id="architecture"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üèóÔ∏è Architecture Overview
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              A dev container consists of three main components working
              together:
            </p>

            <div class="space-y-6">
              <div class="border-l-4 border-primary pl-6">
                <h3
                  class="text-xl font-semibold mb-2 text-gray-900 dark:text-white"
                >
                  üìÑ devcontainer.json
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  The configuration file that tells VS Code how to connect to
                  your container.
                </p>
                <ul
                  class="list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1"
                >
                  <li>Defines which extensions to install</li>
                  <li>Sets environment variables</li>
                  <li>Configures port forwarding</li>
                  <li>Specifies post-creation commands</li>
                </ul>
              </div>

              <div class="border-l-4 border-secondary pl-6">
                <h3
                  class="text-xl font-semibold mb-2 text-gray-900 dark:text-white"
                >
                  üê≥ Dockerfile
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  The blueprint that defines what's installed inside your
                  container.
                </p>
                <ul
                  class="list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1"
                >
                  <li>Specifies base image (e.g., Node.js 22, Python 3.14)</li>
                  <li>Installs system packages and tools</li>
                  <li>Sets up users and permissions</li>
                  <li>Configures the shell environment</li>
                </ul>
              </div>

              <div class="border-l-4 border-md-tertiary-500 pl-6">
                <h3
                  class="text-xl font-semibold mb-2 text-gray-900 dark:text-white"
                >
                  ‚öôÔ∏è Init Scripts (Optional)
                </h3>
                <p class="text-gray-700 dark:text-gray-300 mb-2">
                  Automation scripts that run after the container starts.
                </p>
                <ul
                  class="list-disc list-inside text-sm text-gray-600 dark:text-gray-400 space-y-1"
                >
                  <li>Initialize tool configurations</li>
                  <li>Set up security policies</li>
                  <li>Prepare the development environment</li>
                </ul>
              </div>
            </div>

            <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-6 mt-6">
              <h3 class="font-semibold mb-3 text-gray-900 dark:text-white">
                üìÅ File Structure Example
              </h3>
              <pre
                class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-sm"
              ><code>your-project/
‚îú‚îÄ‚îÄ .devcontainer/
‚îÇ   ‚îú‚îÄ‚îÄ devcontainer.json           # VS Code configuration
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                  # Container blueprint
‚îÇ   ‚îú‚îÄ‚îÄ init-claude-config.sh       # Claude Code auto-config
‚îÇ   ‚îú‚îÄ‚îÄ init-claude-hooks.sh        # Hook deployment script
‚îÇ   ‚îú‚îÄ‚îÄ init-codex-config.sh        # Codex CLI auto-config
‚îÇ   ‚îú‚îÄ‚îÄ init-firewall.sh            # Network security
‚îÇ   ‚îú‚îÄ‚îÄ session-start.sh.template   # Session hook template
‚îÇ   ‚îú‚îÄ‚îÄ settings.json.template      # Claude settings
‚îÇ   ‚îú‚îÄ‚îÄ mcp.json.template           # MCP servers
‚îÇ   ‚îî‚îÄ‚îÄ config.toml.template        # Codex configuration
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ [your project files]</code></pre>
            </div>
          </section>

          <!-- Security & Firewall Setup -->
          <section
            id="security-firewall"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üîí Security & Firewall Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Production dev containers should implement network security with
              iptables firewall configuration. This creates a default-deny
              security posture where only explicitly allowed domains can be
              accessed.
            </p>

            <div
              class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 mb-6 rounded-r-lg"
            >
              <p class="text-sm text-yellow-900 dark:text-yellow-200">
                <strong>‚ö†Ô∏è Advanced Section:</strong> If you're new to dev
                containers, you can skip this section and jump to
                <a
                  href="#claude-config"
                  class="underline hover:text-yellow-700 dark:hover:text-yellow-100"
                  >Claude Code Configuration</a
                >. Return here when you need production-grade security.
              </p>
            </div>

            <div
              class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
              >
                ‚ö†Ô∏è Security Architecture:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-error-800 dark:text-md-error-300 text-sm"
              >
                <li>
                  <strong>Default-deny policy:</strong> All outbound traffic
                  blocked by default
                </li>
                <li>
                  <strong>Allowlist-based:</strong> Only whitelisted domains
                  (npm, GitHub, AI APIs) permitted
                </li>
                <li>
                  <strong>IPv6 disabled:</strong> Prevents bypassing IPv4
                  firewall rules
                </li>
                <li>
                  <strong>Docker-aware:</strong> Preserves inter-container
                  communication
                </li>
                <li>
                  <strong>Startup verification:</strong> Validates rules and
                  tests connectivity
                </li>
              </ul>
            </div>

            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üìö Why Firewall for Dev Containers?
              </p>
              <p
                class="text-md-primary-800 dark:text-md-primary-300 text-sm mb-2"
              >
                According to
                <a
                  href="https://www.anthropic.com/engineering/claude-code-sandboxing"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="underline hover:text-md-primary-600"
                  >Claude's official documentation on sandboxing</a
                >, network isolation is a core security layer. The firewall
                provides:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
              >
                <li>
                  Protection against data exfiltration to untrusted domains
                </li>
                <li>Controlled access to package registries and AI APIs</li>
                <li>Defense-in-depth alongside other security measures</li>
                <li>Audit trail of allowed network destinations</li>
              </ul>
            </div>

            <div
              class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                üõ°Ô∏è Three-Layer Security Architecture:
              </p>
              <p
                class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm mb-2"
              >
                This implementation provides maximum compatibility across Docker
                environments through defense-in-depth:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>Layer 1 (Container Creation):</strong> Disable IPv6
                  via sysctl flags at container startup (most reliable)
                </li>
                <li>
                  <strong>Layer 2 (Runtime):</strong> Attempt IPv6 disable in
                  init script with graceful degradation (warning, not failure)
                </li>
                <li>
                  <strong>Layer 3 (Firewall Backup):</strong> ip6tables DROP
                  rules block all IPv6 traffic if still enabled
                </li>
              </ul>
              <p
                class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm mt-2"
              >
                <strong>Result:</strong> Container starts successfully in any
                environment while maintaining security through at least one
                layer.
              </p>
            </div>

            <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
              Implementation Components
            </h3>

            <div class="space-y-6">
              <!-- Component 1: Docker Capabilities -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <h4
                  class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                >
                  1. Docker Capabilities in devcontainer.json
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Add these <code>runArgs</code> to grant minimal capabilities
                  needed for firewall management with three-layer IPv6 security:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">"runArgs": [
  "--cap-drop=ALL",                              // Drop all capabilities first
  "--cap-add=NET_ADMIN",                         // Required for iptables/sysctl
  "--cap-add=NET_RAW",                           // Required for packet filtering
  "--cap-add=SETUID",                            // Required for sudo operations
  "--cap-add=SETGID",                            // Required for group switching
  "--cap-add=SYS_ADMIN",                         // Required for kernel parameters
  "--sysctl=net.ipv6.conf.all.disable_ipv6=1",   // Layer 1: IPv6 at creation
  "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
  "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
],
"postStartCommand": "sudo /usr/local/bin/init-firewall.sh"</code></pre>
                </div>
              </div>

              <!-- Component 2: Firewall Script -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <h4
                  class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                >
                  2. init-firewall.sh Script
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Create this script in your
                  <code>.devcontainer/</code> directory. It will be copied to
                  <code>/usr/local/bin/</code> during container build:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                  ><code class="language-bash">#!/bin/bash
set -euo pipefail
IFS=$'\n\t'

STATE_FILE="/var/lib/firewall-configured"

# Disable IPv6 to prevent bypass
echo "Disabling IPv6..."
sysctl -w net.ipv6.conf.all.disable_ipv6=1 >/dev/null 2>&1 || true
sysctl -w net.ipv6.conf.default.disable_ipv6=1 >/dev/null 2>&1 || true
sysctl -w net.ipv6.conf.lo.disable_ipv6=1 >/dev/null 2>&1 || true

# Check if already configured
if [ -f "$STATE_FILE" ]; then
    echo "Firewall already configured, skipping..."
    exit 0
fi

echo "Starting firewall configuration..."

# Initialize DNS resolution statistics
TOTAL_DOMAINS=0
RESOLVED_DOMAINS=0
FAILED_DOMAINS=0

# Extract Docker DNS before flushing
DOCKER_DNS_RULES=$(iptables-save -t nat | grep "127\.0\.0\.11" || true)

# Detect Docker networks
echo "Detecting Docker networks..."
DOCKER_NETWORKS=$(ip -o -f inet addr show | grep -v "127.0.0.1" | awk '{print $4}')

if [ -z "$DOCKER_NETWORKS" ]; then
    echo "ERROR: Failed to detect Docker networks"
    exit 1
fi

# Create ipset for allowed domains
ipset destroy allowed-domains 2>/dev/null || true
ipset create allowed-domains hash:net

# Fetch GitHub IP ranges
echo "Fetching GitHub IP ranges..."
gh_ranges=$(curl -s https://api.github.com/meta)
if [ -z "$gh_ranges" ]; then
    echo "ERROR: Failed to fetch GitHub IP ranges"
    exit 1
fi

echo "Processing GitHub IPs..."
while read -r cidr; do
    echo "Adding GitHub range $cidr"
    ipset add allowed-domains "$cidr" -exist
done < <(echo "$gh_ranges" | jq -r '(.web + .api + .git)[]' | aggregate -q)

# Add Anthropic IP ranges (official published ranges)
echo "Adding Anthropic IP ranges..."
echo "Adding Anthropic CIDR range 160.79.104.0/23"
ipset add allowed-domains "160.79.104.0/23" -exist

# Add Anthropic specific IP addresses
for ip in "34.162.46.92" "34.162.102.82" "34.162.136.91" "34.162.142.92" "34.162.183.95"; do
    echo "Adding Anthropic IP $ip"
    ipset add allowed-domains "$ip" -exist
done

# Fetch and add Google Cloud/API IP ranges
echo "Fetching Google Cloud/API IP ranges..."
goog_ranges=$(curl -s https://www.gstatic.com/ipranges/goog.json)
if [ -z "$goog_ranges" ]; then
    echo "ERROR: Failed to fetch Google IP ranges"
    exit 1
fi

echo "Processing Google IPs..."
while read -r cidr; do
    echo "Adding Google range $cidr"
    ipset add allowed-domains "$cidr" -exist
done < <(echo "$goog_ranges" | jq -r '.prefixes[].ipv4Prefix | select(. != null)')

# Fetch and add Cloudflare CDN IP ranges
echo "Fetching Cloudflare CDN IP ranges..."
cf_ranges=$(curl -s https://api.cloudflare.com/client/v4/ips)
if [ -z "$cf_ranges" ]; then
    echo "ERROR: Failed to fetch Cloudflare IP ranges"
    exit 1
fi

echo "Processing Cloudflare IPs..."
while read -r cidr; do
    echo "Adding Cloudflare range $cidr"
    ipset add allowed-domains "$cidr" -exist
done < <(echo "$cf_ranges" | jq -r '.result.ipv4_cidrs[]')

# Fetch and add AWS IP ranges (covers many AI services: Hugging Face, Replicate, etc.)
# Filtered for US East/West regions and EC2/CloudFront services only to limit allowlist size
echo "Fetching AWS IP ranges..."
aws_ranges=$(curl -s https://ip-ranges.amazonaws.com/ip-ranges.json)
if [ -z "$aws_ranges" ]; then
    echo "ERROR: Failed to fetch AWS IP ranges"
    exit 1
fi

echo "Processing AWS IPs (US regions: us-east-1, us-west-2; Services: EC2, CLOUDFRONT)..."
while read -r cidr; do
    echo "Adding AWS range $cidr"
    ipset add allowed-domains "$cidr" -exist
done < <(echo "$aws_ranges" | jq -r '.prefixes[] | select(.region == "us-east-1" or .region == "us-west-2") | select(.service == "EC2" or .service == "CLOUDFRONT") | .ip_prefix' | aggregate -q)

# Resolve and add allowed domains (defense-in-depth: includes DNS backup for services above)
for domain in \
    "dns.google" \
    "1.1.1.1" \
    "8.8.8.8" \
    "8.8.4.4" \
    "auth.openai.com" \
    "chatgpt.com" \
    "context7.com" \
    "unpkg.com" \
    "cdn.jsdelivr.net" \
    "cdnjs.cloudflare.com" \
    "github.com" \
    "api.github.com" \
    "raw.githubusercontent.com" \
    "github.githubassets.com" \
    "collector.github.com" \
    "ghcr.io" \
    "pkg-containers.githubusercontent.com" \
    "nodejs.org" \
    "registry.npmjs.org" \
    "pypi.org" \
    "files.pythonhosted.org" \
    "astral.sh" \
    "bun.sh" \
    "crates.io" \
    "static.crates.io" \
    "index.crates.io" \
    "docker.io" \
    "registry-1.docker.io" \
    "auth.docker.io" \
    "production.cloudflare.docker.com" \
    "api.anthropic.com" \
    "api.openai.com" \
    "aistudio.google.com" \
    "accounts.google.com" \
    "oauth2.googleapis.com" \
    "www.googleapis.com" \
    "storage.googleapis.com" \
    "content.googleapis.com" \
    "generativelanguage.googleapis.com" \
    "sentry.io" \
    "statsig.anthropic.com" \
    "statsig.com" \
    "marketplace.visualstudio.com" \
    "vscode.blob.core.windows.net" \
    "update.code.visualstudio.com" \
    "docs.mcp.cloudflare.com" \
    "mcp.context7.com" \
    "vercel.com" \
    "ui.shadcn.com" \
    "tailwindcss.com" \
    "radix-ui.com" \
    "fonts.googleapis.com" \
    "fonts.gstatic.com" \
    "react.dev" \
    "reactjs.org" \
    "esm.sh" \
    "lucide.dev" \
    "openrouter.ai" \
    "api.cerebras.ai" "inference.cerebras.ai" "cloud.cerebras.ai" "cerebras.ai" \
    "dashscope.aliyuncs.com" "qwen.ai" "qwenlm.ai" "aliyuncs.com" "alibabacloud.com" \
    "cn-hangzhou.aliyuncs.com" "us-west-1.aliyuncs.com" "ap-southeast-1.aliyuncs.com" \
    "api.minimax.chat" "minimax.chat" \
    "z.ai" \
    "api.cohere.ai" "cohere.ai" \
    "api.together.xyz" "together.xyz" \
    "api.replicate.com" "replicate.com" \
    "api-inference.huggingface.co" "huggingface.co" \
    "api.perplexity.ai" "perplexity.ai" \
    "api.mistral.ai" "mistral.ai" \
    "api.deepinfra.com" "deepinfra.com" \
    "api.fireworks.ai" "fireworks.ai" \
    "api.groq.com" "groq.com" \
    "api.lepton.ai" "lepton.ai" \
    "mancer.tech" "api.mancer.tech" \
    "api.deepseek.com" "deepseek.com" \
    "api.lingyiwanwu.com" "platform.lingyiwanwu.com"; do

    # Check if IP address
    if [[ "$domain" =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
        echo "Adding IP $domain"
        ipset add allowed-domains "$domain" -exist
        continue
    fi

    # Resolve hostname with graceful error handling
    TOTAL_DOMAINS=$((TOTAL_DOMAINS + 1))
    echo "Resolving $domain..."
    ips=$(dig +noall +answer A "$domain" | awk '$4 == "A" {print $5}')
    if [ -z "$ips" ]; then
        echo "WARNING: Failed to resolve $domain (continuing...)"
        FAILED_DOMAINS=$((FAILED_DOMAINS + 1))
        continue
    fi

    # Successfully resolved, add IPs to allowlist
    domain_resolved=false
    while read -r ip; do
        if [[ ! "$ip" =~ ^[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}$ ]]; then
            echo "WARNING: Invalid IP from DNS for $domain: $ip (skipping)"
            continue
        fi
        echo "Adding $ip for $domain"
        ipset add allowed-domains "$ip" -exist
        domain_resolved=true
    done < <(echo "$ips")

    # Count as resolved only if at least one valid IP was added
    if [ "$domain_resolved" = true ]; then
        RESOLVED_DOMAINS=$((RESOLVED_DOMAINS + 1))
    else
        FAILED_DOMAINS=$((FAILED_DOMAINS + 1))
    fi
done

echo ""
echo "IP allowlist built successfully"
echo "DNS Resolution Summary: ${RESOLVED_DOMAINS}/${TOTAL_DOMAINS} domains resolved successfully"
if [ "$FAILED_DOMAINS" -gt 0 ]; then
    echo "  WARNING: ${FAILED_DOMAINS} domains failed to resolve"
fi
echo ""

# Flush iptables
echo "Flushing iptables..."
iptables -F
iptables -X
iptables -t nat -F
iptables -t nat -X
iptables -t mangle -F
iptables -t mangle -X

# Restore Docker DNS
if [ -n "$DOCKER_DNS_RULES" ]; then
    echo "Restoring Docker DNS..."
    iptables -t nat -N DOCKER_OUTPUT 2>/dev/null || true
    iptables -t nat -N DOCKER_POSTROUTING 2>/dev/null || true
    echo "$DOCKER_DNS_RULES" | xargs -L 1 iptables -t nat
fi

# Configure base rules
echo "Configuring base rules..."
iptables -A OUTPUT -p udp --dport 53 -j ACCEPT
iptables -A INPUT -p udp --sport 53 -j ACCEPT
iptables -A OUTPUT -p tcp --dport 22 -j ACCEPT
iptables -A INPUT -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT
iptables -A INPUT -i lo -j ACCEPT
iptables -A OUTPUT -o lo -j ACCEPT

# Allow Docker networks
echo "Allowing Docker networks..."
while read -r network; do
    echo "  Allowing: $network"
    iptables -A INPUT -s "$network" -j ACCEPT
    iptables -A OUTPUT -d "$network" -j ACCEPT
done < <(echo "$DOCKER_NETWORKS")

# Set default-deny policies
echo "Setting default-deny policies..."
iptables -P INPUT DROP
iptables -P FORWARD DROP
iptables -P OUTPUT DROP

# Allow established connections
iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

# Allow whitelisted domains
iptables -A OUTPUT -m set --match-set allowed-domains dst -j ACCEPT

# Reject all other traffic
iptables -A OUTPUT -j REJECT --reject-with icmp-admin-prohibited

# Configure IPv6 firewall rules (Layer 3 - Defense-in-depth)
echo "Configuring IPv6 firewall rules..."
ip6tables -P INPUT DROP 2>/dev/null || echo "  Note: IPv6 may already be disabled"
ip6tables -P FORWARD DROP 2>/dev/null || true
ip6tables -P OUTPUT DROP 2>/dev/null || true
ip6tables -A INPUT -i lo -j ACCEPT 2>/dev/null || true
ip6tables -A OUTPUT -o lo -j ACCEPT 2>/dev/null || true
ip6tables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT 2>/dev/null || true
ip6tables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT 2>/dev/null || true
ip6tables -A INPUT -j REJECT 2>/dev/null || true
ip6tables -A OUTPUT -j REJECT 2>/dev/null || true
echo "IPv6 firewall rules configured"

echo ""
echo "Firewall configuration complete!"
echo ""

# Verify firewall
echo "Verifying firewall..."

# Check IPv6 disabled (warning only, not fatal)
if sysctl net.ipv6.conf.all.disable_ipv6 | grep -q "= 1"; then
    echo "‚úì IPv6 disabled"
else
    echo "‚ö† WARNING: IPv6 is still enabled (container restrictions may prevent disabling)"
    echo "  IPv6 traffic will be blocked by ip6tables rules as a security fallback"
    echo "  This is expected in some Docker environments and does not affect security"
fi

# Check blocked domains
if curl --connect-timeout 5 https://example.com >/dev/null 2>&1; then
    echo "‚úó Firewall failed - can reach example.com"
    exit 1
else
    echo "‚úì Blocked example.com as expected"
fi

# Check allowed domains
if ! curl --connect-timeout 5 https://api.github.com/zen >/dev/null 2>&1; then
    echo "‚úó Cannot reach api.github.com"
    exit 1
else
    echo "‚úì Can reach api.github.com as expected"
fi

# Verify OpenRouter API access
if ! curl --connect-timeout 5 https://openrouter.ai/api/v1/models >/dev/null 2>&1; then
    echo "‚úó Cannot reach OpenRouter"
    exit 1
else
    echo "‚úì Can reach OpenRouter as expected"
fi

# Verify Cerebras API access
if ! curl --connect-timeout 5 https://api.cerebras.ai/v1/models >/dev/null 2>&1; then
    echo "‚úó Cannot reach Cerebras"
    exit 1
else
    echo "‚úì Can reach Cerebras as expected"
fi

# Mark as configured
touch "$STATE_FILE"
echo "Firewall configured successfully!"</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    üîë Key Features:
                  </p>
                  <ul
                    class="text-sm text-md-tertiary-800 dark:text-md-tertiary-300 space-y-1"
                  >
                    <li>
                      <strong>Three-layer IPv6 security:</strong> Container
                      creation, runtime disable, ip6tables backup
                    </li>
                    <li>
                      <strong>Graceful degradation:</strong> Container starts
                      successfully even if IPv6 can't be disabled
                    </li>
                    <li>
                      <strong>Maximum compatibility:</strong> Works across
                      Docker Desktop, Podman, cloud environments
                    </li>
                    <li>
                      <strong>Idempotent:</strong> Uses state file to skip if
                      already configured
                    </li>
                    <li>
                      <strong>Dynamic IP range fetching:</strong> Fetches
                      official IP ranges from GitHub, Anthropic, Google,
                      Cloudflare, and AWS APIs
                    </li>
                    <li>
                      <strong>AWS IP ranges:</strong> Filtered for US regions
                      (us-east-1, us-west-2) and EC2/CloudFront services to
                      support AWS-hosted AI services (Hugging Face, Replicate)
                    </li>
                    <li>
                      <strong>Resilient DNS resolution:</strong> Warns on DNS
                      failures instead of failing container startup, tracks
                      resolution statistics (e.g., "98/102 domains resolved")
                    </li>
                    <li>
                      <strong>100+ AI service domains:</strong> Comprehensive
                      coverage including OpenRouter, Cerebras, Qwen/Alibaba,
                      Minimax, z.ai, Cohere, Together.ai, Replicate, Hugging
                      Face, Perplexity, Mistral, DeepInfra, Fireworks, Groq,
                      Lepton, DeepSeek, 01.AI (Yi models)
                    </li>
                    <li>
                      <strong>DNS resolution backup:</strong> Defense-in-depth
                      approach with DNS resolution for all domains (including
                      those with IP ranges)
                    </li>
                    <li>
                      <strong>Docker preservation:</strong> Maintains
                      inter-container communication
                    </li>
                    <li>
                      <strong>Self-testing:</strong> Verifies blocked domains
                      and tests connectivity to GitHub, OpenRouter, and Cerebras
                      APIs
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Component 3: Dockerfile Integration -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <h4
                  class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                >
                  3. Dockerfile Integration
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Add these lines to your Dockerfile to install the script and
                  configure sudo:
                </p>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile"># Copy firewall script
COPY init-firewall.sh /usr/local/bin/

# Set permissions and configure sudoers
RUN chmod +x /usr/local/bin/init-firewall.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
    chmod 0440 /etc/sudoers.d/node-firewall</code></pre>
                </div>
              </div>
            </div>

            <div
              class="mt-8 bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
              >
                üõ°Ô∏è Security Considerations:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-error-800 dark:text-md-error-300 text-sm"
              >
                <li>
                  <strong>Three-layer defense:</strong> Multiple security layers
                  ensure protection even if one fails
                </li>
                <li>
                  <strong>IPv6 handling:</strong> If IPv6 can't be disabled
                  (Docker limitations), ip6tables provides equivalent security
                </li>
                <li>
                  <strong>Not foolproof:</strong> Firewall provides
                  defense-in-depth but is not a complete security solution
                </li>
                <li>
                  <strong>Trusted repos only:</strong> Only use dev containers
                  with repositories you trust
                </li>
                <li>
                  <strong>Bypass flag:</strong>
                  <code>--dangerously-skip-permissions</code> bypasses security
                  checks - use with caution
                </li>
                <li>
                  <strong>Customization:</strong> Add your project's specific
                  domains to the allowlist as needed
                </li>
                <li>
                  <strong>Performance:</strong> One-time ~10-30 second startup
                  overhead for DNS resolution and rule configuration
                </li>
              </ul>
            </div>

            <!-- Git Safety and Branch Protection -->
            <div class="mt-12">
              <h3
                class="text-2xl font-bold mb-4 text-gray-900 dark:text-white flex items-center"
              >
                üîê Git Safety and Branch Protection
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-6">
                Prevent accidental commits to protected branches
                (<code>main</code>/
                <code>master</code>) using a pre-commit git hook. This provides
                <strong>technical enforcement</strong> that blocks commits
                before they reach the repository.
              </p>

              <div
                class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-6 rounded-r-lg"
              >
                <p
                  class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                >
                  ‚ö†Ô∏è Why Git Hooks?
                </p>
                <p
                  class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm mb-2"
                >
                  Git hooks are stored in <code>.git/hooks/</code> which is
                  <strong>not tracked by git</strong>. This means:
                </p>
                <ul
                  class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
                >
                  <li>Hooks don't transfer when cloning the repository</li>
                  <li>
                    Must be installed manually after cloning or rebuilding
                  </li>
                  <li>
                    Provide <strong>technical enforcement</strong> (not just
                    guidance)
                  </li>
                </ul>
              </div>

              <h4
                class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-6"
              >
                Installation Steps
              </h4>

              <div class="space-y-4">
                <!-- Step 1 -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-3"
                  >
                    Step 1: Create setup script
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    Create
                    <code>.devcontainer/setup-git-hooks.sh</code>:
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash">#!/bin/bash
#
# Setup Git Hooks
#
# Installs git hooks for branch protection and safety.
# Run this after cloning the repository or rebuilding the container.
#

# Strict error handling
set -euo pipefail

# Dynamically resolve repository root
SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
REPO_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"
HOOKS_DIR="$REPO_ROOT/.git/hooks"

# Validate git repository
if [ ! -d "$REPO_ROOT/.git" ]; then
    echo "‚ùå ERROR: Not a git repository"
    echo "Current directory: $(pwd)"
    echo "Expected .git at: $REPO_ROOT/.git"
    exit 1
fi

# Validate hooks directory is writable
if [ -d "$HOOKS_DIR" ] && [ ! -w "$HOOKS_DIR" ]; then
    echo "‚ùå ERROR: Hooks directory is not writable: $HOOKS_DIR"
    exit 1
fi

echo "=== Git Hooks Setup ==="
echo ""

# Create hooks directory if it doesn't exist
if [ ! -d "$HOOKS_DIR" ]; then
    echo "Creating hooks directory..."
    mkdir -p "$HOOKS_DIR"
fi

# Install pre-commit hook
echo "Installing pre-commit hook..."
cat > "$HOOKS_DIR/pre-commit" << 'EOF'
#!/bin/bash
#
# Git Pre-Commit Hook: Branch Protection
#
# Prevents direct commits to main/master branches.
# Encourages feature branch workflow for safety.
#

BRANCH=$(git branch --show-current)

# Block commits to protected branches
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "master" ]; then
    echo ""
    echo "‚ùå ERROR: Direct commits to '$BRANCH' are not allowed"
    echo ""
    echo "This is a safety measure to protect your work."
    echo ""
    echo "üìù Create a feature branch instead:"
    echo "   git checkout -b feature/your-feature-name"
    echo ""
    echo "Or for session-based work:"
    echo "   git checkout -b session/$(date +%Y%m%d-%H%M)-description"
    echo ""
    exit 1
fi

# Success - allow commit
echo "‚úÖ Committing to branch: $BRANCH"
exit 0
EOF

chmod +x "$HOOKS_DIR/pre-commit"

echo "‚úÖ Pre-commit hook installed"
echo ""

# Verify installation
if [ -x "$HOOKS_DIR/pre-commit" ]; then
    echo "‚úÖ Hook is executable"
else
    echo "‚ùå Hook is not executable!"
    exit 1
fi

echo ""
echo "=== Setup Complete ==="
echo ""
echo "Git hooks have been installed successfully."
echo ""</code></pre>
                  </div>

                  <!-- Key Features Callout -->
                  <div
                    class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mt-4 rounded-r-lg"
                  >
                    <p
                      class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-3"
                    >
                      üîß Key Features of setup-git-hooks.sh
                    </p>

                    <div class="space-y-3">
                      <div>
                        <p
                          class="text-sm font-semibold text-md-primary-800 dark:text-md-primary-300 mb-1"
                        >
                          1. Dynamic Path Resolution
                        </p>
                        <p
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 mb-2"
                        >
                          Script automatically detects repository root
                          regardless of clone location:
                        </p>
                        <div
                          class="bg-gray-50 dark:bg-gray-900 rounded p-2 mb-1"
                        >
                          <code
                            class="text-xs text-gray-800 dark:text-gray-200"
                          >
                            SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" &&
                            pwd)"<br />
                            REPO_ROOT="$(cd "$SCRIPT_DIR/.." && pwd)"<br />
                            HOOKS_DIR="$REPO_ROOT/.git/hooks"
                          </code>
                        </div>
                        <ul
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 list-disc list-inside space-y-1 ml-2"
                        >
                          <li>
                            Works with any repository path (not hard-coded)
                          </li>
                          <li>Portable across different environments</li>
                          <li>Resolves paths relative to script location</li>
                        </ul>
                      </div>

                      <div>
                        <p
                          class="text-sm font-semibold text-md-primary-800 dark:text-md-primary-300 mb-1"
                        >
                          2. Strict Error Handling
                        </p>
                        <p
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 mb-2"
                        >
                          <code
                            class="bg-gray-50 dark:bg-gray-900 px-2 py-1 rounded"
                            >set -euo pipefail</code
                          >
                          ensures robust script execution:
                        </p>
                        <ul
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 list-disc list-inside space-y-1 ml-2"
                        >
                          <li>
                            <code>-e</code>: Exit immediately if any command
                            fails
                          </li>
                          <li>
                            <code>-u</code>: Treat unset variables as errors
                          </li>
                          <li>
                            <code>-o pipefail</code>: Catch failures in piped
                            commands
                          </li>
                        </ul>
                      </div>

                      <div>
                        <p
                          class="text-sm font-semibold text-md-primary-800 dark:text-md-primary-300 mb-1"
                        >
                          3. Validation Checks
                        </p>
                        <p
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 mb-1"
                        >
                          Script validates prerequisites before installation:
                        </p>
                        <ul
                          class="text-xs text-md-primary-700 dark:text-md-primary-400 list-disc list-inside space-y-1 ml-2"
                        >
                          <li>Verifies <code>.git</code> directory exists</li>
                          <li>Checks hooks directory is writable</li>
                          <li>
                            Provides clear error messages with diagnostics
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Step 2: Automatic Installation -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-3"
                  >
                    Step 2: Automatic Installation (Recommended)
                  </p>

                  <div
                    class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-4 rounded-r-lg"
                  >
                    <p
                      class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                    >
                      ‚úÖ Automatic Installation
                    </p>
                    <p
                      class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm mb-2"
                    >
                      The git hook is automatically installed on every container
                      start via the <code>postStartCommand</code> in
                      devcontainer.json. No manual setup required!
                    </p>
                    <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                      <code class="text-xs text-gray-800 dark:text-gray-200">
                        "postStartCommand": "... && bash
                        ${containerWorkspaceFolder}/.devcontainer/setup-git-hooks.sh"
                      </code>
                    </div>
                    <p
                      class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
                    >
                      This ensures hooks are always present after container
                      rebuilds or fresh clones.
                    </p>
                  </div>

                  <p
                    class="text-sm text-gray-700 dark:text-gray-300 font-semibold mb-2"
                  >
                    Benefits:
                  </p>
                  <ul
                    class="text-sm text-gray-700 dark:text-gray-300 list-disc list-inside space-y-1 mb-4"
                  >
                    <li>
                      No manual installation required after container rebuild
                    </li>
                    <li>Hooks always present in fresh clones</li>
                    <li>Consistent enforcement across team members</li>
                    <li>Zero-friction developer experience</li>
                  </ul>

                  <p
                    class="text-sm text-gray-700 dark:text-gray-300 font-semibold mb-2"
                  >
                    Manual Installation (if not configured):
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    If automatic installation is not set up, run manually after
                    cloning or rebuilding:
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># From repository root
bash .devcontainer/setup-git-hooks.sh</code></pre>
                  </div>

                  <div class="mt-4">
                    <p
                      class="text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium"
                    >
                      Expected output:
                    </p>
                    <div
                      class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800"
                    >
                      <pre
                        class="text-xs text-green-800 dark:text-green-200 whitespace-pre-wrap"
                      >
=== Git Hooks Setup ===

Installing pre-commit hook...
‚úÖ Pre-commit hook installed

‚úÖ Hook is executable

=== Setup Complete ===

Git hooks have been installed successfully.</pre
                      >
                    </div>
                  </div>
                </div>
              </div>

              <h4
                class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-8"
              >
                Testing the Hook
              </h4>

              <div class="space-y-4">
                <!-- Test 1 -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-error-900 dark:text-md-error-200 font-medium mb-3"
                  >
                    Test 1: Verify hook blocks commits to main
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># Switch to main branch
git checkout main

# Try to commit (should be blocked)
echo "test" > /tmp/test-hook.txt
git add /tmp/test-hook.txt
git commit -m "test"</code></pre>
                  </div>

                  <div class="mt-4">
                    <p
                      class="text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium"
                    >
                      Expected output (hook blocks commit):
                    </p>
                    <div
                      class="bg-red-50 dark:bg-red-900/20 rounded-lg p-3 border border-red-200 dark:border-red-800"
                    >
                      <pre
                        class="text-xs text-red-800 dark:text-red-200 whitespace-pre-wrap"
                      >
‚ùå ERROR: Direct commits to 'main' are not allowed

This is a safety measure to protect your work.

üìù Create a feature branch instead:
   git checkout -b feature/your-feature-name

Or for session-based work:
   git checkout -b session/20251029-1430-description</pre
                      >
                    </div>
                  </div>
                </div>

                <!-- Test 2 -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-green-900 dark:text-green-200 font-medium mb-3"
                  >
                    Test 2: Verify hook allows commits to feature branches
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># Create and switch to feature branch
git checkout -b feature/test-hook

# Commit should succeed
git add /tmp/test-hook.txt
git commit -m "test commit"</code></pre>
                  </div>

                  <div class="mt-4">
                    <p
                      class="text-sm text-gray-600 dark:text-gray-400 mb-2 font-medium"
                    >
                      Expected output (hook allows commit):
                    </p>
                    <div
                      class="bg-green-50 dark:bg-green-900/20 rounded-lg p-3 border border-green-200 dark:border-green-800"
                    >
                      <pre
                        class="text-xs text-green-800 dark:text-green-200 whitespace-pre-wrap"
                      >
‚úÖ Committing to branch: feature/test-hook
[feature/test-hook abc1234] test commit
 1 file changed, 1 insertion(+)</pre
                      >
                    </div>
                  </div>
                </div>
              </div>

              <!-- Troubleshooting Section -->
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-8"
              >
                Troubleshooting
              </h4>

              <div class="space-y-4">
                <!-- Hook not working -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-error-900 dark:text-md-error-200 font-medium mb-3"
                  >
                    üîç Hook not blocking commits to main?
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    Verify the hook is installed and executable:
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># Check if hook exists and is executable
ls -la .git/hooks/pre-commit

# Should show: -rwxr-xr-x (executable permission)</code></pre>
                  </div>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                    If hook is missing or not executable, run the setup script
                    manually:
                  </p>
                  <div class="code-block-wrapper mt-2">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash">bash .devcontainer/setup-git-hooks.sh</code></pre>
                  </div>
                </div>

                <!-- Installation failed -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-warning-900 dark:text-md-warning-200 font-medium mb-3"
                  >
                    ‚ö†Ô∏è Setup script fails or shows errors?
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    Check the installation log (if configured):
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># If postStartCommand logs to file
cat /tmp/git-hooks-install.log</code></pre>
                  </div>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                    Common issues:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-sm text-gray-700 dark:text-gray-300 mt-2"
                  >
                    <li>
                      Not a git repository: Ensure you're in the repository root
                    </li>
                    <li>
                      Permission denied: Check file permissions with
                      <code>ls -la .devcontainer/setup-git-hooks.sh</code>
                    </li>
                    <li>
                      Script not executable: Run
                      <code>chmod +x .devcontainer/setup-git-hooks.sh</code>
                    </li>
                  </ul>
                </div>

                <!-- Test hook manually -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p
                    class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-3"
                  >
                    üß™ Test the hook manually
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    You can run the hook script directly to verify it works:
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># Test the hook directly
bash .git/hooks/pre-commit

# Should show:
# ‚úÖ Committing to branch: [your-current-branch]
# OR
# ‚ùå ERROR: Direct commits to 'main' are not allowed</code></pre>
                  </div>
                </div>

                <!-- Bypass hook -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <p class="text-gray-900 dark:text-gray-100 font-medium mb-3">
                    üö® Bypass hook (emergency only)
                  </p>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    If you absolutely must commit to main/master (not
                    recommended):
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash">git commit --no-verify -m "your message"</code></pre>
                  </div>
                  <div
                    class="bg-red-50 dark:bg-red-900/20 border-l-4 border-red-500 p-3 mt-3 rounded-r-lg"
                  >
                    <p class="text-red-800 dark:text-red-200 text-xs">
                      ‚ö†Ô∏è Warning: Only use <code>--no-verify</code> when
                      absolutely necessary. It bypasses all git hooks and safety
                      checks.
                    </p>
                  </div>
                </div>
              </div>

              <!-- Pre-Work Sync Check -->
              <h4
                class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-8"
              >
                Pre-Work Sync Check (MANDATORY)
              </h4>

              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
              >
                <p
                  class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-3"
                >
                  ‚ö†Ô∏è ALWAYS Check Before Creating Branches
                </p>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Before creating any new feature or session branch, you MUST
                  ensure your local master branch is up-to-date with the remote.
                  This prevents working on outdated code and reduces merge
                  conflicts.
                </p>
              </div>

              <div class="space-y-6 mb-8">
                <!-- Step 1: Check Current Status -->
                <div>
                  <p
                    class="text-sm font-medium text-gray-900 dark:text-white mb-3"
                  >
                    Step 1: Check Your Sync Status
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># 1. Switch to master (if not already there)
git checkout master

# 2. Fetch latest changes from remote (safe, doesn't merge)
git fetch origin

# 3. Check sync status
git status</code></pre>
                  </div>
                </div>

                <!-- Status Scenarios -->
                <div>
                  <p
                    class="text-sm font-medium text-gray-900 dark:text-white mb-3"
                  >
                    Step 2: Interpret Status and Take Action
                  </p>

                  <!-- Scenario 1: Up to Date -->
                  <div
                    class="border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-4"
                  >
                    <p
                      class="text-green-900 dark:text-green-200 font-medium mb-3"
                    >
                      ‚úÖ Scenario 1: Up to Date
                    </p>
                    <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                      Status shows:
                      <code
                        class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs"
                        >"Your branch is up to date with 'origin/master'"</code
                      >
                    </p>
                    <p
                      class="text-sm text-green-700 dark:text-green-300 font-medium mb-3"
                    >
                      ‚Üí Safe to proceed! Create your branch:
                    </p>
                    <div class="code-block-wrapper" data-language="bash">
                      <button
                        class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                        aria-label="Copy code"
                      >
                        Copy
                      </button>
                      <pre
                        class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                      ><code class="language-bash">git checkout -b feature/your-feature-name
# OR
git checkout -b session/$(date +%Y%m%d-%H%M)-description</code></pre>
                    </div>
                  </div>

                  <!-- Scenario 2: Behind -->
                  <div
                    class="border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-4"
                  >
                    <p
                      class="text-yellow-900 dark:text-yellow-200 font-medium mb-3"
                    >
                      ‚ö†Ô∏è Scenario 2: Behind Remote
                    </p>
                    <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                      Status shows:
                      <code
                        class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs"
                        >"Your branch is behind 'origin/master' by X
                        commits"</code
                      >
                    </p>
                    <p
                      class="text-sm text-yellow-700 dark:text-yellow-300 font-medium mb-3"
                    >
                      ‚Üí Pull first, then verify:
                    </p>
                    <div class="code-block-wrapper" data-language="bash">
                      <button
                        class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                        aria-label="Copy code"
                      >
                        Copy
                      </button>
                      <pre
                        class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                      ><code class="language-bash"># Pull latest changes
git pull origin master

# Verify sync status
git status  # Should now show "up to date"

# Now create your branch
git checkout -b feature/your-feature-name</code></pre>
                    </div>
                  </div>

                  <!-- Scenario 3: Diverged -->
                  <div
                    class="border border-gray-200 dark:border-gray-700 rounded-lg p-6 mb-4"
                  >
                    <p
                      class="text-md-error-900 dark:text-md-error-200 font-medium mb-3"
                    >
                      ‚ùå Scenario 3: Diverged from Remote
                    </p>
                    <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                      Status shows:
                      <code
                        class="bg-gray-100 dark:bg-gray-800 px-2 py-1 rounded text-xs"
                        >"Your branch and 'origin/master' have diverged"</code
                      >
                    </p>
                    <p
                      class="text-sm text-red-700 dark:text-red-300 font-medium mb-3"
                    >
                      ‚Üí Resolve divergence before creating branch:
                    </p>

                    <div class="space-y-3">
                      <div>
                        <p
                          class="text-xs text-gray-600 dark:text-gray-400 mb-2"
                        >
                          Option 1: If you have NO local commits on master
                          (safe):
                        </p>
                        <div class="code-block-wrapper" data-language="bash">
                          <button
                            class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                            aria-label="Copy code"
                          >
                            Copy
                          </button>
                          <pre
                            class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                          ><code class="language-bash"># Force sync with remote (discards local changes)
git reset --hard origin/master

# Verify
git status  # Should show "up to date"</code></pre>
                        </div>
                      </div>

                      <div>
                        <p
                          class="text-xs text-gray-600 dark:text-gray-400 mb-2"
                        >
                          Option 2: If you have local commits to preserve:
                        </p>
                        <div class="code-block-wrapper" data-language="bash">
                          <button
                            class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                            aria-label="Copy code"
                          >
                            Copy
                          </button>
                          <pre
                            class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                          ><code class="language-bash"># Option A: Merge (creates merge commit)
git pull origin master

# Option B: Rebase (linear history)
git rebase origin/master

# Resolve any conflicts, then verify
git status</code></pre>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Why This Matters -->
                <div
                  class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg"
                >
                  <p class="text-blue-900 dark:text-blue-200 font-medium mb-3">
                    üí° Why This Matters
                  </p>
                  <ul
                    class="text-sm text-gray-700 dark:text-gray-300 space-y-2 ml-4"
                  >
                    <li>
                      ‚úÖ Ensures your feature branch is based on the latest code
                    </li>
                    <li>
                      ‚úÖ Prevents building on outdated codebase (which leads to
                      conflicts)
                    </li>
                    <li>‚úÖ Reduces merge conflicts when creating your PR</li>
                    <li>
                      ‚úÖ Ensures tests/CI run against current codebase state
                    </li>
                    <li>
                      ‚úÖ Prevents duplicating work that others already merged
                    </li>
                    <li>‚úÖ Maintains clean, linear git history</li>
                  </ul>
                </div>

                <!-- Complete Workflow Example -->
                <div>
                  <p
                    class="text-sm font-medium text-gray-900 dark:text-white mb-3"
                  >
                    Complete Workflow: From Master to New Branch
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto text-xs"
                    ><code class="language-bash"># Step-by-step workflow
git checkout master              # Switch to master
git fetch origin                 # Download latest info
git status                       # Check if behind
git pull origin master           # Pull if needed (only if behind)
git status                       # Verify "up to date"
git checkout -b feature/new-api  # Create branch
git branch --show-current        # Verify: "feature/new-api"

# ‚úÖ Now safe to start work!</code></pre>
                  </div>
                </div>
              </div>

              <h4
                class="text-lg font-semibold text-gray-900 dark:text-white mb-3 mt-8"
              >
                Branch Naming Conventions
              </h4>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    Feature Branches (long-term work)
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <pre
                      class="bg-gray-800 text-gray-100 p-3 rounded-lg overflow-x-auto text-xs"
                    ><code>feature/add-authentication
feature/update-api
fix/broken-login
refactor/clean-up-code</code></pre>
                  </div>
                </div>

                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
                >
                  <p
                    class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    Session Branches (exploratory work)
                  </p>
                  <div class="code-block-wrapper">
                    <pre
                      class="bg-gray-800 text-gray-100 p-3 rounded-lg overflow-x-auto text-xs"
                    ><code>session/20251029-1045-add-firewall
session/20251029-1430-fix-bug
session/20251029-1600-update-docs</code></pre>
                  </div>
                  <p
                    class="text-xs text-gray-600 dark:text-gray-400 mt-2 italic"
                  >
                    Format: session/YYYYMMDD-HHMM-description
                  </p>
                </div>
              </div>

              <div
                class="bg-amber-50 dark:bg-amber-900/20 border-l-4 border-amber-500 p-4 mb-6 rounded-r-lg"
              >
                <p
                  class="text-amber-900 dark:text-amber-200 font-medium mb-2 flex items-center"
                >
                  üîß Troubleshooting
                </p>
                <div class="space-y-3">
                  <div>
                    <p
                      class="text-sm text-amber-800 dark:text-amber-300 font-medium"
                    >
                      Problem: Hook doesn't block commits
                    </p>
                    <p class="text-xs text-amber-700 dark:text-amber-400 mt-1">
                      Check if hook is installed:
                      <code class="bg-amber-100 dark:bg-amber-900 px-1 rounded"
                        >test -x .git/hooks/pre-commit && echo "‚úÖ Installed" ||
                        echo "‚ùå Missing"</code
                      >
                    </p>
                  </div>
                  <div>
                    <p
                      class="text-sm text-amber-800 dark:text-amber-300 font-medium"
                    >
                      Problem: Permission denied error
                    </p>
                    <p class="text-xs text-amber-700 dark:text-amber-400 mt-1">
                      Make hook executable:
                      <code class="bg-amber-100 dark:bg-amber-900 px-1 rounded"
                        >chmod +x .git/hooks/pre-commit</code
                      >
                    </p>
                  </div>
                  <div>
                    <p
                      class="text-sm text-amber-800 dark:text-amber-300 font-medium"
                    >
                      Problem: Emergency fix needed on main
                    </p>
                    <p class="text-xs text-amber-700 dark:text-amber-400 mt-1">
                      <strong>Better approach:</strong> Create hotfix branch:
                      <code class="bg-amber-100 dark:bg-amber-900 px-1 rounded"
                        >git checkout -b hotfix/critical-fix</code
                      >
                    </p>
                    <p
                      class="text-xs text-amber-700 dark:text-amber-400 mt-1 italic"
                    >
                      Bypass (NOT recommended):
                      <code class="bg-amber-100 dark:bg-amber-900 px-1 rounded"
                        >git commit --no-verify</code
                      >
                    </p>
                  </div>
                </div>
              </div>

              <div
                class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 rounded-r-lg"
              >
                <p
                  class="text-blue-900 dark:text-blue-200 font-medium mb-2 flex items-center"
                >
                  üí° How It Works
                </p>
                <ol
                  class="list-decimal list-inside space-y-1 text-blue-800 dark:text-blue-300 text-sm"
                >
                  <li>
                    Git automatically runs
                    <code>.git/hooks/pre-commit</code> before every commit
                  </li>
                  <li>
                    Hook reads current branch name with
                    <code>git branch --show-current</code>
                  </li>
                  <li>
                    If branch is <code>main</code> or <code>master</code>, hook
                    exits with code 1 (blocks commit)
                  </li>
                  <li>
                    Users can override with
                    <code>--no-verify</code> flag if absolutely necessary
                  </li>
                </ol>
              </div>
            </div>
          </section>

          <!-- Claude Code Configuration & MCP -->
          <section
            id="claude-config"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚öôÔ∏è Claude Code Configuration & MCP
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Automatically configure Claude Code settings and MCP (Model
              Context Protocol) servers on container startup. This provides
              enhanced functionality like library documentation lookup and
              Cloudflare-specific help.
            </p>

            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 rounded-r-lg mb-6"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üí° What is MCP?
              </p>
              <p
                class="text-md-primary-800 dark:text-md-primary-300 text-sm mb-2"
              >
                Model Context Protocol (MCP) extends Claude Code with
                specialized capabilities through remote servers. Think of it
                like installing plugins that give Claude instant access to
                documentation and APIs.
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
              >
                <li>
                  <strong>context7</strong>: Look up up-to-date library
                  documentation (React, Next.js, Supabase, MongoDB, etc.)
                </li>
                <li>
                  <strong>cf-docs</strong>: Search Cloudflare documentation
                  (Workers, Pages, R2, D1, etc.)
                </li>
              </ul>
            </div>

            <h3
              class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white"
            >
              The init-claude-config.sh Script
            </h3>
            <p class="text-gray-700 dark:text-gray-300 mb-4">
              This script automatically sets up Claude Code configuration on
              container startup by:
            </p>
            <ul
              class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300 mb-6"
            >
              <li>
                Creating
                <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                  >.claude</code
                >
                directory if it doesn't exist
              </li>
              <li>Copying MCP server configuration for context7 and cf-docs</li>
              <li>
                Copying settings template with optimized environment variables
              </li>
              <li>
                Ensuring npm global directory structure exists (required for npx
                with MCP)
              </li>
              <li>
                Preserving user settings if they already exist (won't overwrite)
              </li>
            </ul>

            <div class="space-y-6">
              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  1. Create init-claude-config.sh
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Save this script in your
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >.devcontainer</code
                  >
                  directory:
                </p>
                <div class="code-block-wrapper">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">#!/bin/bash
set -euo pipefail

CLAUDE_HOME="/home/node/.claude"
MCP_FILE="$CLAUDE_HOME/mcp.json"
MCP_TEMPLATE="/usr/local/share/claude-defaults/mcp.json"
SETTINGS_TEMPLATE="/usr/local/share/claude-defaults/settings.json"

echo "Initializing Claude Code configuration..."

# Create .claude directory if it doesn't exist
if [ ! -d "$CLAUDE_HOME" ]; then
    echo "Creating $CLAUDE_HOME directory..."
    mkdir -p "$CLAUDE_HOME"
    chown node:node "$CLAUDE_HOME"
fi

# Copy MCP configuration if it doesn't exist
if [ ! -f "$MCP_FILE" ]; then
    if [ -f "$MCP_TEMPLATE" ]; then
        echo "Copying MCP server configuration..."
        cp "$MCP_TEMPLATE" "$MCP_FILE"
        chown node:node "$MCP_FILE"
        echo "‚úì MCP servers configured:"
        echo "  - context7 (npx @upstash/context7-mcp with API key)"
        echo "  - cf-docs (npx mcp-remote with OAuth)"
    else
        echo "Warning: MCP template not found at $MCP_TEMPLATE"
    fi
else
    echo "MCP configuration already exists, preserving user settings"
fi

# Copy settings.json template if it doesn't exist
if [ ! -f "$CLAUDE_HOME/settings.json" ]; then
    if [ -f "$SETTINGS_TEMPLATE" ]; then
        echo "Copying Claude Code settings from template..."
        cp "$SETTINGS_TEMPLATE" "$CLAUDE_HOME/settings.json"
        chown node:node "$CLAUDE_HOME/settings.json"
        echo "‚úì Environment variables configured (MAX_MCP_OUTPUT_TOKENS, timeouts)"
    fi
else
    echo "Settings already exist, preserving user settings"
fi

# Ensure npm global directory structure exists (required for npx with MCP servers)
if [ ! -d "/home/node/.npm-global/lib" ]; then
    echo "Creating npm global directory structure..."
    mkdir -p /home/node/.npm-global/lib
    chown -R node:node /home/node/.npm-global
    echo "‚úì npm global directory initialized"
fi

echo "Claude Code configuration complete"</code></pre>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  2. Create settings.json.template
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This template configures Claude Code with optimized settings:
                </p>

                <h5
                  class="text-lg font-semibold mb-2 text-gray-900 dark:text-white"
                >
                  Basic Configuration (Recommended)
                </h5>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "dangerously_skip_permissions": true,
  "verbose": true,
  "env": {
    "MAX_MCP_OUTPUT_TOKENS": "60000",
    "BASH_DEFAULT_TIMEOUT_MS": "300000",
    "BASH_MAX_TIMEOUT_MS": "600000",
    "MAX_THINKING_TOKENS": "8192"
  },
  "includeCoAuthoredBy": false
}</code></pre>
                </div>
                <div
                  class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mt-3 rounded-r-lg"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 text-sm"
                  >
                    <strong>üìù Note:</strong> MCP servers are now configured
                    separately in
                    <code
                      class="bg-md-primary-100 dark:bg-md-primary-800 px-1 py-0.5 rounded"
                      >.mcp.json</code
                    >
                    at the project root (see section 3 below).
                  </p>
                </div>

                <h5
                  class="text-lg font-semibold mt-6 mb-2 text-gray-900 dark:text-white"
                >
                  Optional: With OpenTelemetry
                </h5>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Use this version if you have OpenTelemetry infrastructure
                  (otel-collector service):
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "dangerously_skip_permissions": true,
  "verbose": true,
  "env": {
    "MAX_MCP_OUTPUT_TOKENS": "60000",
    "BASH_DEFAULT_TIMEOUT_MS": "300000",
    "BASH_MAX_TIMEOUT_MS": "600000",
    "MAX_THINKING_TOKENS": "8192",
    "CLAUDE_CODE_ENABLE_TELEMETRY": "1",
    "OTEL_LOG_USER_PROMPTS": "1",
    "OTEL_METRICS_EXPORTER": "otlp",
    "OTEL_LOGS_EXPORTER": "otlp",
    "OTEL_EXPORTER_OTLP_PROTOCOL": "grpc",
    "OTEL_EXPORTER_OTLP_ENDPOINT": "http://otel-collector:4317",
    "OTEL_RESOURCE_ATTRIBUTES": "deployment.environment=devcontainer,service.name=claude-code"
  },
  "includeCoAuthoredBy": false
}</code></pre>
                </div>
                <div
                  class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mt-3 rounded-r-lg"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 text-sm"
                  >
                    <strong>üìù Note:</strong> MCP servers are now configured
                    separately in
                    <code
                      class="bg-md-primary-100 dark:bg-md-primary-800 px-1 py-0.5 rounded"
                      >.mcp.json</code
                    >
                    at the project root (see section 3 below).
                  </p>
                </div>
                <div
                  class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Key Settings Explained:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-purple-800 dark:text-purple-300 text-sm"
                  >
                    <li>
                      <strong>MAX_MCP_OUTPUT_TOKENS:</strong> Allows larger
                      documentation responses (60,000 tokens)
                    </li>
                    <li>
                      <strong>BASH_*_TIMEOUT_MS:</strong> Extended timeouts for
                      long-running commands
                    </li>
                    <li>
                      <strong>MAX_THINKING_TOKENS:</strong> Enables deeper
                      reasoning (8,192 tokens)
                    </li>
                    <li>
                      <strong>dangerously_skip_permissions:</strong> Skips tool
                      execution prompts for 50-80% faster responses (‚ö†Ô∏è ONLY
                      safe in isolated devcontainers)
                    </li>
                    <li>
                      <strong>verbose:</strong> Enables detailed logging for
                      easier debugging (no performance impact)
                    </li>
                  </ul>
                </div>

                <div
                  class="bg-orange-50 dark:bg-orange-900/20 border-l-4 border-orange-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-orange-900 dark:text-orange-200 font-medium mb-2"
                  >
                    üìä Optional OpenTelemetry Variables:
                  </p>
                  <p class="text-orange-800 dark:text-orange-300 text-sm mb-2">
                    Only include these if you have OpenTelemetry infrastructure
                    (otel-collector service):
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-orange-800 dark:text-orange-300 text-sm"
                  >
                    <li>
                      <strong>CLAUDE_CODE_ENABLE_TELEMETRY:</strong> Enables
                      telemetry collection in Claude Code
                    </li>
                    <li>
                      <strong>OTEL_LOG_USER_PROMPTS:</strong> Logs user prompts
                      for debugging and analysis
                    </li>
                    <li>
                      <strong>OTEL_METRICS_EXPORTER:</strong> Sets metrics
                      export protocol (otlp)
                    </li>
                    <li>
                      <strong>OTEL_LOGS_EXPORTER:</strong> Sets logs export
                      protocol (otlp)
                    </li>
                    <li>
                      <strong>OTEL_EXPORTER_OTLP_PROTOCOL:</strong>
                      Communication protocol for OTLP (grpc or http)
                    </li>
                    <li>
                      <strong>OTEL_EXPORTER_OTLP_ENDPOINT:</strong> URL of your
                      OpenTelemetry collector endpoint
                    </li>
                    <li>
                      <strong>OTEL_RESOURCE_ATTRIBUTES:</strong> Service
                      identification metadata for distributed tracing
                    </li>
                  </ul>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  3. Create mcp.json.template
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  MCP configuration with stdio transport using npx for package
                  execution:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["-y", "@upstash/context7-mcp"],
      "env": {
        "CONTEXT7_API_KEY": "${CONTEXT7_API_KEY}"
      }
    },
    "cf-docs": {
      "command": "npx",
      "args": ["mcp-remote", "https://docs.mcp.cloudflare.com/mcp"]
    },
    "chrome-devtools": {
      "command": "npx",
      "args": [
        "-y",
        "chrome-devtools-mcp@latest",
        "--executablePath=/usr/bin/chromium",
        "--headless",
        "--chromeArg=--no-sandbox",
        "--chromeArg=--disable-setuid-sandbox",
        "--chromeArg=--disable-dev-shm-usage"
      ],
      "transport": {
        "type": "stdio"
      }
    }
  }
}</code></pre>
                </div>
                <div
                  class="mt-3 bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-3 rounded-r-lg"
                >
                  <p
                    class="text-sm text-md-primary-900 dark:text-md-primary-200"
                  >
                    <strong>üí° Chrome DevTools Note:</strong> The
                    <code
                      class="bg-md-primary-100 dark:bg-md-primary-900 px-1 rounded"
                      >--executablePath=/usr/bin/chromium</code
                    >
                    argument is required in containers because Chromium (not
                    Google Chrome) is installed at
                    <code
                      class="bg-md-primary-100 dark:bg-md-primary-900 px-1 rounded"
                      >/usr/bin/chromium</code
                    >. The
                    <code
                      class="bg-md-primary-100 dark:bg-md-primary-900 px-1 rounded"
                      >--no-sandbox</code
                    >
                    and related flags are required for running Chromium in
                    Docker containers.
                  </p>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  4. Create config.toml.template (Codex CLI)
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This template configures Codex CLI for Docker containers by
                  disabling the Landlock sandbox (not supported in LinuxKit
                  kernel):
                </p>
                <div class="code-block-wrapper" data-language="ini">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-ini"># Codex CLI configuration template for Docker containers
# Auto-copied to ~/.codex/config.toml by init-codex-config.sh

model = "gpt-5"
model_reasoning_effort = "medium"

# CRITICAL: Disable Landlock sandbox (not supported in Docker's LinuxKit kernel)
# OpenAI's official recommendation for containerized environments
# Security is provided by Docker isolation, network firewall, and non-root user
sandbox_mode = "danger-full-access"
approval_policy = "never"


[tui]
# Desktop notifications from the TUI: boolean or filtered list. Default: false
# Examples: true | ["agent-turn-complete", "approval-requested"]
notifications = false
# Show raw reasoning content when available (default: false)
show_raw_agent_reasoning = true
# Ensure we do not hide internal reasoning (default: false)
hide_agent_reasoning = false

[features]
web_search_request = true
unified_exec = false
streamable_shell = false
rmcp_client = false
apply_patch_freeform = false
view_image_tool = true
experimental_sandbox_command_assessment = false
ghost_commit = false
enable_experimental_windows_sandbox = false

[mcp_servers.cf-docs]
command = "npx"
args = ["-y", "mcp-remote", "https://docs.mcp.cloudflare.com/sse"]

[mcp_servers.chrome-devtools]
command = "npx"
args = [
"-y",
"chrome-devtools-mcp@latest",
"--executablePath=/usr/bin/chromium",
"--headless",
"--isolated",
"--chromeArg=--no-sandbox",
"--chromeArg=--disable-setuid-sandbox",
"--chromeArg=--disable-dev-shm-usage"
]

[mcp_servers.context7]
command = "npx"
args = ["-y", "@upstash/context7-mcp@latest"]</code></pre>
                </div>
                <div
                  class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
                  >
                    üîí Why Disable Sandbox?
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-md-error-800 dark:text-md-error-300 text-sm"
                  >
                    <li>
                      Docker's LinuxKit kernel doesn't support Landlock security
                      module
                    </li>
                    <li>
                      Container already provides isolation via Docker, firewall,
                      non-root user
                    </li>
                    <li>
                      OpenAI's official recommendation for containerized
                      environments
                    </li>
                    <li>
                      See
                      <a
                        href="#troubleshooting"
                        class="underline hover:text-md-error-600"
                        >Troubleshooting ‚Üí Codex CLI Landlock Error</a
                      >
                      for details
                    </li>
                  </ul>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  5. Create init-codex-config.sh
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This script automatically configures Codex CLI on container
                  startup:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">#!/bin/bash
set -euo pipefail

CODEX_HOME="/home/node/.codex"
CONFIG_FILE="$CODEX_HOME/config.toml"
CONFIG_TEMPLATE="/usr/local/share/codex-defaults/config.toml"

echo "Initializing Codex CLI configuration..."

# Create .codex directory if it doesn't exist
if [ ! -d "$CODEX_HOME" ]; then
    echo "Creating $CODEX_HOME directory..."
    mkdir -p "$CODEX_HOME"
    chown node:node "$CODEX_HOME"
fi

# Copy config template if it doesn't exist
if [ ! -f "$CONFIG_FILE" ]; then
    if [ -f "$CONFIG_TEMPLATE" ]; then
        echo "Copying Codex CLI configuration from template..."
        cp "$CONFIG_TEMPLATE" "$CONFIG_FILE"
        chown node:node "$CONFIG_FILE"
        echo "‚úì Codex sandbox disabled (Docker container isolation used instead)"
        echo "  sandbox_mode: danger-full-access"
        echo "  approval_policy: never"
    else
        echo "Warning: Codex config template not found at $CONFIG_TEMPLATE"
    fi
else
    echo "Codex config already exists, preserving user settings"
fi

echo "Codex CLI configuration complete"</code></pre>
                </div>
                <div
                  class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    üí° Key Features:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
                  >
                    <li>
                      <strong>Idempotent:</strong> Only creates config if it
                      doesn't exist
                    </li>
                    <li>
                      <strong>Preserves user settings:</strong> Won't overwrite
                      existing configuration
                    </li>
                    <li>
                      <strong>Proper ownership:</strong> Uses chown to ensure
                      node user can access files
                    </li>
                    <li>
                      <strong>Informative output:</strong> Logs what it's doing
                      for debugging
                    </li>
                  </ul>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  6. Integrate into Dockerfile
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Add these sections to your Dockerfile to enable automatic
                  configuration:
                </p>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile"># Switch to root for setup
USER root

# Create directories for Claude Code and Codex defaults
RUN mkdir -p /usr/local/share/claude-defaults /usr/local/share/codex-defaults

# Copy init scripts and templates
COPY init-claude-config.sh /usr/local/bin/
COPY init-codex-config.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json
COPY --chown=node:node config.toml.template /usr/local/share/codex-defaults/config.toml

# Set permissions and configure sudoers for all init scripts
RUN chmod +x /usr/local/bin/init-claude-config.sh && \
    chmod +x /usr/local/bin/init-codex-config.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-codex-config.sh" > /etc/sudoers.d/node-codex-config && \
    chmod 0440 /etc/sudoers.d/node-claude-config && \
    chmod 0440 /etc/sudoers.d/node-codex-config

# Switch back to node user
USER node</code></pre>
                </div>
              </div>

              <div>
                <h4
                  class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
                >
                  7. Update devcontainer.json
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Run all initialization scripts on container startup:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "postStartCommand": "sudo /usr/local/bin/init-claude-config.sh && sudo /usr/local/bin/init-codex-config.sh && sudo /usr/local/bin/init-firewall.sh"
}</code></pre>
                </div>
                <div
                  class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    üìù Init Script Order:
                  </p>
                  <ol
                    class="list-decimal list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
                  >
                    <li>
                      <strong>init-claude-config.sh</strong> - Configure Claude
                      Code & MCP servers
                    </li>
                    <li>
                      <strong>init-codex-config.sh</strong> - Configure Codex
                      CLI (disable Landlock sandbox)
                    </li>
                    <li>
                      <strong>init-firewall.sh</strong> - Apply network security
                      rules (runs last)
                    </li>
                  </ol>
                  <p
                    class="text-md-primary-800 dark:text-md-primary-300 text-sm mt-2"
                  >
                    Config scripts run before the firewall to ensure npm/npx can
                    download packages if needed. All scripts run automatically
                    each time the container starts.
                  </p>
                </div>
              </div>
            </div>

            <div
              class="mt-8 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ‚úÖ Benefits:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>Zero manual setup:</strong> MCP servers configured
                  automatically on first run
                </li>
                <li>
                  <strong>Instant documentation access:</strong> Ask Claude
                  about any library and get current docs
                </li>
                <li>
                  <strong>Preserves customization:</strong> Won't overwrite if
                  you modify settings manually
                </li>
                <li>
                  <strong>Team consistency:</strong> Everyone gets the same
                  optimized configuration
                </li>
                <li>
                  <strong>Extensible:</strong> Easy to add more MCP servers or
                  environment variables
                </li>
              </ul>
            </div>
          </section>

          <!-- Session Start Hook -->
          <section
            id="session-start-hook"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ü™ù Session Start Hook Configuration
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Session hooks allow you to run automated checks and setup tasks
              when Claude Code starts. This project includes a SessionStart hook
              that verifies your devcontainer environment on every session.
            </p>

            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üí° What the Session Hook Does:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
              >
                <li>Confirms devcontainer environment detection</li>
                <li>
                  Verifies mounted volumes (.claude, .codex, .gemini, .opencode,
                  etc.)
                </li>
                <li>Lists configured MCP servers</li>
                <li>
                  Checks tool availability (claude, codex, gemini, opencode, gh,
                  etc.)
                </li>
                <li>Displays network configuration</li>
                <li>Shows current git branch and warns if on main/master</li>
              </ul>
            </div>

            <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
              Configuration Format
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
              Add this to your <code>~/.claude/settings.json</code> (user-level)
              or <code>.claude/settings.json</code> (workspace-level):
            </p>
            <div class="code-block-wrapper" data-language="json">
              <button
                class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                aria-label="Copy code"
              >
                Copy
              </button>
              <pre
                class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
              ><code class="language-json">{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "\"$CLAUDE_PROJECT_DIR\"/.claude/hooks/session-start.sh"
          }
        ]
      }
    ]
  }
}</code></pre>
            </div>

            <div
              class="mt-6 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ‚úÖ Correct Format - Key Points:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>Capitalized event name:</strong> Use
                  <code>"SessionStart"</code>, not
                  <code>"sessionStart"</code>
                </li>
                <li>
                  <strong>Array format:</strong>
                  <code>"SessionStart": [{ "hooks": [...] }]</code>
                </li>
                <li>
                  <strong>No matcher field:</strong> SessionStart hooks don't
                  use matchers (unlike PreToolUse/PostToolUse)
                </li>
                <li>
                  <strong>$CLAUDE_PROJECT_DIR variable:</strong> Use instead of
                  absolute paths for portability
                </li>
                <li>
                  <strong>Double quotes around path:</strong> Required for paths
                  with environment variables
                </li>
              </ul>
            </div>

            <div
              class="mt-6 bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
              >
                ‚ö†Ô∏è Common Mistakes to Avoid:
              </p>
              <div class="space-y-3 text-sm">
                <div>
                  <p
                    class="text-md-error-800 dark:text-md-error-300 font-medium mb-1"
                  >
                    ‚ùå Old format (will fail validation):
                  </p>
                  <pre
                    class="bg-gray-800 text-gray-100 p-3 rounded text-xs overflow-x-auto"
                  ><code class="language-json">{
  "hooks": {
    "sessionStart": {
      "command": ".claude/hooks/session-start.sh"
    }
  }
}</code></pre>
                </div>
                <div>
                  <p
                    class="text-md-error-800 dark:text-md-error-300 font-medium mb-1"
                  >
                    ‚ùå With matcher field (SessionStart doesn't use matchers):
                  </p>
                  <pre
                    class="bg-gray-800 text-gray-100 p-3 rounded text-xs overflow-x-auto"
                  ><code class="language-json">{
  "hooks": {
    "SessionStart": [{
      "matcher": {},
      "hooks": [...]
    }]
  }
}</code></pre>
                </div>
              </div>
            </div>

            <h3
              class="text-2xl font-bold mb-4 mt-6 text-gray-900 dark:text-white"
            >
              Hook Deployment
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-300 mb-4">
              The session hook is deployed automatically when the devcontainer
              is first created, using a 4-step process:
            </p>

            <div class="space-y-4 mb-6">
              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center gap-3 mb-2">
                  <span
                    class="flex-shrink-0 w-8 h-8 bg-md-primary-500 text-white rounded-full flex items-center justify-center font-bold text-sm"
                    >1</span
                  >
                  <p class="font-medium text-gray-900 dark:text-white">
                    BUILD - Template Inclusion
                  </p>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 ml-11">
                  Dockerfile copies
                  <code>session-start.sh.template</code> and
                  <code>init-claude-hooks.sh</code> into the container image at
                  build time.
                </p>
              </div>

              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center gap-3 mb-2">
                  <span
                    class="flex-shrink-0 w-8 h-8 bg-md-primary-500 text-white rounded-full flex items-center justify-center font-bold text-sm"
                    >2</span
                  >
                  <p class="font-medium text-gray-900 dark:text-white">
                    CREATE - Deployment Script Execution
                  </p>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 ml-11">
                  <code>postCreateCommand</code> runs
                  <code>init-claude-hooks.sh</code> on first container creation.
                </p>
              </div>

              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center gap-3 mb-2">
                  <span
                    class="flex-shrink-0 w-8 h-8 bg-md-primary-500 text-white rounded-full flex items-center justify-center font-bold text-sm"
                    >3</span
                  >
                  <p class="font-medium text-gray-900 dark:text-white">
                    DEPLOY - Template Copy to Workspace
                  </p>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 ml-11">
                  Script copies template to
                  <code>.claude/hooks/session-start.sh</code> (only if file
                  doesn't exist, preserving user customizations).
                </p>
              </div>

              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700"
              >
                <div class="flex items-center gap-3 mb-2">
                  <span
                    class="flex-shrink-0 w-8 h-8 bg-md-primary-500 text-white rounded-full flex items-center justify-center font-bold text-sm"
                    >4</span
                  >
                  <p class="font-medium text-gray-900 dark:text-white">
                    PERSIST - Volume Survival
                  </p>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 ml-11">
                  <code>.claude/</code> directory is mounted as a Docker volume,
                  so your customizations survive container rebuilds.
                </p>
              </div>
            </div>

            <div class="code-block-wrapper mb-4">
              <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">
                <strong>init-claude-hooks.sh deployment script:</strong>
              </p>
              <button
                class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                aria-label="Copy code"
              >
                Copy
              </button>
              <pre
                class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
              ><code class="language-bash">#!/bin/bash
# Claude Code hook deployment script
set -e

echo "=== Claude Code Hooks Setup ==="

TEMPLATE_DIR="/usr/local/share/claude-defaults/hooks"
WORKSPACE_HOOKS="/workspaces/$(basename $PWD)/.claude/hooks"

mkdir -p "$WORKSPACE_HOOKS"

# Only deploy if hook doesn't exist (preserves user customizations)
if [ ! -f "$WORKSPACE_HOOKS/session-start.sh" ]; then
    cp "$TEMPLATE_DIR/session-start.sh" "$WORKSPACE_HOOKS/session-start.sh"
    chmod +x "$WORKSPACE_HOOKS/session-start.sh"
    echo "‚úÖ Deployed session-start.sh"
else
    echo "‚ÑπÔ∏è  session-start.sh already exists (skipping)"
fi

echo "=== Hooks Setup Complete ==="</code></pre>
            </div>

            <div
              class="mt-4 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                üí° Key Benefits:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>Automatic deployment:</strong> No manual copying
                  required
                </li>
                <li>
                  <strong>Preserves customizations:</strong> Won't overwrite
                  existing hooks
                </li>
                <li>
                  <strong>Survives rebuilds:</strong> Volume persistence keeps
                  your changes
                </li>
                <li>
                  <strong>Template versioning:</strong> Template stays in
                  container for reference
                </li>
              </ul>
            </div>

            <h3
              class="text-2xl font-bold mb-4 mt-6 text-gray-900 dark:text-white"
            >
              Verifying the Hook
            </h3>
            <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
              To verify your hook configuration is correct:
            </p>
            <div class="code-block-wrapper" data-language="bash">
              <button
                class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                aria-label="Copy code"
              >
                Copy
              </button>
              <pre
                class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
              ><code class="language-bash"># Check for validation errors
claude /doctor

# Should show no errors in "Invalid Settings" section
# If you see errors about hooks format, the configuration is incorrect</code></pre>
            </div>

            <div
              class="mt-6 bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4"
            >
              <p class="text-gray-900 dark:text-white font-medium mb-2 text-sm">
                üìö Additional Resources:
              </p>
              <ul class="text-sm text-gray-700 dark:text-gray-300 space-y-1">
                <li>
                  ‚Ä¢ Official hooks documentation:
                  <a
                    href="https://docs.claude.com/en/docs/claude-code/hooks"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-md-primary-600 dark:text-md-primary-400 hover:underline"
                    >docs.claude.com/hooks</a
                  >
                </li>
                <li>
                  ‚Ä¢ Hook examples:
                  <a
                    href="https://github.com/anthropics/claude-cookbooks/tree/main/skills/.claude/hooks"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-md-primary-600 dark:text-md-primary-400 hover:underline"
                    >Claude Cookbooks</a
                  >
                </li>
                <li>
                  ‚Ä¢ Session hook script: Located at
                  <code>.devcontainer/session-start.sh.template</code>
                </li>
              </ul>
            </div>
          </section>

          <!-- How to Launch -->
          <section
            id="launching-container"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üöÄ Launching Your Dev Container
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Now that you understand dev containers and have configured your
              setup, here's how to launch and use them:
            </p>

            <div class="space-y-4">
              <!-- First Time Setup -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-md-primary-200 dark:border-md-primary-800"
              >
                <div class="flex items-center justify-between mb-2">
                  <p class="font-medium text-gray-900 dark:text-white">
                    First Time Setup
                  </p>
                  <span
                    class="text-xs px-2 py-1 bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300 rounded"
                  >
                    Slower (5-10 min)
                  </span>
                </div>
                <div class="space-y-2">
                  <div class="flex items-center gap-2 text-sm">
                    <kbd
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Cmd+Shift+P</kbd
                    >
                    <span class="text-gray-600 dark:text-gray-400">(Mac)</span>
                    <span class="text-gray-500">or</span>
                    <kbd
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Ctrl+Shift+P</kbd
                    >
                    <span class="text-gray-600 dark:text-gray-400"
                      >(Windows/Linux)</span
                    >
                  </div>
                  <div class="flex items-center gap-2 text-sm">
                    <span class="text-gray-600 dark:text-gray-400">‚Üí</span>
                    <code
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Dev Containers: Open Folder in Container</code
                    >
                  </div>
                </div>
              </div>

              <!-- Subsequent Launches -->
              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-4 border border-md-tertiary-200 dark:border-md-tertiary-800"
              >
                <div class="flex items-center justify-between mb-2">
                  <p class="font-medium text-gray-900 dark:text-white">
                    Subsequent Launches
                  </p>
                  <span
                    class="text-xs px-2 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 rounded"
                  >
                    Fast (&lt;30 sec)
                  </span>
                </div>
                <div class="space-y-2">
                  <div class="flex items-center gap-2 text-sm">
                    <kbd
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Cmd+Shift+P</kbd
                    >
                    <span class="text-gray-600 dark:text-gray-400">(Mac)</span>
                    <span class="text-gray-500">or</span>
                    <kbd
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Ctrl+Shift+P</kbd
                    >
                    <span class="text-gray-600 dark:text-gray-400"
                      >(Windows/Linux)</span
                    >
                  </div>
                  <div class="flex items-center gap-2 text-sm">
                    <span class="text-gray-600 dark:text-gray-400">‚Üí</span>
                    <code
                      class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded text-xs"
                      >Dev Containers: Reopen in Container</code
                    >
                  </div>
                </div>
              </div>
            </div>

            <div
              class="mt-6 bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 rounded-r-lg"
            >
              <p class="text-sm text-md-primary-900 dark:text-md-primary-200">
                <strong>üí° Tip:</strong> VS Code will automatically prompt you
                with "Reopen in Container" when you open a folder containing a
                <code
                  class="bg-md-primary-100 dark:bg-md-primary-900 px-1 rounded"
                  >.devcontainer</code
                >
                directory.
              </p>
            </div>
          </section>

          <!-- React Example -->
          <section
            id="react-example"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚öõÔ∏è React Project Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Let's create a dev container for a React project. Follow these
              steps:
            </p>

            <div class="space-y-6">
              <!-- Step 1 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold"
                    aria-hidden="true"
                    >1</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create the .devcontainer directory
                  </h3>
                </div>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">mkdir -p .devcontainer
cd .devcontainer</code></pre>
                </div>
              </div>

              <!-- Step 2 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold"
                    aria-hidden="true"
                    >2</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create devcontainer.json
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This file configures VS Code's connection to the container:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "name": "React Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode"
      }
    }
  },
  "runArgs": [
    "--cap-drop=ALL",
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW",
    "--cap-add=SETUID",
    "--cap-add=SETGID",
    "--cap-add=SYS_ADMIN",
    "--sysctl=net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
  ],
  "forwardPorts": [3000, 5173],
  "postCreateCommand": "npm install -g @anthropic-ai/claude-code@latest && npm install -g @openai/codex && npm install -g @google/gemini-cli && npm install -g wrangler@latest && npm install -g vercel@latest && npm install && /usr/local/bin/init-claude-hooks.sh",
  "postStartCommand": "sudo /usr/local/bin/init-claude-config.sh && sudo /usr/local/bin/init-firewall.sh",
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume",
    "source=gemini-config-${devcontainerId},target=/home/node/.gemini,type=volume",
    "source=opencode-config-${devcontainerId},target=/home/node/.opencode,type=volume",
    "source=ghub-config-${devcontainerId},target=/home/node/.config/gh,type=volume",
    "source=npm-global-${devcontainerId},target=/home/node/.npm-global,type=volume",
    "source=cargo-${devcontainerId},target=/home/node/.cargo,type=volume",
    "source=bun-${devcontainerId},target=/home/node/.bun,type=volume",
    "source=local-bin-${devcontainerId},target=/home/node/.local,type=volume",
    "source=aws-config-${devcontainerId},target=/home/node/.aws,type=volume",
    "source=wrangler-config-${devcontainerId},target=/home/node/.wrangler,type=volume",
    "source=vercel-config-${devcontainerId},target=/home/node/.vercel,type=volume"
  ]
}</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    üí° What's happening here:
                  </p>
                  <ul
                    class="text-sm text-md-primary-800 dark:text-md-primary-300 space-y-1"
                  >
                    <li>
                      <strong>extensions:</strong> Auto-installs Claude Code,
                      ESLint, Prettier, and Tailwind CSS support
                    </li>
                    <li>
                      <strong>runArgs:</strong> Grants minimal Docker
                      capabilities for iptables firewall management (see
                      <a href="#security-firewall" class="underline"
                        >Security & Firewall Setup</a
                      >)
                    </li>
                    <li>
                      <strong>forwardPorts:</strong> Makes ports 3000 and 5173
                      accessible on your host machine
                    </li>
                    <li>
                      <strong>postCreateCommand:</strong> Runs
                      <code>npm install</code> automatically after container
                      creation
                    </li>
                    <li>
                      <strong>postStartCommand:</strong> Configures network
                      firewall on container startup
                    </li>
                    <li>
                      <strong>mounts:</strong> Persists command history, AI
                      configs (Claude/Codex/Gemini), GitHub CLI auth, and npm
                      global packages between rebuilds
                    </li>
                  </ul>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Customize for Your Tools
                  </p>
                  <p class="text-sm text-purple-800 dark:text-purple-300 mb-2">
                    Need other tools persisted? Add your own volumes using the
                    same pattern:
                  </p>
                  <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                    <code class="text-xs text-gray-800 dark:text-gray-200">
                      "source=&lt;tool&gt;-${devcontainerId},target=/home/node/.&lt;config-path&gt;,type=volume"
                    </code>
                  </div>
                  <p
                    class="text-sm text-purple-800 dark:text-purple-300 mb-1 font-medium"
                  >
                    Common tools for React projects:
                  </p>
                  <ul
                    class="text-xs text-purple-700 dark:text-purple-400 space-y-1 ml-4"
                  >
                    <li>‚Ä¢ Docker CLI: <code>~/.docker</code></li>
                    <li>‚Ä¢ Yarn cache: <code>~/.yarn</code></li>
                    <li>
                      ‚Ä¢ VS Code extensions:
                      <code>~/.vscode-server/extensions</code>
                    </li>
                    <li>
                      ‚Ä¢ Playwright browsers: <code>~/.cache/ms-playwright</code>
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Step 3 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold"
                    aria-hidden="true"
                    >3</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create Dockerfile
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This defines what gets installed in your container:
                </p>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile"># Start from Node.js 22 base image
FROM node:22

# Install essential tools and firewall dependencies
RUN apt-get update && apt-get install -y \
    git \
    curl \
    iptables \
    ipset \
    dnsutils \
    aggregate \
    jq \
    sudo \
    && rm -rf /var/lib/apt/lists/*

# npm CLI packages (Claude Code, OpenCode, Codex, Gemini, Wrangler, Vercel) installed via postCreateCommand
# This ensures packages install AFTER npm-global volume mounts, preventing version conflicts
# See devcontainer.json postCreateCommand for installation details

# Create directory for Claude Code defaults
RUN mkdir -p /usr/local/share/claude-defaults

# Copy initialization scripts and templates
COPY init-firewall.sh /usr/local/bin/
COPY init-claude-config.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json

# Set permissions and configure sudoers for both scripts
RUN chmod +x /usr/local/bin/init-firewall.sh && \
    chmod +x /usr/local/bin/init-claude-config.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
    chmod 0440 /etc/sudoers.d/node-firewall && \
    chmod 0440 /etc/sudoers.d/node-claude-config

# Set working directory
WORKDIR /workspace

# Configure git (optional, for better commit messages)
RUN git config --global init.defaultBranch main

# Switch to non-root user for security
USER node</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    ‚úÖ What each line does:
                  </p>
                  <ul
                    class="text-sm text-md-tertiary-800 dark:text-md-tertiary-300 space-y-1"
                  >
                    <li>
                      <strong>FROM node:22:</strong> Uses official Node.js 22 as
                      the base
                    </li>
                    <li>
                      <strong>RUN apt-get:</strong> Installs Git, curl, and
                      firewall tools (iptables, ipset, dnsutils, aggregate, jq,
                      sudo)
                    </li>
                    <li>
                      <strong>npm install -g:</strong> Installs Claude Code
                      globally in the container
                    </li>
                    <li>
                      <strong>COPY init-firewall.sh:</strong> Installs the
                      firewall configuration script (see
                      <a href="#security-firewall" class="underline"
                        >Security & Firewall Setup</a
                      >)
                    </li>
                    <li>
                      <strong>sudoers configuration:</strong> Allows node user
                      to run firewall script without password
                    </li>
                    <li>
                      <strong>USER node:</strong> Runs as non-root user for
                      better security
                    </li>
                  </ul>
                </div>
                <div
                  class="mt-4 bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    üìù Note: init-firewall.sh Script
                  </p>
                  <p
                    class="text-sm text-md-primary-800 dark:text-md-primary-300"
                  >
                    Create the <code>init-firewall.sh</code> script in your
                    <code>.devcontainer/</code> directory. The complete script
                    with all allowed domains is provided in the
                    <a href="#security-firewall" class="underline"
                      >Security & Firewall Setup</a
                    >
                    section above.
                  </p>
                </div>
              </div>

              <!-- Step 4 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold"
                    aria-hidden="true"
                    >4</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Open in VS Code
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Now open your project in VS Code. You'll see a prompt:
                </p>
                <div
                  class="bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg p-4 mb-3"
                >
                  <p class="font-mono text-sm text-gray-900 dark:text-gray-100">
                    "Folder contains a Dev Container configuration file. Reopen
                    folder to develop in a container?"
                  </p>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Click <strong>"Reopen in Container"</strong>. VS Code will:
                </p>
                <ol
                  class="list-decimal list-inside text-sm text-gray-700 dark:text-gray-300 space-y-1 mb-3"
                >
                  <li>
                    Build the Docker image (takes 5-10 minutes first time)
                  </li>
                  <li>Start the container</li>
                  <li>Install VS Code extensions</li>
                  <li>Run <code>npm install</code></li>
                  <li>Connect VS Code to the running container</li>
                </ol>
                <div
                  class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 rounded-r-lg"
                >
                  <p class="text-sm text-md-error-900 dark:text-md-error-200">
                    <strong>‚è±Ô∏è First Build:</strong> The first time takes longer
                    (5-10 minutes) because Docker downloads the base image and
                    installs everything. Subsequent starts are much faster (~30
                    seconds).
                  </p>
                </div>
              </div>

              <!-- Step 5 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white font-bold"
                    aria-hidden="true"
                    >5</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Test Your Setup
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Once connected, open the integrated terminal and verify:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Check Node.js version
node --version  # Should show v20.x.x

# Check npm version
npm --version

# Check Claude Code is installed
claude --version

# Start your React dev server
npm run dev  # or npm start</code></pre>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                  üéâ Your React app should now be running at
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >http://localhost:3000</code
                  >
                  or
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >http://localhost:5173</code
                  >
                  (Vite)!
                </p>
              </div>
            </div>
          </section>

          <!-- Python Example -->
          <section
            id="python-example"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üêç Basic Python Project Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Let's create a simple dev container for a Python project with
              Flask or FastAPI. This basic setup is perfect for learning, simple
              scripts, and lightweight projects.
            </p>
            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üìå Basic vs Advanced:
              </p>
              <p class="text-md-primary-800 dark:text-md-primary-300 text-sm">
                This basic setup uses standard pip and minimal dependencies. For
                production projects with advanced tooling (uv package manager,
                bun for hybrid apps, extended libraries), see the
                <strong>Advanced Python Setup</strong> below.
              </p>
            </div>

            <div class="space-y-6">
              <!-- Step 1 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >1</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create devcontainer.json for Python
                  </h3>
                </div>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "name": "Python Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.debugpy",
        "ms-python.black-formatter",
        "charliermarsh.ruff"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.formatting.provider": "black",
        "editor.formatOnSave": true
      }
    }
  },
  "runArgs": [
    "--cap-drop=ALL",
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW",
    "--cap-add=SETUID",
    "--cap-add=SETGID",
    "--cap-add=SYS_ADMIN",
    "--sysctl=net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
  ],
  "forwardPorts": [5000, 8000],
  "postCreateCommand": "pip install -r requirements.txt && /usr/local/bin/init-claude-config.sh && /usr/local/bin/init-python.sh && /usr/local/bin/init-claude-hooks.sh",
  "postStartCommand": "sudo /usr/local/bin/init-firewall.sh",
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume",
    "source=gemini-config-${devcontainerId},target=/home/node/.gemini,type=volume",
    "source=opencode-config-${devcontainerId},target=/home/node/.opencode,type=volume",
    "source=ghub-config-${devcontainerId},target=/home/node/.config/gh,type=volume",
    "source=local-bin-${devcontainerId},target=/home/node/.local,type=volume"
  ]
}</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Customize for Your Tools
                  </p>
                  <p class="text-sm text-purple-800 dark:text-purple-300 mb-2">
                    Python developers often need to persist additional tools.
                    Add volumes using this pattern:
                  </p>
                  <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                    <code class="text-xs text-gray-800 dark:text-gray-200">
                      "source=&lt;tool&gt;-${devcontainerId},target=/home/vscode/.&lt;config-path&gt;,type=volume"
                    </code>
                  </div>
                  <p
                    class="text-sm text-purple-800 dark:text-purple-300 mb-1 font-medium"
                  >
                    Common Python tools:
                  </p>
                  <ul
                    class="text-xs text-purple-700 dark:text-purple-400 space-y-1 ml-4"
                  >
                    <li>‚Ä¢ pip cache: <code>~/.cache/pip</code></li>
                    <li>‚Ä¢ Poetry: <code>~/.config/pypoetry</code></li>
                    <li>‚Ä¢ Jupyter: <code>~/.jupyter</code></li>
                    <li>‚Ä¢ PostgreSQL CLI: <code>~/.psqlrc</code></li>
                  </ul>
                  <p class="text-xs text-purple-700 dark:text-purple-400 mt-2">
                    <strong>Note:</strong> Adjust target paths for your user
                    (<code>vscode</code> vs <code>node</code>)
                  </p>
                </div>
              </div>

              <!-- Step 2 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >2</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create Dockerfile for Python
                  </h3>
                </div>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile"># Start from Node.js 22 base (modern approach with Python 3.14 via uv)
FROM mcr.microsoft.com/devcontainers/javascript-node:22-bookworm

# Install system dependencies and firewall tools
RUN apt-get update && apt-get install -y \
    git \
    curl \
    build-essential \
    iptables \
    ipset \
    dnsutils \
    aggregate \
    jq \
    sudo \
    python3.11 \
    python3.11-dev \
    python3-pip \
    && rm -rf /var/lib/apt/lists/*

# Install uv (fast Python package manager)
# uv installer places binary at /home/node/.local/bin/uv
USER node
RUN curl -LsSf https://astral.sh/uv/install.sh | sh && \
    echo 'export PATH="$HOME/.local/bin:$PATH"' >> /home/node/.bashrc
ENV PATH="/home/node/.local/bin:$PATH"

# Switch back to root for system configuration
USER root

# Install Claude Code CLI
RUN curl -fsSL https://claude.ai/install.sh | bash

# Create directory for Claude Code defaults
RUN mkdir -p /usr/local/share/claude-defaults

# Copy initialization scripts and templates
COPY init-firewall.sh /usr/local/bin/
COPY init-claude-config.sh /usr/local/bin/
COPY init-python.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json

# Set permissions and configure sudoers for scripts
RUN chmod +x /usr/local/bin/init-firewall.sh && \
    chmod +x /usr/local/bin/init-claude-config.sh && \
    chmod +x /usr/local/bin/init-python.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-python.sh" > /etc/sudoers.d/node-python && \
    chmod 0440 /etc/sudoers.d/node-firewall && \
    chmod 0440 /etc/sudoers.d/node-claude-config && \
    chmod 0440 /etc/sudoers.d/node-python

# Set working directory
WORKDIR /workspaces

# Switch to non-root user
USER node

# Set Python to unbuffered mode (better for logs)
ENV PYTHONUNBUFFERED=1

# NOTE: Python 3.14 is installed via init-python.sh in postCreateCommand
# This ensures installation persists in /home/node/.local volume</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border border-md-secondary-200 dark:border-md-secondary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîç Key differences from React setup:
                  </p>
                  <ul
                    class="text-sm text-purple-800 dark:text-purple-300 space-y-1"
                  >
                    <li>
                      <strong>Node.js 22 base image:</strong> Modern approach
                      combining Node.js and Python 3.14 via uv
                    </li>
                    <li>
                      <strong>Python 3.11 system package:</strong> Installed for
                      node-gyp compatibility
                    </li>
                    <li>
                      <strong>uv package manager:</strong> Fast Python package
                      manager for Python 3.14 installation
                    </li>
                    <li>
                      <strong>build-essential:</strong> Needed for packages that
                      compile C extensions
                    </li>
                    <li>
                      <strong>init-python.sh:</strong> Installs Python 3.14
                      during postCreateCommand
                    </li>
                    <li>
                      <strong>PYTHONUNBUFFERED=1:</strong> Makes print() output
                      appear immediately in logs
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Step 3 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >3</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create requirements.txt
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  List your Python dependencies (example for Flask):
                </p>
                <div class="code-block-wrapper" data-language="text">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-text">flask==3.0.0
python-dotenv==1.0.0
requests==2.31.0</code></pre>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-2">
                  Or for FastAPI:
                </p>
                <div class="code-block-wrapper" data-language="text">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-text">fastapi==0.104.0
uvicorn[standard]==0.24.0
python-dotenv==1.0.0
pydantic==2.5.0</code></pre>
                </div>
              </div>

              <!-- Step 4 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >4</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Test Your Python Setup
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  After reopening in container, test in the terminal:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Check Python version
python --version  # Should show Python 3.14.x

# Check pip version
pip --version

# Verify dependencies installed
pip list

# Run Flask app (example)
python app.py

# Or run FastAPI app (example)
uvicorn main:app --reload --host 0.0.0.0 --port 8000</code></pre>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                  üéâ Your Python app should now be accessible at
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >http://localhost:5000</code
                  >
                  (Flask) or
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >http://localhost:8000</code
                  >
                  (FastAPI)!
                </p>
              </div>
            </div>
          </section>

          <!-- Advanced Python Example -->
          <section
            id="python-advanced-example"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚ö° Advanced Python Project Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              A production-ready Python dev container with modern tooling,
              extended libraries, and hybrid app support (Python + JavaScript
              frontends).
            </p>

            <div
              class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ‚ö° What's Included:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>uv</strong>: Fast Python package manager (10-100x
                  faster than pip) + version management
                </li>
                <li>
                  <strong>bun</strong>: JavaScript runtime for hybrid Python/JS
                  projects (React, Vue, Svelte frontends)
                </li>
                <li>
                  <strong>Extended libraries</strong>: Development libraries for
                  data science, web scraping, and native extensions
                </li>
                <li>
                  <strong>Modern tools</strong>: ripgrep, fd-find, jq, yq for
                  faster development
                </li>
              </ul>
            </div>

            <div class="space-y-6">
              <!-- Step 1 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >1</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create devcontainer.json
                  </h3>
                </div>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "name": "Advanced Python Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "ms-python.python",
        "ms-python.vscode-pylance",
        "ms-python.debugpy",
        "ms-python.black-formatter",
        "charliermarsh.ruff"
      ],
      "settings": {
        "python.defaultInterpreterPath": "/usr/local/bin/python",
        "python.linting.enabled": true,
        "python.formatting.provider": "black",
        "editor.formatOnSave": true
      }
    }
  },
  "runArgs": [
    "--cap-drop=ALL",
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW",
    "--cap-add=SETUID",
    "--cap-add=SETGID",
    "--cap-add=SYS_ADMIN",
    "--sysctl=net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
  ],
  "forwardPorts": [5000, 8000, 8888],
  "postCreateCommand": "uv pip install -r requirements.txt && /usr/local/bin/init-claude-config.sh && /usr/local/bin/init-python.sh && /usr/local/bin/init-claude-hooks.sh",
  "postStartCommand": "sudo /usr/local/bin/init-firewall.sh",
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume",
    "source=gemini-config-${devcontainerId},target=/home/node/.gemini,type=volume",
    "source=opencode-config-${devcontainerId},target=/home/node/.opencode,type=volume",
    "source=ghub-config-${devcontainerId},target=/home/node/.config/gh,type=volume",
    "source=cargo-${devcontainerId},target=/home/node/.cargo,type=volume",
    "source=bun-${devcontainerId},target=/home/node/.bun,type=volume",
    "source=local-bin-${devcontainerId},target=/home/node/.local,type=volume"
  ]
}</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border border-md-secondary-200 dark:border-md-secondary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üí° What's different:
                  </p>
                  <ul
                    class="text-sm text-purple-800 dark:text-purple-300 space-y-1"
                  >
                    <li>
                      <strong>Port 8888</strong>: Added for Jupyter Lab/Notebook
                    </li>
                    <li>
                      <strong>uv pip install</strong>: Uses uv for 10-100x
                      faster package installation
                    </li>
                    <li>
                      <strong>cargo volume</strong>: Persists uv installation
                      and Python versions
                    </li>
                    <li>
                      <strong>bun volume</strong>: Persists bun installation for
                      hybrid projects
                    </li>
                  </ul>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Customize for Your Tools
                  </p>
                  <p class="text-sm text-purple-800 dark:text-purple-300 mb-2">
                    This advanced setup already includes cargo (for uv/Rust
                    tools) and bun. Add more volumes as needed:
                  </p>
                  <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                    <code class="text-xs text-gray-800 dark:text-gray-200">
                      "source=&lt;tool&gt;-${devcontainerId},target=/home/vscode/.&lt;config-path&gt;,type=volume"
                    </code>
                  </div>
                  <p
                    class="text-sm text-purple-800 dark:text-purple-300 mb-1 font-medium"
                  >
                    Additional tools for advanced Python:
                  </p>
                  <ul
                    class="text-xs text-purple-700 dark:text-purple-400 space-y-1 ml-4"
                  >
                    <li>‚Ä¢ PostgreSQL CLI: <code>~/.psqlrc</code></li>
                    <li>‚Ä¢ Redis CLI: <code>~/.redisclirc</code></li>
                    <li>‚Ä¢ Docker: <code>~/.docker</code></li>
                    <li>‚Ä¢ Kubernetes: <code>~/.kube</code></li>
                  </ul>
                </div>
              </div>

              <!-- Step 2 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >2</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Create Dockerfile (Advanced)
                  </h3>
                </div>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile"># Start from Node.js 22 base (modern approach with Python 3.14 via uv)
FROM mcr.microsoft.com/devcontainers/javascript-node:22-bookworm

# Install extended system dependencies (organized by category)
RUN apt-get update && apt-get install -y \
    # Version control
    git \
    git-lfs \
    # Core utilities
    curl \
    wget \
    ca-certificates \
    # Build tools for native extensions
    build-essential \
    gcc \
    g++ \
    make \
    cmake \
    pkg-config \
    # Development libraries (for data science, web scraping, crypto)
    libffi-dev \
    libssl-dev \
    libz-dev \
    libbz2-dev \
    libreadline-dev \
    libsqlite3-dev \
    libncurses5-dev \
    libncursesw5-dev \
    liblzma-dev \
    # Text processing and data tools
    jq \
    yq \
    sed \
    gawk \
    # Modern search tools (faster alternatives)
    ripgrep \
    fd-find \
    # System utilities
    htop \
    tree \
    procps \
    # Network tools
    net-tools \
    iputils-ping \
    dnsutils \
    # Firewall tools
    iptables \
    ipset \
    aggregate \
    sudo \
    # Text editors
    vim \
    nano \
    # Locales for proper encoding
    locales \
    # Python 3.11 (system Python for node-gyp compatibility)
    python3.11 \
    python3.11-dev \
    python3-pip \
    && rm -rf /var/lib/apt/lists/*

# Set up locale (prevents encoding issues)
RUN sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen && \
    locale-gen
ENV LANG=en_US.UTF-8 \
    LANGUAGE=en_US:en \
    LC_ALL=en_US.UTF-8

# NOTE: Using 'node' user from base image (no need to create vscode user)

# Install Claude Code CLI
RUN curl -fsSL https://claude.ai/install.sh | bash

# Create directory for Claude Code defaults
RUN mkdir -p /usr/local/share/claude-defaults

# Copy initialization scripts and templates
COPY init-firewall.sh /usr/local/bin/
COPY init-claude-config.sh /usr/local/bin/
COPY init-python.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json

# Set permissions and configure sudoers for scripts
RUN chmod +x /usr/local/bin/init-firewall.sh && \
    chmod +x /usr/local/bin/init-claude-config.sh && \
    chmod +x /usr/local/bin/init-python.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-python.sh" > /etc/sudoers.d/node-python && \
    chmod 0440 /etc/sudoers.d/node-firewall && \
    chmod 0440 /etc/sudoers.d/node-claude-config && \
    chmod 0440 /etc/sudoers.d/node-python

# Set working directory
WORKDIR /workspaces

# Install Python dev tools globally
RUN pip install --no-cache-dir \
    black \
    pylint \
    pytest \
    ipython \
    jupyter \
    jupyterlab

# Switch to non-root user
USER node

# Install uv (fast Python package manager + version management)
# uv installer places binary at /home/node/.local/bin/uv
RUN curl -LsSf https://astral.sh/uv/install.sh | sh && \
    echo 'export PATH="$HOME/.local/bin:$PATH"' >> /home/node/.bashrc
ENV PATH="/home/node/.local/bin:$PATH"

# Install bun (for Python projects with JS/TS frontends)
RUN curl -fsSL https://bun.sh/install | bash && \
    echo 'export BUN_INSTALL="$HOME/.bun"' >> /home/node/.bashrc && \
    echo 'export PATH="$BUN_INSTALL/bin:$PATH"' >> /home/node/.bashrc
ENV BUN_INSTALL="/home/node/.bun"
ENV PATH="$BUN_INSTALL/bin:$PATH"

# Set Python to unbuffered mode (better for logs)
ENV PYTHONUNBUFFERED=1

# NOTE: Python 3.14 is installed via init-python.sh in postCreateCommand
# This ensures installation persists in /home/node/.local volume</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border border-md-secondary-200 dark:border-md-secondary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîç Key additions:
                  </p>
                  <ul
                    class="text-sm text-purple-800 dark:text-purple-300 space-y-1"
                  >
                    <li>
                      <strong>Extended libraries</strong>: Support SQLite,
                      compression (lzma), SSL, foreign function interface
                    </li>
                    <li>
                      <strong>Modern tools</strong>: ripgrep (rg) and fd-find
                      for faster code/file search than grep/find
                    </li>
                    <li>
                      <strong>uv</strong>: Installed as non-root user, 10-100x
                      faster than pip
                    </li>
                    <li>
                      <strong>bun</strong>: For hybrid Python/JavaScript
                      projects (Django + React, Flask + Vue, etc.)
                    </li>
                    <li>
                      <strong>Jupyter/JupyterLab</strong>: For data science and
                      interactive development
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Step 3 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >3</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Install Dependencies
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  You can use either traditional pip OR modern uv. Both work
                  with the same requirements.txt:
                </p>
                <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">
                  <strong>Using traditional pip:</strong>
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">pip install -r requirements.txt
pip list</code></pre>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-4 mb-2">
                  <strong>Using uv (10-100x faster):</strong>
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">uv pip install -r requirements.txt
uv pip list</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    ‚ö° Why uv is faster:
                  </p>
                  <ul
                    class="text-sm text-md-primary-800 dark:text-md-primary-300 space-y-1"
                  >
                    <li>Written in Rust (compiled language vs Python)</li>
                    <li>Parallel package downloads and installations</li>
                    <li>Better dependency resolution algorithm</li>
                    <li>
                      Drop-in replacement for pip - same commands, faster
                      execution
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Step 4 -->
              <div
                class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <div class="flex items-center gap-3 mb-4">
                  <span
                    class="flex items-center justify-center w-8 h-8 rounded-full bg-secondary text-white font-bold"
                    aria-hidden="true"
                    >4</span
                  >
                  <h3
                    class="text-xl font-semibold text-gray-900 dark:text-white"
                  >
                    Verify Installation
                  </h3>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Test all installed tools:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Verify Python
python --version  # Should show Python 3.14.x

# Verify pip
pip --version

# Verify uv
uv --version

# Verify bun (for hybrid projects)
bun --version

# Verify modern tools
rg --version    # ripgrep (fast search)
fdfind --version # fd (fast find)
jq --version    # JSON processor

# Test your Flask/FastAPI app
python app.py
# or
uvicorn main:app --reload --host 0.0.0.0 --port 8000</code></pre>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                  üéâ Your advanced Python environment is ready for production
                  development!
                </p>
              </div>
            </div>

            <!-- Python Version Management Subsection -->
            <div
              class="mt-8 border-t border-gray-200 dark:border-gray-700 pt-8"
            >
              <h3 class="text-2xl font-bold mb-4 text-gray-900 dark:text-white">
                üîÑ Changing Python Versions
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-6">
                Need to switch to Python 3.13, 3.14, or 3.15? Here are two
                methods:
              </p>

              <div class="space-y-6">
                <!-- Method 1 -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <h4
                    class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                  >
                    Method 1: Change Docker Base Image (Simplest)
                  </h4>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    Edit the first line of your Dockerfile to use a different
                    Python version:
                  </p>
                  <div class="code-block-wrapper" data-language="dockerfile">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                    ><code class="language-dockerfile"># Python 3.14 (current default - managed via uv + init-python.sh)
FROM mcr.microsoft.com/devcontainers/javascript-node:22-bookworm
# NOTE: Python 3.14 installed in postCreateCommand via init-python.sh
# System Python 3.11 included for node-gyp compatibility

# Python 3.13 (alternative via Docker base image)
FROM python:3.13-slim

# Python 3.11 only (for legacy compatibility)
FROM python:3.11-slim</code></pre>
                  </div>
                  <p class="text-sm text-gray-600 dark:text-gray-400 mt-3">
                    After changing, rebuild the container:
                    <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                      >Cmd/Ctrl+Shift+P</code
                    >
                    ‚Üí "Dev Containers: Rebuild Container"
                  </p>
                </div>

                <!-- Method 2 -->
                <div
                  class="border border-gray-200 dark:border-gray-700 rounded-lg p-6"
                >
                  <h4
                    class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                  >
                    Method 2: Use uv for Version Management (Most Flexible)
                  </h4>
                  <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                    With uv, you can install and switch between multiple Python
                    versions WITHOUT rebuilding the container:
                  </p>
                  <div class="code-block-wrapper" data-language="bash">
                    <button
                      class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                      aria-label="Copy code"
                    >
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                    ><code class="language-bash"># List available Python versions
uv python list

# Install Python 3.13
uv python install 3.13

# Install Python 3.14
uv python install 3.14

# Install Python 3.15 (if available)
uv python install 3.15

# Create virtual environment with specific Python version
uv venv --python 3.13

# Install packages with specific Python version
uv pip install --python 3.13 -r requirements.txt

# Pin Python version for the project
uv python pin 3.13</code></pre>
                  </div>
                  <div
                    class="mt-4 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-4"
                  >
                    <p
                      class="text-sm text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                    >
                      ‚úÖ Benefits of uv for version management:
                    </p>
                    <ul
                      class="text-sm text-md-tertiary-800 dark:text-md-tertiary-300 space-y-1"
                    >
                      <li>
                        Switch Python versions instantly (no container rebuild)
                      </li>
                      <li>Test code across multiple Python versions</li>
                      <li>Faster than pyenv or manual Python compilation</li>
                      <li>Integrated with uv's package management</li>
                    </ul>
                  </div>
                </div>
              </div>

              <div
                class="mt-6 bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 rounded-r-lg"
              >
                <p
                  class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
                >
                  üìù Version Selection Guide:
                </p>
                <ul
                  class="list-disc list-inside space-y-1 text-md-error-800 dark:text-md-error-300 text-sm"
                >
                  <li>
                    <strong>Python 3.14</strong>: Current default in this
                    devcontainer (via uv), latest features, managed by
                    init-python.sh script
                  </li>
                  <li>
                    <strong>Python 3.11</strong>: System Python (included for
                    node-gyp compatibility), LTS version, excellent library
                    compatibility
                  </li>
                  <li>
                    <strong>Python 3.13</strong>: Alternative stable release,
                    good balance of features and compatibility
                  </li>
                  <li>
                    <strong>Python 3.15+</strong>: Experimental/preview, testing
                    only, not for production
                  </li>
                </ul>
              </div>

              <!-- init-python.sh Documentation -->
              <div
                class="mt-8 border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <h4
                  class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                >
                  üêç Python 3.14 Setup Script (init-python.sh)
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This project uses a dedicated script to install Python 3.14
                  via uv during postCreateCommand. The script ensures
                  reproducible Python setup and persists installation in the
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >/home/node/.local</code
                  >
                  volume:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">#!/bin/bash
set -e

echo "=== Python 3.14 Setup ==="

# Install Python 3.14 via uv
echo "Installing Python 3.14..."
/home/node/.local/bin/uv python install 3.14

# Pin Python 3.14 for the project
echo "Pinning Python 3.14..."
cd /workspaces/claude-devcontainer
/home/node/.local/bin/uv python pin 3.14

# Get Python 3.14 path
PYTHON314_PATH=$(/home/node/.local/bin/uv python find 3.14)
echo "Python 3.14 installed at: $PYTHON314_PATH"

# Create system symlink and update alternatives (requires sudo)
sudo ln -sf "$PYTHON314_PATH" /usr/local/bin/python3.14
sudo update-alternatives --install /usr/bin/python python /usr/local/bin/python3.14 100
sudo update-alternatives --install /usr/bin/python3 python3 /usr/local/bin/python3.14 100

# Verify installation
echo "Verifying Python installation..."
python --version
python3 --version
echo ""
echo "Available Python versions:"
/home/node/.local/bin/uv python list

echo "‚úÖ Python 3.14 configured as default"</code></pre>
                </div>
                <div
                  class="mt-4 bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-4"
                >
                  <p
                    class="text-sm text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    ‚úÖ Why use init-python.sh?
                  </p>
                  <ul
                    class="text-sm text-md-tertiary-800 dark:text-md-tertiary-300 space-y-1"
                  >
                    <li>
                      <strong>Runs during postCreateCommand:</strong> Executes
                      after volume mounts, ensuring proper persistence
                    </li>
                    <li>
                      <strong>Volume persistence:</strong> Python 3.14
                      installation saved in
                      <code
                        class="bg-md-tertiary-100 dark:bg-md-tertiary-800 px-1 rounded"
                        >/home/node/.local</code
                      >
                      volume
                    </li>
                    <li>
                      <strong>System Python 3.11 retained:</strong> Keeps Python
                      3.11 for node-gyp compatibility
                    </li>
                    <li>
                      <strong>Reproducible setup:</strong> Same Python version
                      across container rebuilds
                    </li>
                    <li>
                      <strong>update-alternatives integration:</strong> Sets
                      Python 3.14 as default
                      <code
                        class="bg-md-tertiary-100 dark:bg-md-tertiary-800 px-1 rounded"
                        >python</code
                      >
                      command
                    </li>
                  </ul>
                </div>
              </div>

              <!-- .python-version Documentation -->
              <div
                class="mt-6 border border-gray-200 dark:border-gray-700 rounded-lg p-6"
              >
                <h4
                  class="text-lg font-semibold text-gray-900 dark:text-white mb-3"
                >
                  üìå Project Python Version Pinning (.python-version)
                </h4>
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  This project uses a
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >.python-version</code
                  >
                  file to pin the Python version for the project:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code>3.14</code></pre>
                </div>
                <p class="text-sm text-gray-600 dark:text-gray-400 mt-3">
                  This file tells uv which Python version to use for the
                  project. To switch versions:
                </p>
                <div class="code-block-wrapper mt-3">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Change to Python 3.13
echo "3.13" > .python-version
uv python pin 3.13

# Install the new version if not already installed
uv python install 3.13</code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- Next.js Example -->
          <section
            id="nextjs-example"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ‚ö° Next.js Project Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Let's create a dev container for a Next.js application with all
              the modern tooling:
            </p>

            <!-- Step 1 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >1</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Create .devcontainer directory
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  In your Next.js project root, create the directory and files:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">mkdir -p .devcontainer
cd .devcontainer
touch devcontainer.json Dockerfile</code></pre>
                </div>
              </div>
            </div>

            <!-- Step 2 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >2</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Create devcontainer.json
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Add this configuration optimized for Next.js development:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "name": "Next.js Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "bradlc.vscode-tailwindcss"
      ],
      "settings": {
        "editor.formatOnSave": true,
        "editor.defaultFormatter": "esbenp.prettier-vscode",
        "typescript.preferences.importModuleSpecifier": "relative"
      }
    }
  },
  "runArgs": [
    "--cap-drop=ALL",
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW",
    "--cap-add=SETUID",
    "--cap-add=SETGID",
    "--cap-add=SYS_ADMIN",
    "--sysctl=net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
  ],
  "forwardPorts": [3000],
  "postCreateCommand": "npm install -g @anthropic-ai/claude-code@latest && npm install -g @openai/codex && npm install -g @google/gemini-cli && npm install && /usr/local/bin/init-claude-hooks.sh",
  "postStartCommand": "sudo /usr/local/bin/init-claude-config.sh && sudo /usr/local/bin/init-firewall.sh",
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume",
    "source=gemini-config-${devcontainerId},target=/home/node/.gemini,type=volume",
    "source=opencode-config-${devcontainerId},target=/home/node/.opencode,type=volume",
    "source=ghub-config-${devcontainerId},target=/home/node/.config/gh,type=volume",
    "source=npm-global-${devcontainerId},target=/home/node/.npm-global,type=volume",
    "source=cargo-${devcontainerId},target=/home/node/.cargo,type=volume",
    "source=bun-${devcontainerId},target=/home/node/.bun,type=volume",
    "source=local-bin-${devcontainerId},target=/home/node/.local,type=volume",
    "source=aws-config-${devcontainerId},target=/home/node/.aws,type=volume",
    "source=wrangler-config-${devcontainerId},target=/home/node/.wrangler,type=volume",
    "source=vercel-config-${devcontainerId},target=/home/node/.vercel,type=volume"
  ]
}</code></pre>
                </div>
                <div
                  class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üí° What's happening here:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-purple-800 dark:text-purple-300 text-sm"
                  >
                    <li>
                      <strong>Port 3000</strong>: Next.js default development
                      server port
                    </li>
                    <li>
                      <strong>npm-global volume</strong>: Persists globally
                      installed CLI tools (npm install -g) across rebuilds
                    </li>
                    <li>
                      <strong>Tailwind CSS extension</strong>: IntelliSense for
                      Tailwind classes in your JSX/TSX files
                    </li>
                    <li>
                      <strong>TypeScript settings</strong>: Optimized for
                      Next.js import conventions
                    </li>
                  </ul>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Customize for Your Stack
                  </p>
                  <p class="text-sm text-purple-800 dark:text-purple-300 mb-2">
                    Next.js projects often need additional tool persistence:
                  </p>
                  <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                    <code class="text-xs text-gray-800 dark:text-gray-200">
                      "source=&lt;tool&gt;-${devcontainerId},target=/home/node/.&lt;config-path&gt;,type=volume"
                    </code>
                  </div>
                  <p
                    class="text-sm text-purple-800 dark:text-purple-300 mb-1 font-medium"
                  >
                    Popular Next.js tools:
                  </p>
                  <ul
                    class="text-xs text-purple-700 dark:text-purple-400 space-y-1 ml-4"
                  >
                    <li>
                      ‚Ä¢ Playwright browsers: <code>~/.cache/ms-playwright</code>
                    </li>
                    <li>‚Ä¢ Turborepo cache: <code>~/.turbo</code></li>
                    <li>‚Ä¢ Vercel CLI: <code>~/.vercel</code></li>
                    <li>‚Ä¢ Docker CLI: <code>~/.docker</code></li>
                  </ul>
                  <p class="text-xs text-purple-700 dark:text-purple-400 mt-2">
                    Add volumes for your deployment and testing tools
                  </p>
                </div>
              </div>
            </div>

            <!-- Step 3 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >3</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Create Dockerfile
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Use Node.js 22 LTS for optimal Next.js performance:
                </p>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile">FROM node:22

# npm CLI packages (Claude Code, Codex, Gemini) installed via postCreateCommand
# This ensures packages install AFTER npm-global volume mounts, preventing version conflicts
# See devcontainer.json postCreateCommand for installation details

# Install common development tools and firewall dependencies
RUN apt-get update && apt-get install -y \
    git \
    curl \
    vim \
    iptables \
    ipset \
    dnsutils \
    aggregate \
    jq \
    sudo \
    && rm -rf /var/lib/apt/lists/*

# Create directory for Claude Code defaults
RUN mkdir -p /usr/local/share/claude-defaults

# Copy initialization scripts and templates
COPY init-firewall.sh /usr/local/bin/
COPY init-claude-config.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json

# Set permissions and configure sudoers for both scripts
RUN chmod +x /usr/local/bin/init-firewall.sh && \
    chmod +x /usr/local/bin/init-claude-config.sh && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
    echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
    chmod 0440 /etc/sudoers.d/node-firewall && \
    chmod 0440 /etc/sudoers.d/node-claude-config

# Set working directory
WORKDIR /workspace

# Keep container running
CMD ["sleep", "infinity"]</code></pre>
                </div>
                <div
                  class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
                  >
                    ‚ö†Ô∏è Note:
                  </p>
                  <p class="text-md-error-800 dark:text-md-error-300 text-sm">
                    Next.js 13+ requires Node.js 16.14 or later. We're using
                    Node 22 LTS for the best performance and latest features.
                  </p>
                </div>
              </div>
            </div>

            <!-- Step 4 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >4</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Open in VS Code
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Same as before - VS Code will detect the dev container
                  configuration:
                </p>
                <ol
                  class="list-decimal list-inside space-y-2 text-sm text-gray-700 dark:text-gray-300"
                >
                  <li>Open the project folder in VS Code</li>
                  <li>
                    Click "Reopen in Container" when prompted (or use Command
                    Palette ‚Üí "Dev Containers: Reopen in Container")
                  </li>
                  <li>
                    Wait for the container to build (first time takes a few
                    minutes)
                  </li>
                </ol>
              </div>
            </div>

            <!-- Step 5 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >5</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Test your setup
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Once connected, verify everything is working:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Check Node.js version
node --version  # Should show v20.x.x

# Check npm version
npm --version

# Check Claude Code is installed
claude --version

# Start Next.js development server
npm run dev</code></pre>
                </div>
                <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                  üéâ Your Next.js app should now be running at
                  <code class="bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded"
                    >http://localhost:3000</code
                  >!
                </p>
                <div
                  class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
                  >
                    ‚úÖ Pro Tips:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
                  >
                    <li>
                      The npm cache volume persists between container rebuilds,
                      making installs much faster
                    </li>
                    <li>
                      Hot reload works perfectly - just save your files and see
                      changes instantly
                    </li>
                    <li>
                      Use Claude Code to help scaffold new pages, components,
                      and API routes
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- Multiple AI Assistants Example -->
          <section
            id="multi-ai-example"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ü§ñ Multiple AI Assistants Setup
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Want to use Claude Code, OpenAI Codex, Google Gemini, AND OpenCode
              in the same dev container? Here's how to set up all four AI
              assistants:
            </p>

            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üéØ Why Multiple AI Assistants?
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
              >
                <li>
                  <strong>Claude Code</strong>: Excellent for complex reasoning,
                  refactoring, and architectural decisions
                </li>
                <li>
                  <strong>Codex</strong>: Great for code completion and quick
                  code generation
                </li>
                <li>
                  <strong>Gemini</strong>: Strong at multimodal tasks and Google
                  ecosystem integration
                </li>
                <li>
                  <strong>OpenCode</strong>: Open-source, terminal-native agent
                  with multi-model support and privacy-first design
                </li>
                <li>Use the right tool for each specific task!</li>
              </ul>
            </div>

            <!-- Step 1 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >1</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Create devcontainer.json
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Configure all three AI extensions with separate volume mounts:
                </p>
                <div class="code-block-wrapper" data-language="json">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-json">{
  "name": "Multi-AI Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "customizations": {
    "vscode": {
      "extensions": [
        "anthropic.claude-code",
        "openai.codex-vscode",
        "sst-dev.opencode",
        "google.gemini-cli-vscode-ide-companion",
        "google.geminicodeassist",
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "kilocode.kilo-code",
        "tamasfe.even-better-toml",
        "ms-toolsai.jupyter-keymap",
        "ms-vscode.sublime-keybindings",
        "grapecity.gc-excelviewer",
        "imgildev.vscode-json-flow",
        "redhat.vscode-yaml"
      ],
      "settings": {
        "editor.formatOnSave": true
      }
    }
  },
  "runArgs": [
    "--cap-drop=ALL",
    "--cap-add=NET_ADMIN",
    "--cap-add=NET_RAW",
    "--cap-add=SETUID",
    "--cap-add=SETGID",
    "--cap-add=SYS_ADMIN",
    "--sysctl=net.ipv6.conf.all.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.default.disable_ipv6=1",
    "--sysctl=net.ipv6.conf.lo.disable_ipv6=1"
  ],
  "forwardPorts": [3000, 5000, 8000],
  "postCreateCommand": "npm install -g @anthropic-ai/claude-code@latest && npm install -g @openai/codex && npm install -g @google/gemini-cli && npm install -g opencode-ai@latest && npm install -g wrangler@latest && npm install -g vercel@latest && (npm install || pip install -r requirements.txt || echo 'No dependencies to install') && /usr/local/bin/init-claude-config.sh && /usr/local/bin/init-codex-config.sh && /usr/local/bin/init-opencode-config.sh && /usr/local/bin/init-python.sh && /usr/local/bin/init-claude-hooks.sh",
  "postStartCommand": "sudo /usr/local/bin/init-firewall.sh",
  "remoteUser": "node",
  "mounts": [
    "source=claude-code-bashhistory-${devcontainerId},target=/commandhistory,type=volume",
    "source=claude-config-${devcontainerId},target=/home/node/.claude,type=volume",
    "source=codex-config-${devcontainerId},target=/home/node/.codex,type=volume",
    "source=gemini-config-${devcontainerId},target=/home/node/.gemini,type=volume",
    "source=opencode-config-${devcontainerId},target=/home/node/.opencode,type=volume",
    "source=ghub-config-${devcontainerId},target=/home/node/.config/gh,type=volume",
    "source=npm-global-${devcontainerId},target=/home/node/.npm-global,type=volume",
    "source=cargo-${devcontainerId},target=/home/node/.cargo,type=volume",
    "source=bun-${devcontainerId},target=/home/node/.bun,type=volume",
    "source=local-bin-${devcontainerId},target=/home/node/.local,type=volume",
    "source=aws-config-${devcontainerId},target=/home/node/.aws,type=volume",
    "source=wrangler-config-${devcontainerId},target=/home/node/.wrangler,type=volume",
    "source=vercel-config-${devcontainerId},target=/home/node/.vercel,type=volume"
  ]
}</code></pre>
                </div>
                <div
                  class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üí° What's happening here:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-purple-800 dark:text-purple-300 text-sm"
                  >
                    <li>
                      <strong>Complete volume setup</strong>: All 13 volumes for
                      full production capabilities - command history, AI configs
                      (.claude, .codex, .gemini, .opencode), GitHub CLI, npm
                      global, local bin, cargo (Rust/uv), bun, AWS, wrangler,
                      vercel
                    </li>
                    <li>
                      <strong>Multiple extensions</strong>: Install all AI
                      assistant VS Code extensions at once
                    </li>
                    <li>
                      <strong>Multiple ports</strong>: Forward common ports for
                      different project types
                    </li>
                    <li>
                      <strong>Flexible postCreateCommand</strong>: Works with
                      npm, pip, or no dependencies
                    </li>
                  </ul>
                </div>
                <div
                  class="mt-4 bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 rounded-r-lg"
                >
                  <p
                    class="text-purple-900 dark:text-purple-200 font-medium mb-2"
                  >
                    üîß Customize for Your Infrastructure
                  </p>
                  <p class="text-sm text-purple-800 dark:text-purple-300 mb-2">
                    This is the FULL production setup. Add infrastructure and
                    deployment tools:
                  </p>
                  <div class="bg-gray-50 dark:bg-gray-900 rounded p-3 mb-2">
                    <code class="text-xs text-gray-800 dark:text-gray-200">
                      "source=&lt;tool&gt;-${devcontainerId},target=/home/node/.&lt;config-path&gt;,type=volume"
                    </code>
                  </div>
                  <p
                    class="text-sm text-purple-800 dark:text-purple-300 mb-1 font-medium"
                  >
                    Common infrastructure tools:
                  </p>
                  <ul
                    class="text-xs text-purple-700 dark:text-purple-400 space-y-1 ml-4"
                  >
                    <li>‚Ä¢ Docker: <code>~/.docker</code></li>
                    <li>‚Ä¢ Kubernetes: <code>~/.kube</code></li>
                    <li>‚Ä¢ Terraform: <code>~/.terraform.d</code></li>
                    <li>‚Ä¢ AWS CLI: <code>~/.aws</code></li>
                    <li>‚Ä¢ Google Cloud: <code>~/.config/gcloud</code></li>
                    <li>‚Ä¢ Azure CLI: <code>~/.azure</code></li>
                  </ul>
                  <p class="text-xs text-purple-700 dark:text-purple-400 mt-2">
                    <strong>Pro tip:</strong> Use volumes for ANY tool config
                    you want persistent between rebuilds
                  </p>
                </div>
              </div>
            </div>

            <!-- Step 2 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >2</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Create Dockerfile
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Install all three CLI tools globally:
                </p>
                <div class="code-block-wrapper" data-language="dockerfile">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-dockerfile">FROM node:22

ARG TZ
ENV TZ="$TZ"

ARG CLAUDE_CODE_VERSION=latest

# Upgrade npm to latest version (ensures security patches and latest features)
RUN npm install -g npm@latest

# Install development tools, compilers, and utilities with BuildKit cache mounts
# BuildKit cache mounts provide 5-10x faster rebuilds
RUN --mount=type=cache,target=/var/cache/apt,sharing=locked \
  --mount=type=cache,target=/var/lib/apt/lists,sharing=locked \
  apt-get update && apt-get install -y --no-install-recommends \
  # Core utilities
  less curl wget ca-certificates gnupg2 software-properties-common \
  apt-transport-https lsb-release \
  # Version control
  git git-lfs gh \
  # Shell and terminal tools
  zsh fzf man-db \
  # Process and system tools
  procps htop tree sudo \
  # Network tools
  dnsutils net-tools iputils-ping telnet netcat-openbsd \
  iptables ipset iproute2 aggregate \
  # Archive and compression
  unzip zip bzip2 xz-utils \
  # Text processing and data
  jq yq sed gawk \
  # Fast search tools (modern replacements)
  ripgrep fd-find \
  # Build essentials (for native npm modules)
  build-essential gcc g++ make cmake pkg-config \
  # Python (for node-gyp and AI CLIs)
  python3 python3-pip python3-venv python3-dev \
  # Text editors
  nano vim tmux \
  # OpenSSL and crypto
  openssl libssl-dev \
  # Additional development libraries
  libz-dev libffi-dev libbz2-dev libreadline-dev libsqlite3-dev \
  libncurses5-dev libncursesw5-dev liblzma-dev \
  # Locales for proper encoding
  locales \
  # Browser automation (Chromium for Chrome DevTools MCP)
  chromium fonts-liberation libatk-bridge2.0-0 libatk1.0-0 \
  libatspi2.0-0 libcups2 libdbus-1-3 libdrm2 libgbm1 libgtk-3-0 \
  libnspr4 libnss3 libxcomposite1 libxdamage1 libxfixes3 \
  libxkbcommon0 libxrandr2 xdg-utils \
  && apt-get clean && rm -rf /var/lib/apt/lists/*

# Set up locale (prevents encoding issues with AI CLIs)
RUN sed -i -e 's/# en_US.UTF-8 UTF-8/en_US.UTF-8 UTF-8/' /etc/locale.gen && \
  locale-gen
ENV LANG=en_US.UTF-8 \
  LANGUAGE=en_US:en \
  LC_ALL=en_US.UTF-8

# Ensure default node user has access to /usr/local/share
RUN chown -R node:node /usr/local/share

ARG USERNAME=node

# Persist bash history and configure PATH for npm global packages
RUN SNIPPET="export PROMPT_COMMAND='history -a' && export HISTFILE=/commandhistory/.bash_history" \
  && mkdir /commandhistory \
  && touch /commandhistory/.bash_history \
  && chown -R $USERNAME /commandhistory \
  && echo 'export PATH=$PATH:/home/node/.npm-global/bin:/home/node/.local/bin' >> /home/node/.bashrc \
  && chown node:node /home/node/.bashrc

# Set `DEVCONTAINER` environment variable to help with orientation
ENV DEVCONTAINER=true

# Create config directories and set permissions
RUN mkdir -p /home/node/.config/gh /home/node/.claude /home/node/.codex /home/node/.gemini /home/node/.npm-global/lib /home/node/.aws /home/node/.wrangler /home/node/.vercel /home/node/.local/bin && \
  chown -R node:node /home/node/.config/gh /home/node/.claude /home/node/.codex /home/node/.gemini /home/node/.npm-global /home/node/.aws /home/node/.wrangler /home/node/.vercel /home/node/.local

# Default working directory
WORKDIR /workspaces

# Install git-delta for better diffs
ARG GIT_DELTA_VERSION=0.18.2
RUN ARCH=$(dpkg --print-architecture) && \
  wget "https://github.com/dandavison/delta/releases/download/${GIT_DELTA_VERSION}/git-delta_${GIT_DELTA_VERSION}_${ARCH}.deb" && \
  dpkg -i "git-delta_${GIT_DELTA_VERSION}_${ARCH}.deb" && \
  rm "git-delta_${GIT_DELTA_VERSION}_${ARCH}.deb"

# Set up non-root user
USER node

# Install global packages
ENV NPM_CONFIG_PREFIX=/home/node/.npm-global
ENV PATH=$PATH:/home/node/.npm-global/bin

# Set the default shell to zsh rather than sh
ENV SHELL=/bin/zsh

# Set the default editor and visual
ENV EDITOR=nano
ENV VISUAL=nano

# Install zsh with powerline10k theme
ARG ZSH_IN_DOCKER_VERSION=1.2.0
RUN sh -c "$(wget -O- https://github.com/deluan/zsh-in-docker/releases/download/v${ZSH_IN_DOCKER_VERSION}/zsh-in-docker.sh)" -- \
  -p git \
  -p fzf \
  -a "source /usr/share/doc/fzf/examples/key-bindings.zsh" \
  -a "source /usr/share/doc/fzf/examples/completion.zsh" \
  -a "export PROMPT_COMMAND='history -a' && export HISTFILE=/commandhistory/.bash_history" \
  -a "export PATH=\$PATH:/home/node/.npm-global/bin:/home/node/.local/bin" \
  -a "alias fd=fdfind" \
  -a "alias rg='rg --smart-case'" \
  -x

# npm CLI packages (Claude Code, OpenCode, Codex, Gemini, Wrangler, Vercel) installed via postCreateCommand
# This ensures packages install AFTER npm-global volume mounts, preventing version conflicts
# See devcontainer.json postCreateCommand for installation details

# Install AWS CLI v2 to volume-persisted location
RUN curl "https://awscli.amazonaws.com/awscli-exe-linux-$(uname -m).zip" -o "awscliv2.zip" && \
    unzip awscliv2.zip && \
    ./aws/install --install-dir /home/node/.local/aws-cli --bin-dir /home/node/.local/bin && \
    rm -rf awscliv2.zip aws

# Add .local/bin to PATH for AWS CLI
ENV PATH="/home/node/.local/bin:$PATH"

# Install uv (fast Python package manager - 10-100x faster than pip)
# uv installer places binary at /home/node/.local/bin/uv
RUN curl -LsSf https://astral.sh/uv/install.sh | sh && \
    echo 'export PATH="$HOME/.local/bin:$PATH"' >> /home/node/.bashrc && \
    echo 'export PATH="$HOME/.local/bin:$PATH"' >> /home/node/.zshrc
# Note: .local/bin already in PATH via ENV declaration above

# Install bun (fast JavaScript runtime for hybrid Python/JS projects)
RUN curl -fsSL https://bun.sh/install | bash && \
    echo 'export BUN_INSTALL="$HOME/.bun"' >> /home/node/.bashrc && \
    echo 'export PATH="$BUN_INSTALL/bin:$PATH"' >> /home/node/.bashrc && \
    echo 'export BUN_INSTALL="$HOME/.bun"' >> /home/node/.zshrc && \
    echo 'export PATH="$BUN_INSTALL/bin:$PATH"' >> /home/node/.zshrc
ENV BUN_INSTALL="/home/node/.bun"
ENV PATH="$BUN_INSTALL/bin:$PATH"

# Configure git to ignore Claude's local settings (Anthropic best practice)
RUN git config --global core.excludesfile ~/.gitignore_global && \
  echo ".claude/settings.local.json" > /home/node/.gitignore_global && \
  chown node:node /home/node/.gitignore_global

# Switch to root for final setup (scripts, sudoers, templates)
USER root

# Create directories for Claude Code and Codex defaults
RUN mkdir -p /usr/local/share/claude-defaults /usr/local/share/codex-defaults

# Copy all scripts and templates
COPY init-firewall.sh /usr/local/bin/
COPY init-claude-config.sh /usr/local/bin/
COPY init-codex-config.sh /usr/local/bin/
COPY --chown=node:node settings.json.template /usr/local/share/claude-defaults/settings.json
COPY --chown=node:node mcp.json.template /usr/local/share/claude-defaults/mcp.json
COPY --chown=node:node config.toml.template /usr/local/share/codex-defaults/config.toml

# Set permissions and configure sudoers for all init scripts
RUN chmod +x /usr/local/bin/init-firewall.sh && \
  chmod +x /usr/local/bin/init-claude-config.sh && \
  chmod +x /usr/local/bin/init-codex-config.sh && \
  chmod +x /usr/local/bin/init-opencode-config.sh && \
  echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-firewall.sh" > /etc/sudoers.d/node-firewall && \
  echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-claude-config.sh" > /etc/sudoers.d/node-claude-config && \
  echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-codex-config.sh" > /etc/sudoers.d/node-codex-config && \
  echo "node ALL=(root) NOPASSWD: /usr/local/bin/init-opencode-config.sh" > /etc/sudoers.d/node-opencode-config && \
  chmod 0440 /etc/sudoers.d/node-firewall && \
  chmod 0440 /etc/sudoers.d/node-claude-config && \
  chmod 0440 /etc/sudoers.d/node-codex-config && \
  chmod 0440 /etc/sudoers.d/node-opencode-config

# Switch back to node user for runtime
USER node</code></pre>
                </div>
                <div
                  class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
                  >
                    ‚ö†Ô∏è Important Notes:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-md-error-800 dark:text-md-error-300 text-sm"
                  >
                    <li>
                      You'll need valid API keys for each service to
                      authenticate. For Claude Code and Codex CLI, you can also
                      use your paid Claude AI Pro/Max or ChatGPT Plus/Pro
                      accounts to authenticate
                    </li>
                    <li>Each AI assistant authenticates independently</li>
                    <li>
                      Build time will be longer with all three CLIs installed
                    </li>
                    <li>
                      Consider your API usage costs across multiple services
                    </li>
                  </ul>
                </div>
              </div>
            </div>

            <!-- Step 3 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >3</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Authentication Setup
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  After the container builds, authenticate each AI service:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Authenticate Claude Code
# Claude /login slash command
/login

# Authenticate Codex
codex auth login

# Authenticate Gemini (3 options)

# Option 1: .env file (recommended for devcontainers)
cp .env.example .env
# Edit .env and add: GEMINI_API_KEY=your_key_here

# Option 2: Environment variable
export GEMINI_API_KEY=YOUR_GOOGLE_API_KEY

# Option 3: Settings file
mkdir -p ~/.gemini
echo '{"apiKey": "YOUR_GOOGLE_API_KEY"}' > ~/.gemini/settings.json</code></pre>
                </div>
                <div
                  class="bg-md-primary-50 dark:bg-md-primary-900/20 border-l-4 border-md-primary-500 p-4 mt-4 rounded-r-lg"
                >
                  <p
                    class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                  >
                    üîë Getting API Keys:
                  </p>
                  <ul
                    class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
                  >
                    <li>
                      <strong>Claude/Anthropic</strong>: Visit
                      <a
                        href="https://console.anthropic.com/"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="underline hover:text-md-primary-600"
                        >console.anthropic.com</a
                      >
                    </li>
                    <li>
                      <strong>OpenAI Codex</strong>: Visit
                      <a
                        href="https://platform.openai.com/api-keys"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="underline hover:text-md-primary-600"
                        >platform.openai.com/api-keys</a
                      >
                    </li>
                    <li>
                      <strong>Google Gemini</strong>: Visit
                      <a
                        href="https://makersuite.google.com/app/apikey"
                        target="_blank"
                        rel="noopener noreferrer"
                        class="underline hover:text-md-primary-600"
                        >makersuite.google.com/app/apikey</a
                      >
                    </li>
                  </ul>
                  <p
                    class="text-md-primary-800 dark:text-md-primary-300 text-sm mt-4"
                  >
                    ‚ö†Ô∏è <strong>Security</strong>: .env is git-ignored. Never
                    commit API keys to version control.
                  </p>
                </div>
              </div>
            </div>

            <!-- Step 4 -->
            <div class="mb-8">
              <div class="flex items-center gap-3 mb-4">
                <span
                  class="flex items-center justify-center w-10 h-10 bg-primary text-white rounded-full font-bold"
                  >4</span
                >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  Verify Installation
                </h3>
              </div>
              <div class="pl-13">
                <p class="text-sm text-gray-700 dark:text-gray-300 mb-3">
                  Test that all three AI assistants are properly installed and
                  configured:
                </p>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Check Claude Code
claude --version

# Check Codex
codex --version

# Check Gemini
gemini --version

# Check Wrangler
wrangler --version

# Check gh
gh --version

# Check AWS CLI
aws --version

# Check Vercel CLIs
vercel --version
</code></pre>
                </div>

                <!-- Screenshot showing version check output -->
                <div class="mt-4 mb-4">
                  <img
                    src="claude-devcontainer-demo-1-800px.png"
                    alt="Terminal screenshot showing successful version checks for Claude Code, OpenCode, Codex, Gemini, Wrangler, gh CLI, AWS CLI, and Vercel CLIs"
                    class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
                  />
                  <p
                    class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
                  >
                    Example output showing all CLI tools successfully installed
                    and configured within dev container
                  </p>
                </div>

                <p class="text-sm text-gray-700 dark:text-gray-300 mt-3">
                  üéâ All three AI assistants should now be ready to use!
                </p>
              </div>
            </div>

            <div
              class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ‚úÖ Best Practices:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-tertiary-800 dark:text-md-tertiary-300 text-sm"
              >
                <li>
                  <strong>Task-specific usage</strong>: Use Claude for complex
                  reasoning, Codex for quick completions, Gemini for multimodal
                  work
                </li>
                <li>
                  <strong>API cost awareness</strong>: Monitor your usage across
                  all three services to manage costs
                </li>
                <li>
                  <strong>Config persistence</strong>: Volume mounts ensure you
                  don't need to re-authenticate when rebuilding containers
                </li>
                <li>
                  <strong>Security</strong>: Never commit API keys to your
                  repository - keep them in the volume-mounted config
                  directories
                </li>
                <li>
                  <strong>Extension conflicts</strong>: If you experience
                  conflicts, you can disable individual extensions in VS Code
                  settings
                </li>
              </ul>
            </div>
          </section>

          <!-- AI CLI Authentication -->
          <section
            id="ai-cli-auth"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              ü§ñ AI CLI Authentication
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              Before using Claude Code, Codex CLI, or Gemini CLI within your dev
              container, you need to authenticate each tool with its respective
              API service. Authentication is a one-time setup that persists
              across container rebuilds thanks to Docker volume mounts.
            </p>

            <!-- Why It Matters -->
            <div
              class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mb-6 rounded-r-lg"
            >
              <p class="text-purple-900 dark:text-purple-200 font-medium mb-2">
                üí° Why AI CLI Authentication Matters:
              </p>
              <ul
                class="list-disc list-inside text-purple-800 dark:text-purple-300 space-y-1 text-sm"
              >
                <li>
                  Enables AI assistants to access their respective APIs for code
                  generation and assistance
                </li>
                <li>
                  Credentials are stored in
                  <code>~/.config/</code> directories that persist via Docker
                  volumes
                </li>
                <li>
                  One-time setup per container - authentication survives
                  container rebuilds
                </li>
                <li>
                  Each CLI uses different authentication methods (OAuth, API
                  keys) suited to their service
                </li>
              </ul>
            </div>

            <!-- Claude Code Authentication -->
            <div class="mb-8">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                1. Claude Code Authentication
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-4">
                Claude Code uses the <code>/login</code> slash command to
                authenticate with your Anthropic account. This opens a
                browser-based OAuth flow where you can choose between using your
                Claude subscription (Pro, Max, Team, Enterprise) or Anthropic
                Console account for API usage billing.
              </p>

              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4">
                <pre
                  class="text-sm text-gray-800 dark:text-gray-200"
                ><code>/login</code></pre>
              </div>

              <div class="mt-4 mb-4">
                <img
                  src="claude-code-login-1.png"
                  alt="Claude Code login screen showing /login command with options to select Claude account with subscription or Anthropic Console account"
                  class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
                />
                <p
                  class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
                >
                  Claude Code login screen: Select authentication method (Claude
                  subscription or Console API billing)
                </p>
              </div>

              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4 mb-4"
              >
                <p
                  class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                >
                  ‚úÖ Authentication Persistence
                </p>
                <p class="text-md-primary-800 dark:text-md-primary-300 text-sm">
                  Claude Code stores authentication tokens in
                  <code>~/.config/claude/</code>, which is mounted as a Docker
                  volume. Your login persists across container rebuilds,
                  eliminating the need to re-authenticate after
                  <code>devcontainer.json</code> changes.
                </p>
              </div>

              <div
                class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 rounded-r-lg"
              >
                <p
                  class="text-yellow-900 dark:text-yellow-200 font-medium mb-2"
                >
                  üîß Troubleshooting:
                </p>
                <ul
                  class="list-disc list-inside text-yellow-800 dark:text-yellow-300 space-y-1 text-sm"
                >
                  <li>
                    If login fails, ensure Docker Desktop is forwarding ports
                    correctly
                  </li>
                  <li>
                    Browser may block popup - check for blocked popup
                    notifications
                  </li>
                  <li>
                    If already logged in elsewhere, you may need to sign out
                    first
                  </li>
                </ul>
              </div>
            </div>

            <!-- Codex CLI Authentication -->
            <div class="mb-8">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                2. Codex CLI Authentication
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-4">
                Codex CLI uses OpenAI's authentication system via the
                <code>codex auth login</code> command. This starts a local
                server and opens your browser to authenticate with your OpenAI
                account. The CLI supports standard OpenAI authentication flow.
              </p>

              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4">
                <pre
                  class="text-sm text-gray-800 dark:text-gray-200"
                ><code>codex auth login</code></pre>
              </div>

              <div class="mt-4 mb-4">
                <img
                  src="codex-cli-login-1.png"
                  alt="Codex CLI authentication screen showing local login server on localhost:1455 with OpenAI OAuth URL"
                  class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
                />
                <p
                  class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
                >
                  Codex CLI authentication: Local server starts on localhost and
                  opens OpenAI OAuth flow
                </p>
              </div>

              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4 mb-4"
              >
                <p
                  class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                >
                  ‚úÖ Authentication Persistence
                </p>
                <p class="text-md-primary-800 dark:text-md-primary-300 text-sm">
                  Codex CLI stores OAuth tokens in
                  <code>~/.config/codex/</code>, mounted as a Docker volume.
                  After initial authentication, the CLI maintains session across
                  container rebuilds automatically.
                </p>
              </div>

              <div
                class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 rounded-r-lg"
              >
                <p
                  class="text-yellow-900 dark:text-yellow-200 font-medium mb-2"
                >
                  üîß Troubleshooting:
                </p>
                <ul
                  class="list-disc list-inside text-yellow-800 dark:text-yellow-300 space-y-1 text-sm"
                >
                  <li>
                    Browser must be able to access localhost:1455 - check
                    firewall settings
                  </li>
                  <li>
                    If authentication fails, try clearing
                    <code>~/.config/codex/</code> and re-authenticating
                  </li>
                  <li>
                    Port forwarding may need to be configured in
                    <code>devcontainer.json</code> for remote development
                  </li>
                </ul>
              </div>
            </div>

            <!-- Gemini CLI Authentication -->
            <div class="mb-8">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                3. Gemini CLI Authentication
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-4">
                Gemini CLI offers multiple authentication options via the
                <code>/auth</code> slash command. While OAuth with Google is
                available, using an API key is the
                <strong>recommended approach</strong> for dev container
                environments as it provides more reliable authentication without
                browser dependencies.
              </p>

              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4 mb-4">
                <pre
                  class="text-sm text-gray-800 dark:text-gray-200"
                ><code>/auth</code></pre>
              </div>

              <div class="mt-4 mb-4">
                <img
                  src="gemini-cli-login-1.png"
                  alt="Gemini CLI authentication screen showing /auth command with options: Login with Google, Use Gemini API Key, or Vertex AI"
                  class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
                />
                <p
                  class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
                >
                  Gemini CLI authentication: Choose between Google OAuth, API
                  Key (recommended), or Vertex AI
                </p>
              </div>

              <div
                class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4 mb-4"
              >
                <p
                  class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
                >
                  ‚úÖ Authentication Persistence
                </p>
                <p
                  class="text-md-primary-800 dark:text-md-primary-300 text-sm mb-2"
                >
                  Gemini CLI stores API keys and OAuth tokens in
                  <code>~/.config/gemini/</code>, mounted as a Docker volume.
                  Configuration persists across container rebuilds.
                </p>
                <p class="text-md-primary-800 dark:text-md-primary-300 text-sm">
                  <strong>API Key Recommendation:</strong> Select "Use Gemini
                  API Key" option for most reliable container experience. Get
                  your API key from
                  <a
                    href="https://aistudio.google.com/app/apikey"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="underline hover:text-md-primary-600"
                    >Google AI Studio</a
                  >.
                </p>
              </div>

              <div
                class="bg-yellow-50 dark:bg-yellow-900/20 border-l-4 border-yellow-500 p-4 rounded-r-lg"
              >
                <p
                  class="text-yellow-900 dark:text-yellow-200 font-medium mb-2"
                >
                  üîß Troubleshooting:
                </p>
                <ul
                  class="list-disc list-inside text-yellow-800 dark:text-yellow-300 space-y-1 text-sm"
                >
                  <li>
                    If OAuth login fails, switch to API key authentication
                    method
                  </li>
                  <li>
                    API keys can be created and managed at
                    <a
                      href="https://aistudio.google.com/app/apikey"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="underline hover:text-yellow-600"
                      >Google AI Studio</a
                    >
                  </li>
                  <li>
                    Verify API key has necessary permissions for Gemini models
                  </li>
                </ul>
              </div>
            </div>

            <!-- OpenCode Authentication -->
            <div class="mb-8">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                4. OpenCode Authentication
              </h3>
              <p class="text-gray-700 dark:text-gray-300 mb-4">
                OpenCode is provider-agnostic and supports multiple AI
                providers. Configure your preferred provider using environment
                variables or the config command.
              </p>

              <div class="space-y-4">
                <div>
                  <h4 class="font-semibold text-gray-900 dark:text-white mb-2">
                    Option 1: Anthropic (Claude)
                  </h4>
                  <div class="code-block-wrapper" data-language="bash">
                    <button class="copy-button" aria-label="Copy code">
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                    ><code class="language-bash">export ANTHROPIC_API_KEY=YOUR_ANTHROPIC_API_KEY
opencode config set provider anthropic
opencode config set apiKey YOUR_ANTHROPIC_API_KEY</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-semibold text-gray-900 dark:text-white mb-2">
                    Option 2: OpenAI
                  </h4>
                  <div class="code-block-wrapper" data-language="bash">
                    <button class="copy-button" aria-label="Copy code">
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                    ><code class="language-bash">export OPENAI_API_KEY=YOUR_OPENAI_API_KEY
opencode config set provider openai</code></pre>
                  </div>
                </div>

                <div>
                  <h4 class="font-semibold text-gray-900 dark:text-white mb-2">
                    Option 3: Google (Gemini)
                  </h4>
                  <div class="code-block-wrapper" data-language="bash">
                    <button class="copy-button" aria-label="Copy code">
                      Copy
                    </button>
                    <pre
                      class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                    ><code class="language-bash">export GOOGLE_API_KEY=YOUR_GOOGLE_API_KEY
opencode config set provider google</code></pre>
                  </div>
                </div>
              </div>

              <div
                class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 p-4 mt-4 rounded-r-lg"
              >
                <p class="text-blue-900 dark:text-blue-200 text-sm">
                  <strong>Multi-Model Flexibility:</strong> OpenCode stores API
                  keys in <code>~/.opencode/config</code> (persists via Docker
                  volume). You can switch providers anytime without
                  re-authentication using
                  <code>opencode config set provider &lt;name&gt;</code>.
                </p>
              </div>

              <div class="mt-4">
                <h4 class="font-semibold text-gray-900 dark:text-white mb-2">
                  Verify Configuration
                </h4>
                <div class="code-block-wrapper" data-language="bash">
                  <button class="copy-button" aria-label="Copy code">
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash">opencode config list
opencode --version</code></pre>
                </div>
              </div>
            </div>

            <!-- Security Note -->
            <div
              class="bg-md-error-50 dark:bg-md-error-900/20 border-l-4 border-md-error-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-error-900 dark:text-md-error-200 font-medium mb-2"
              >
                üîí Security Note:
              </p>
              <ul
                class="list-disc list-inside text-md-error-800 dark:text-md-error-300 space-y-1 text-sm"
              >
                <li>
                  All credentials persist in
                  <code>/home/node/.config/</code> directories mounted as Docker
                  volumes
                </li>
                <li>
                  Volumes survive container rebuilds but are deleted if you
                  remove the container completely
                </li>
                <li>
                  Never commit <code>.config/</code> directories or API keys to
                  git repositories
                </li>
                <li>
                  Use <code>.gitignore</code> to exclude sensitive configuration
                  files
                </li>
                <li>
                  For team environments, use environment variables or secret
                  management tools
                </li>
              </ul>
            </div>

            <!-- Best Practices -->
            <div
              class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ‚ú® Best Practices:
              </p>
              <ul
                class="list-disc list-inside text-md-tertiary-800 dark:text-md-tertiary-300 space-y-1 text-sm"
              >
                <li>
                  <strong>Prefer API keys for Gemini:</strong> More reliable
                  than OAuth in containerized environments
                </li>
                <li>
                  <strong>Verify authentication after rebuilds:</strong> Quick
                  test with each CLI ensures credentials persisted correctly
                </li>
                <li>
                  <strong>Document required credentials:</strong> Update your
                  project README with authentication requirements
                </li>
                <li>
                  <strong>Use named volumes:</strong> Explicitly name your
                  config volumes in <code>devcontainer.json</code> for easier
                  management
                </li>
                <li>
                  <strong>Backup important configurations:</strong> Export API
                  keys to secure password manager before major container changes
                </li>
              </ul>
            </div>
          </section>

          <!-- GitHub CLI Authentication -->
          <section
            id="github-cli-auth"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üîë GitHub CLI Authentication
            </h2>
            <p class="text-gray-700 dark:text-gray-300 mb-6">
              The GitHub CLI (<code>gh</code>) is pre-installed for creating
              pull requests and managing repositories. One-time authentication
              setup is required and persists across container rebuilds.
            </p>

            <!-- Why It Matters -->
            <div
              class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mb-6 rounded-r-lg"
            >
              <p class="text-purple-900 dark:text-purple-200 font-medium mb-2">
                üí° Why GitHub CLI Matters:
              </p>
              <ul
                class="list-disc list-inside text-purple-800 dark:text-purple-300 space-y-1 text-sm"
              >
                <li>Create pull requests: <code>gh pr create</code></li>
                <li>Required for git-pr-helper skill workflows</li>
                <li>Integrates with CLAUDE.md Git Safety Protocol</li>
              </ul>
            </div>

            <!-- Quick Setup -->
            <div class="mb-6">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                Quick Setup
              </h3>
              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4">
                <pre
                  class="text-sm text-gray-800 dark:text-gray-200"
                ><code>gh auth login</code></pre>
              </div>
              <div class="mt-4 space-y-2 text-gray-700 dark:text-gray-300">
                <p><strong>Follow the prompts</strong>:</p>
                <ol class="list-decimal list-inside space-y-1 ml-4">
                  <li>Choose GitHub.com</li>
                  <li>Select HTTPS protocol</li>
                  <li>Authenticate Git credentials: Yes</li>
                  <li>Choose "Login with a web browser"</li>
                  <li>Copy the one-time code and press Enter</li>
                  <li>Authorize in your browser</li>
                </ol>
              </div>
            </div>

            <!-- Persistence -->
            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4 mb-6"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                ‚úÖ One-Time Setup
              </p>
              <p class="text-md-primary-800 dark:text-md-primary-300 text-sm">
                Authentication is stored in
                <code>/home/node/.config/gh</code> and backed by a Docker
                volume. It persists across container rebuilds and only needs to
                be done once per devcontainer volume.
              </p>
            </div>

            <!-- Verification -->
            <div class="mb-6">
              <h3
                class="text-xl font-semibold mb-3 text-gray-900 dark:text-white"
              >
                Verify Setup
              </h3>
              <div class="bg-gray-50 dark:bg-gray-900 rounded-lg p-4">
                <pre
                  class="text-sm text-gray-800 dark:text-gray-200"
                ><code>gh auth status</code></pre>
              </div>
              <p class="mt-2 text-sm text-gray-600 dark:text-gray-400">
                Should show: ‚úì Logged in to github.com as your-username
              </p>
            </div>

            <!-- Learn More -->
            <div
              class="bg-gray-50 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg p-4"
            >
              <p class="text-sm text-gray-700 dark:text-gray-300">
                <strong>Need more details?</strong> See the comprehensive GitHub
                CLI documentation in
                <a href="../README.md" class="text-primary hover:underline"
                  >README.md</a
                >
                or
                <a href="./llms.txt" class="text-primary hover:underline"
                  >llms.txt</a
                >
                for alternative authentication methods, troubleshooting, and
                security best practices.
              </p>
            </div>
          </section>

          <!-- Examples -->
          <section
            id="examples"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üì∑ Examples: Multi-AI Collaboration
            </h2>

            <p class="text-gray-700 dark:text-gray-300 mb-6">
              This example demonstrates the power of running multiple AI
              assistants (Claude Code, OpenAI Codex CLI, and Google Gemini CLI)
              within a single dev container. Using a custom AI cross-verifier
              skill, we can leverage each model's unique strengths for
              comprehensive code analysis and evaluation.
            </p>

            <div
              class="bg-md-tertiary-50 dark:bg-md-tertiary-900/20 border-l-4 border-md-tertiary-500 p-4 mb-6 rounded-r-lg"
            >
              <p
                class="text-md-tertiary-900 dark:text-md-tertiary-200 font-medium mb-2"
              >
                ü§ñ AI Cross Verifier Skill:
              </p>
              <p class="text-md-tertiary-800 dark:text-md-tertiary-300 text-sm">
                The AI Cross Verifier skill enables Claude to coordinate with
                OpenAI Codex and Google Gemini CLI to provide independent code
                reviews, plan validation, and comparative analysis for
                cross-verification of technical decisions.
              </p>
            </div>

            <div
              class="bg-md-secondary-50 dark:bg-md-secondary-900/20 border-l-4 border-md-secondary-500 p-4 mb-6 rounded-r-lg"
            >
              <p class="text-purple-900 dark:text-purple-200 font-medium mb-2">
                üí° What This Demonstrates:
              </p>
              <ul
                class="list-disc list-inside text-purple-800 dark:text-purple-300 space-y-1 text-sm"
              >
                <li>
                  <strong>Multi-AI orchestration</strong>: Claude coordinates
                  with Codex and Gemini CLIs for cross-verification
                </li>
                <li>
                  <strong>Unified environment</strong>: All three AI assistants
                  working seamlessly in one container
                </li>
                <li>
                  <strong>Custom skills</strong>: AI cross-verifier skill
                  automates multi-model evaluation workflows
                </li>
                <li>
                  <strong>Real-world task</strong>: Analyzing and summarizing
                  the llms.txt documentation file
                </li>
              </ul>
            </div>

            <h3
              class="text-2xl font-semibold mb-4 text-gray-900 dark:text-white"
            >
              Scenario: llms.txt Summarization & Cross-Evaluation
            </h3>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
              In this workflow, we ask Claude Code to summarize the llms.txt
              file and evaluate responses from both Codex CLI and Gemini CLI.
              This showcases how the AI cross-verifier skill enables
              sophisticated multi-model comparisons with a single command.
            </p>

            <!-- Screenshot 1: Initial Request -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-1.png"
                alt="Claude Code receiving request to summarize llms.txt file and coordinate with other AI models"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 1: Initial request to Claude to summarize llms.txt and
                compare with other AI models
              </p>
            </div>

            <!-- Screenshot 2: Codex CLI Invocation -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-2.png"
                alt="Claude Code invoking Codex CLI to get OpenAI's perspective on the llms.txt summary"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 2: Claude invokes Codex CLI to get OpenAI's analysis
              </p>
            </div>

            <!-- Screenshot 3: Gemini CLI Invocation -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-3.png"
                alt="Claude Code invoking Gemini CLI to get Google's perspective on the llms.txt summary"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 3: Claude invokes Gemini CLI to get Google's analysis
              </p>
            </div>

            <!-- Screenshot 4: Claude's Analysis Begins -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-4.png"
                alt="Claude Code analyzing and comparing the responses from Codex and Gemini"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 4: Claude analyzes responses from both Codex and Gemini
              </p>
            </div>

            <!-- Screenshot 5: Detailed Comparison -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-5.png"
                alt="Claude providing detailed comparison of each model's strengths and approach to the task"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 5: Detailed comparison highlighting each model's unique
                strengths
              </p>
            </div>

            <!-- Screenshot 6: Final Summary -->
            <div class="mt-6 mb-6">
              <img
                src="screenshot-multi-ai-dev-container-demo-6.png"
                alt="Claude's final summary and recommendations based on multi-model evaluation"
                class="rounded-lg border border-gray-300 dark:border-gray-600 shadow-md w-full max-w-3xl mx-auto"
              />
              <p
                class="text-xs text-center text-gray-500 dark:text-gray-400 mt-2 italic"
              >
                Step 6: Claude context usage after session
              </p>
            </div>

            <div
              class="bg-md-primary-50 dark:bg-md-primary-900/20 border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-4 mt-6"
            >
              <p
                class="text-md-primary-900 dark:text-md-primary-200 font-medium mb-2"
              >
                üéØ Key Takeaways:
              </p>
              <ul
                class="list-disc list-inside space-y-1 text-md-primary-800 dark:text-md-primary-300 text-sm"
              >
                <li>
                  <strong>Seamless integration</strong>: All three AI CLIs work
                  together without conflicts or manual switching
                </li>
                <li>
                  <strong>Automatic orchestration</strong>: AI cross-verifier
                  skill handles the coordination logic
                </li>
                <li>
                  <strong>Complementary insights</strong>: Each model
                  contributes unique perspectives (Claude for reasoning, Codex
                  for code focus, Gemini for multimodal understanding)
                </li>
                <li>
                  <strong>Production-ready setup</strong>: Authentication
                  persists, volumes maintain state, firewall ensures security
                </li>
              </ul>
            </div>
          </section>

          <!-- Troubleshooting -->
          <section
            id="troubleshooting"
            class="mb-12 bg-white dark:bg-gray-800 rounded-lg p-8 shadow-lg border border-gray-200 dark:border-gray-700"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üîß Troubleshooting
            </h2>
            <div class="space-y-6">
              <div
                class="border border-red-200 dark:border-red-800 rounded-lg p-6 bg-red-50 dark:bg-red-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-red-900 dark:text-red-200"
                >
                  ‚ùå Error: "Cannot connect to Docker daemon"
                </h3>
                <p class="text-red-800 dark:text-red-300 mb-3">
                  <strong>Cause:</strong> Docker Desktop isn't running.
                </p>
                <p class="text-red-800 dark:text-red-300 mb-2">
                  <strong>Solution:</strong>
                </p>
                <ol
                  class="list-decimal list-inside text-sm text-red-700 dark:text-red-300 space-y-1"
                >
                  <li>Start Docker Desktop from your Applications folder</li>
                  <li>
                    Wait for the whale icon in your menu bar/system tray to show
                    it's running
                  </li>
                  <li>
                    Retry in VS Code: Cmd+Shift+P ‚Üí "Dev Containers: Rebuild
                    Container"
                  </li>
                </ol>
              </div>

              <div
                class="border border-orange-200 dark:border-orange-800 rounded-lg p-6 bg-orange-50 dark:bg-orange-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-orange-900 dark:text-orange-200"
                >
                  ‚ùå Error: "Command not found" (npm, python, etc.)
                </h3>
                <p class="text-orange-800 dark:text-orange-300 mb-3">
                  <strong>Cause:</strong> Tool not installed in the container,
                  or PATH not set correctly.
                </p>
                <p class="text-orange-800 dark:text-orange-300 mb-2">
                  <strong>Solution:</strong>
                </p>
                <ol
                  class="list-decimal list-inside text-sm text-orange-700 dark:text-orange-300 space-y-1"
                >
                  <li>
                    Check your Dockerfile has the correct base image (e.g.,
                    <code>FROM node:22</code>)
                  </li>
                  <li>
                    Rebuild the container: Cmd+Shift+P ‚Üí "Dev Containers:
                    Rebuild Container"
                  </li>
                  <li>
                    If still failing, check you're using the correct terminal
                    (should say "Dev Container" in bottom-left)
                  </li>
                </ol>
              </div>

              <div
                class="border border-yellow-200 dark:border-yellow-800 rounded-lg p-6 bg-md-error-50 dark:bg-md-error-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-md-error-900 dark:text-md-error-200"
                >
                  ‚ö†Ô∏è Container is very slow
                </h3>
                <p class="text-md-error-800 dark:text-md-error-300 mb-3">
                  <strong>Cause:</strong> Docker performance issues, especially
                  on Mac/Windows.
                </p>
                <p class="text-md-error-800 dark:text-md-error-300 mb-2">
                  <strong>Solutions:</strong>
                </p>
                <ul
                  class="list-disc list-inside text-sm text-yellow-700 dark:text-yellow-300 space-y-1"
                >
                  <li>
                    <strong>Mac:</strong> Enable VirtioFS in Docker Desktop ‚Üí
                    Settings ‚Üí Experimental Features
                  </li>
                  <li>
                    <strong>Windows:</strong> Ensure project is in WSL2
                    filesystem, not /mnt/c/
                  </li>
                  <li>
                    Use named volumes for node_modules: Add to mounts:
                    <code
                      >"source=node-modules,target=/workspace/node_modules,type=volume"</code
                    >
                  </li>
                  <li>
                    Create .dockerignore file to exclude node_modules, .git from
                    build context
                  </li>
                </ul>
              </div>

              <div
                class="border border-md-primary-200 dark:border-md-primary-800 rounded-lg p-6 bg-md-primary-50 dark:bg-md-primary-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-md-primary-900 dark:text-md-primary-200"
                >
                  ‚ÑπÔ∏è Port already in use
                </h3>
                <p class="text-md-primary-800 dark:text-md-primary-300 mb-3">
                  <strong>Cause:</strong> Another process is using the port
                  (e.g., 3000, 5000).
                </p>
                <p class="text-md-primary-800 dark:text-md-primary-300 mb-2">
                  <strong>Solutions:</strong>
                </p>
                <ol
                  class="list-decimal list-inside text-sm text-md-primary-700 dark:text-md-primary-300 space-y-1"
                >
                  <li>
                    Find what's using the port:
                    <code>lsof -i :3000</code> (Mac/Linux) or
                    <code>netstat -ano | findstr :3000</code> (Windows)
                  </li>
                  <li>Kill the process or change your app's port</li>
                  <li>
                    Update forwardPorts in devcontainer.json to match new port
                  </li>
                </ol>
              </div>

              <div
                class="border border-purple-200 dark:border-purple-800 rounded-lg p-6 bg-purple-50 dark:bg-purple-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-purple-900 dark:text-purple-200"
                >
                  ‚ùå Codex CLI: Landlock Sandbox Error
                </h3>

                <div
                  class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 mb-4 font-mono text-xs text-red-800 dark:text-red-200"
                >
                  <p class="mb-1">
                    thread 'main' panicked at
                    linux-sandbox/src/linux_run_main.rs:30:9:
                  </p>
                  <p>error running landlock: Sandbox(LandlockRestrict)</p>
                </div>

                <p class="text-purple-800 dark:text-purple-300 mb-3">
                  <strong>Cause:</strong> Docker's LinuxKit kernel doesn't
                  support Landlock (Linux security module). This is a known
                  limitation of containerized environments.
                </p>

                <p class="text-purple-800 dark:text-purple-300 mb-2">
                  <strong>Solution:</strong> Disable Codex sandboxing (safe in
                  containers):
                </p>

                <div
                  class="bg-purple-100 dark:bg-purple-900/40 rounded-lg p-4 mb-3"
                >
                  <p
                    class="text-sm text-purple-700 dark:text-purple-300 mb-2 font-semibold"
                  >
                    ~/.codex/config.toml
                  </p>
                  <pre
                    class="text-xs bg-purple-900 dark:bg-black text-purple-100 p-3 rounded overflow-x-auto"
                  ><code>sandbox_mode = "danger-full-access"
approval_policy = "never"</code></pre>
                </div>

                <div
                  class="bg-green-100 dark:bg-green-900/30 rounded-lg p-3 mb-3"
                >
                  <p class="text-sm text-green-800 dark:text-green-300 mb-2">
                    <strong>‚úÖ Why This Is Safe:</strong>
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-green-700 dark:text-green-300 space-y-1"
                  >
                    <li>Docker container provides process isolation</li>
                    <li>Network firewall restricts connections</li>
                    <li>Non-root user execution (node)</li>
                    <li>OpenAI's official recommendation for Docker</li>
                  </ul>
                </div>

                <p class="text-purple-800 dark:text-purple-300 mb-2 text-sm">
                  <strong>Verify it works:</strong>
                </p>
                <pre
                  class="text-xs bg-purple-900 dark:bg-black text-purple-100 p-3 rounded overflow-x-auto mb-3"
                ><code>codex --version
codex exec "echo 'Hello from Codex'"</code></pre>

                <div
                  class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-3 rounded-r"
                >
                  <p class="text-xs text-blue-800 dark:text-blue-300">
                    <strong>üìù Note:</strong> This repository's devcontainer
                    automatically applies this fix via
                    <code>init-codex-config.sh</code>. Configuration persists
                    across container rebuilds.
                  </p>
                </div>

                <div
                  class="bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 p-4 rounded-r mt-4"
                >
                  <p
                    class="text-sm font-bold text-red-900 dark:text-red-200 mb-2"
                  >
                    ‚ö†Ô∏è IMPORTANT: VSCode Extension Limitation
                  </p>
                  <p class="text-xs text-red-800 dark:text-red-300 mb-3">
                    The above configuration
                    <strong>only works for Codex CLI</strong>, not the VSCode
                    extension.
                  </p>

                  <div class="bg-red-100 dark:bg-red-900/40 rounded p-3 mb-3">
                    <p
                      class="text-xs font-semibold text-red-900 dark:text-red-200 mb-2"
                    >
                      VSCode Extension Issue:
                    </p>
                    <ul
                      class="list-disc list-inside text-xs text-red-800 dark:text-red-300 space-y-1"
                    >
                      <li>
                        Extension ignores <code>sandbox_mode</code> in
                        config.toml
                      </li>
                      <li>
                        Only reads <code>model</code> and
                        <code>model_reasoning_effort</code>
                      </li>
                      <li>
                        Always tries to use Landlock sandbox (fails in Docker)
                      </li>
                      <li>
                        Tracked as
                        <a
                          href="https://github.com/openai/codex/issues/5041"
                          class="underline hover:text-red-600"
                          >GitHub Issue #5041</a
                        >
                      </li>
                    </ul>
                  </div>

                  <div
                    class="bg-green-100 dark:bg-green-900/40 rounded p-3 mb-3"
                  >
                    <p
                      class="text-xs font-semibold text-green-900 dark:text-green-200 mb-2"
                    >
                      ‚úÖ Workaround:
                    </p>
                    <p class="text-xs text-green-800 dark:text-green-300 mb-1">
                      Use <strong>Codex CLI</strong> instead of VSCode
                      extension:
                    </p>
                    <pre
                      class="text-xs bg-green-900 dark:bg-black text-green-100 p-2 rounded mt-1"
                    ><code>codex exec "your prompt here"</code></pre>
                  </div>

                  <div class="bg-yellow-100 dark:bg-yellow-900/40 rounded p-3">
                    <p class="text-xs text-yellow-800 dark:text-yellow-300">
                      <strong>Status:</strong> OpenAI is working on adding
                      config.toml support to the extension. No ETA available.
                      CLI works perfectly.
                    </p>
                  </div>
                </div>
              </div>

              <div
                class="border border-orange-200 dark:border-orange-800 rounded-lg p-6 bg-orange-50 dark:bg-orange-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-orange-900 dark:text-orange-200"
                >
                  ‚ùå OpenCode: TUI Crashes When Loading Models
                </h3>

                <div
                  class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 mb-4 font-mono text-xs text-red-800 dark:text-red-200"
                >
                  <p class="mb-1">
                    TypeError: undefined is not an object (evaluating
                    'flat().length')
                  </p>
                  <p>
                    at &lt;anonymous&gt;
                    (src/cli/cmd/tui/ui/dialog-select.tsx:49:49)
                  </p>
                </div>

                <p class="text-orange-800 dark:text-orange-300 mb-3">
                  <strong>Cause:</strong> OpenCode's auth.json contains provider
                  configurations incompatible with AI SDK v5. The
                  cloudflare-workers-ai provider doesn't support specification
                  v2 required by SDK v5, and expired OAuth tokens
                  (github-copilot) return undefined when queried, causing the
                  dialog component to crash when attempting to flatten provider
                  data.
                </p>

                <p class="text-orange-800 dark:text-orange-300 mb-2">
                  <strong>Solution:</strong>
                </p>

                <div class="space-y-3">
                  <div
                    class="bg-orange-100 dark:bg-orange-900/40 rounded-lg p-4"
                  >
                    <p
                      class="text-sm text-orange-700 dark:text-orange-300 mb-2 font-semibold"
                    >
                      1. Backup current configuration
                    </p>
                    <pre
                      class="text-xs bg-orange-900 dark:bg-black text-orange-100 p-3 rounded overflow-x-auto"
                    ><code>cp ~/.local/share/opencode/auth.json \
   ~/.local/share/opencode/auth.json.backup</code></pre>
                  </div>

                  <div
                    class="bg-orange-100 dark:bg-orange-900/40 rounded-lg p-4"
                  >
                    <p
                      class="text-sm text-orange-700 dark:text-orange-300 mb-2 font-semibold"
                    >
                      2. Remove incompatible providers from auth.json
                    </p>
                    <pre
                      class="text-xs bg-orange-900 dark:bg-black text-orange-100 p-3 rounded overflow-x-auto mb-2"
                    ><code>nano ~/.local/share/opencode/auth.json</code></pre>
                    <p class="text-xs text-orange-700 dark:text-orange-300">
                      Keep only: anthropic, openrouter, nvidia, openai, google
                    </p>
                  </div>

                  <div
                    class="bg-orange-100 dark:bg-orange-900/40 rounded-lg p-4"
                  >
                    <p
                      class="text-sm text-orange-700 dark:text-orange-300 mb-2 font-semibold"
                    >
                      3. Clear stale cache
                    </p>
                    <pre
                      class="text-xs bg-orange-900 dark:bg-black text-orange-100 p-3 rounded overflow-x-auto"
                    ><code>rm -rf ~/.cache/opencode/*</code></pre>
                  </div>

                  <div
                    class="bg-orange-100 dark:bg-orange-900/40 rounded-lg p-4"
                  >
                    <p
                      class="text-sm text-orange-700 dark:text-orange-300 mb-2 font-semibold"
                    >
                      4. Verify operation
                    </p>
                    <pre
                      class="text-xs bg-orange-900 dark:bg-black text-orange-100 p-3 rounded overflow-x-auto"
                    ><code>opencode models  # Should display 180+ models
opencode         # TUI should start without errors</code></pre>
                  </div>
                </div>

                <div
                  class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-3 rounded-r mt-4"
                >
                  <p
                    class="text-xs font-semibold text-blue-900 dark:text-blue-200 mb-2"
                  >
                    üí° Why This Works
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-blue-800 dark:text-blue-300 space-y-1"
                  >
                    <li>
                      Removes provider entries that return undefined when
                      queried
                    </li>
                    <li>
                      Clears cached model metadata referencing removed providers
                    </li>
                    <li>
                      Allows OpenCode to rebuild provider list from scratch
                    </li>
                  </ul>
                </div>

                <div
                  class="bg-green-50 dark:bg-green-900/30 border-l-4 border-green-500 p-3 rounded-r mt-3"
                >
                  <p
                    class="text-xs font-semibold text-green-900 dark:text-green-200 mb-2"
                  >
                    ‚úÖ Compatible Providers
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-green-800 dark:text-green-300 space-y-1"
                  >
                    <li>anthropic, openai, google (primary providers)</li>
                    <li>openrouter, nvidia (third-party aggregators)</li>
                  </ul>
                </div>

                <div
                  class="bg-red-50 dark:bg-red-900/30 border-l-4 border-red-500 p-3 rounded-r mt-3"
                >
                  <p
                    class="text-xs font-semibold text-red-900 dark:text-red-200 mb-2"
                  >
                    ‚ùå Known Incompatible Providers
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-red-800 dark:text-red-300 space-y-1"
                  >
                    <li>cloudflare-workers-ai (doesn't support AI SDK v5)</li>
                    <li>
                      requesty (similar SDK incompatibility -
                      <a
                        href="https://github.com/sst/opencode/issues/2468"
                        class="underline hover:text-red-600"
                        target="_blank"
                        rel="noopener noreferrer"
                        >Issue #2468</a
                      >)
                    </li>
                    <li>
                      github-copilot (OAuth flow incompatible with
                      devcontainers)
                    </li>
                  </ul>
                </div>

                <div
                  class="bg-yellow-50 dark:bg-yellow-900/40 border-l-4 border-yellow-500 p-3 rounded-r mt-3"
                >
                  <p
                    class="text-xs font-semibold text-yellow-900 dark:text-yellow-200 mb-2"
                  >
                    üîß Prevention Tips
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-yellow-800 dark:text-yellow-300 space-y-1"
                  >
                    <li>
                      Only authenticate with actively maintained providers
                    </li>
                    <li>
                      Periodically review auth.json and remove unused/expired
                      providers
                    </li>
                    <li>
                      Keep OpenCode updated:
                      <code>npm update -g @opencode-ai/opencode</code>
                    </li>
                  </ul>
                </div>
              </div>

              <div
                class="border border-teal-200 dark:border-teal-800 rounded-lg p-6 bg-teal-50 dark:bg-teal-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-teal-900 dark:text-teal-200"
                >
                  ‚ùå Docker Build: Permission Denied in .config Directory
                </h3>

                <div
                  class="bg-red-100 dark:bg-red-900/30 rounded-lg p-4 mb-4 font-mono text-xs text-red-800 dark:text-red-200"
                >
                  <p class="mb-1">
                    mkdir: cannot create directory '/home/node/.config/fish':
                    Permission denied
                  </p>
                  <p>ERROR: command failed: mkdir -p /home/node/.config/fish</p>
                </div>

                <p class="text-teal-800 dark:text-teal-300 mb-3">
                  <strong>Cause:</strong> Setting ownership on a subdirectory
                  (like <code>.config/gh</code>) instead of the parent directory
                  (<code>.config</code>) leaves the parent owned by root. When
                  installers (uv, fish, zsh) try to create their own
                  subdirectories, they fail due to permission errors.
                </p>

                <p class="text-teal-800 dark:text-teal-300 mb-2">
                  <strong>Root Cause Explanation:</strong>
                </p>
                <ul
                  class="list-disc list-inside text-sm text-teal-700 dark:text-teal-300 space-y-1 mb-4"
                >
                  <li>
                    <code>mkdir -p /home/node/.config/gh</code> creates both
                    parent and subdirectory
                  </li>
                  <li>
                    Parent directory <code>.config</code> is owned by root
                  </li>
                  <li>
                    <code>chown</code> on subdirectory only affects that
                    subdirectory
                  </li>
                  <li>
                    Later installers cannot create new subdirectories in
                    root-owned parent
                  </li>
                </ul>

                <div
                  class="bg-teal-100 dark:bg-teal-900/40 rounded-lg p-4 mb-3"
                >
                  <p
                    class="text-sm text-teal-700 dark:text-teal-300 mb-2 font-semibold"
                  >
                    ‚ùå Incorrect (in Dockerfile):
                  </p>
                  <pre
                    class="text-xs bg-teal-900 dark:bg-black text-teal-100 p-3 rounded overflow-x-auto"
                  ><code>RUN mkdir -p /home/node/.config/gh /home/node/.claude && \
  chown -R node:node /home/node/.config/gh  # Only owns subdirectory!</code></pre>
                </div>

                <div
                  class="bg-green-100 dark:bg-green-900/40 rounded-lg p-4 mb-3"
                >
                  <p
                    class="text-sm text-green-700 dark:text-green-300 mb-2 font-semibold"
                  >
                    ‚úÖ Correct (in Dockerfile):
                  </p>
                  <pre
                    class="text-xs bg-green-900 dark:bg-black text-green-100 p-3 rounded overflow-x-auto"
                  ><code>RUN mkdir -p /home/node/.config/gh /home/node/.claude && \
  chown -R node:node /home/node/.config  # Owns entire .config tree!</code></pre>
                </div>

                <div
                  class="bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-400 p-3 rounded-r mb-3"
                >
                  <p class="text-xs text-blue-800 dark:text-blue-300">
                    <strong>üí° Pattern to remember:</strong>
                  </p>
                  <ul
                    class="list-disc list-inside text-xs text-blue-700 dark:text-blue-300 space-y-1 mt-2"
                  >
                    <li>
                      ‚ùå <code>chown -R user /path/parent/child</code> (only
                      owns child)
                    </li>
                    <li>
                      ‚úÖ <code>chown -R user /path/parent</code> (owns parent +
                      all children)
                    </li>
                  </ul>
                </div>

                <p class="text-teal-800 dark:text-teal-300 mb-2 text-sm">
                  <strong>Verification commands:</strong>
                </p>
                <pre
                  class="text-xs bg-teal-900 dark:bg-black text-teal-100 p-3 rounded overflow-x-auto mb-3"
                ><code># Check parent directory ownership
ls -ld /home/node/.config
# Should show: drwxr-xr-x node node

# Test creating new subdirectory as node user
su - node -c "mkdir -p /home/node/.config/test"
# Should succeed without permission errors</code></pre>

                <div
                  class="bg-yellow-50 dark:bg-yellow-900/30 border-l-4 border-yellow-500 p-3 rounded-r"
                >
                  <p class="text-xs text-yellow-800 dark:text-yellow-300">
                    <strong>‚ö†Ô∏è When you see this:</strong> Permission errors
                    during RUN commands that create files in
                    <code>~/.config</code>, installers like uv/fish/zsh failing,
                    or build succeeding up to a point then failing on config
                    directory creation.
                  </p>
                </div>
              </div>

              <div
                class="border border-md-tertiary-200 dark:border-md-tertiary-800 rounded-lg p-6 bg-md-tertiary-50 dark:bg-md-tertiary-900/20"
              >
                <h3
                  class="font-semibold text-lg mb-2 text-md-tertiary-900 dark:text-md-tertiary-200"
                >
                  üí° Quick Debug Commands
                </h3>
                <div class="code-block-wrapper" data-language="bash">
                  <button
                    class="copy-button bg-gray-700 hover:bg-gray-600 text-white px-3 py-1 rounded text-xs"
                    aria-label="Copy code"
                  >
                    Copy
                  </button>
                  <pre
                    class="bg-gray-800 text-gray-100 p-4 rounded-lg overflow-x-auto"
                  ><code class="language-bash"># Check Docker is running
docker ps

# Check container logs
docker logs &lt;container-name&gt;

# View Docker disk usage
docker system df

# Clean up unused images/containers (frees space)
docker system prune -a

# Restart Docker Desktop
# Mac: Click whale icon ‚Üí Quit ‚Üí Relaunch
# Windows: Right-click whale icon ‚Üí Quit ‚Üí Relaunch</code></pre>
                </div>
              </div>
            </div>
          </section>

          <!-- Resources -->
          <section
            id="resources"
            class="mb-12 bg-gradient-to-br from-primary/10 to-secondary/10 dark:from-primary/20 dark:to-secondary/20 rounded-lg p-8 shadow-lg border border-primary/20 dark:border-primary/30"
          >
            <h2 class="text-3xl font-bold mb-6 text-gray-900 dark:text-white">
              üìö Resources & Further Learning
            </h2>

            <div class="grid md:grid-cols-2 gap-6 mb-6">
              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow border border-gray-200 dark:border-gray-700"
              >
                <h3
                  class="font-semibold text-lg mb-3 text-gray-900 dark:text-white"
                >
                  Official Documentation
                </h3>
                <ul class="space-y-2 text-sm">
                  <li>
                    <a
                      href="https://claude-devcontainers.centminmod.com/llms.txt"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Comprehensive Dev Containers Guide (llms.txt)
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://docs.claude.com/en/docs/claude-code/devcontainer"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Claude Code Dev Container Docs
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://containers.dev/implementors/spec/"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Dev Container Specification
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://containers.dev/implementors/json_reference/"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      devcontainer.json Reference
                    </a>
                  </li>
                </ul>
              </div>

              <div
                class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow border border-gray-200 dark:border-gray-700"
              >
                <h3
                  class="font-semibold text-lg mb-3 text-gray-900 dark:text-white"
                >
                  Tools & Downloads
                </h3>
                <ul class="space-y-2 text-sm">
                  <li>
                    <a
                      href="https://code.visualstudio.com/"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Download VS Code
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://www.docker.com/products/docker-desktop"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Download Docker Desktop
                    </a>
                  </li>
                  <li>
                    <a
                      href="https://docs.docker.com/"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                    >
                      <svg
                        class="w-4 h-4"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                        aria-hidden="true"
                      >
                        <path
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                        />
                      </svg>
                      Docker Documentation
                    </a>
                  </li>
                </ul>
              </div>
            </div>

            <div
              class="bg-white dark:bg-gray-800 rounded-lg p-6 shadow border border-gray-200 dark:border-gray-700"
            >
              <h3
                class="font-semibold text-lg mb-3 text-gray-900 dark:text-white"
              >
                Community & Support
              </h3>
              <ul class="space-y-2 text-sm">
                <li>
                  <a
                    href="https://github.com/anthropics/claude-code/issues"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                      />
                    </svg>
                    Claude Code GitHub Issues
                  </a>
                </li>
                <li>
                  <a
                    href="https://code.visualstudio.com/docs/devcontainers/containers"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="text-primary hover:text-secondary hover:underline flex items-center gap-2"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                      aria-hidden="true"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                      />
                    </svg>
                    VS Code Dev Containers Guide
                  </a>
                </li>
              </ul>
            </div>
          </section>

          <!-- Footer -->
          <footer
            class="text-center text-gray-600 dark:text-gray-400 text-sm border-t border-gray-200 dark:border-gray-700 pt-8 mt-12"
          >
            <div class="flex flex-col items-center gap-6 mb-6">
              <div>
                <p
                  class="text-base font-medium text-gray-700 dark:text-gray-300 mb-3"
                >
                  ‚òï Enjoying this guide?
                </p>
                <a
                  href="https://www.buymeacoffee.com/georgeliu"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="inline-block hover:scale-105 transition-transform"
                  aria-label="Buy me a coffee"
                >
                  <img
                    src="https://cdn.buymeacoffee.com/buttons/v2/arial-violet.png"
                    alt="Buy Me A Coffee"
                    style="height: 60px !important; width: 217px !important"
                  />
                </a>
              </div>
            </div>
            <div class="border-t border-gray-200 dark:border-gray-700 pt-6">
              <p>
                Created by
                <a
                  href="https://github.com/centminmod"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary hover:text-secondary underline font-medium"
                  >George Liu</a
                >
                for Claude Code users
              </p>
              <p class="mt-2 text-gray-500 dark:text-gray-500">
                Last updated: October 2025
              </p>
              <p class="mt-2">
                Found an issue?
                <a
                  href="https://github.com/centminmod/claude-code-devcontainer-guide"
                  target="_blank"
                  rel="noopener noreferrer"
                  class="text-primary hover:text-secondary underline"
                  >Report it on GitHub</a
                >
              </p>
            </div>
          </footer>
        </main>
      </div>
    </div>

    <script>
      // Dark mode toggle with system preference detection
      const darkModeToggle = document.getElementById("darkModeToggle");
      const html = document.documentElement;
      const reduceMotion = window.matchMedia(
        "(prefers-reduced-motion: reduce)"
      ).matches;

      // Function to set dark mode
      function setDarkMode(isDark) {
        html.classList.toggle("dark", isDark);
        localStorage.setItem("theme", isDark ? "dark" : "light");
        // reflect toggle state for a11y
        if (darkModeToggle)
          darkModeToggle.setAttribute("aria-pressed", String(isDark));
      }

      darkModeToggle.addEventListener("click", () => {
        const isDark = !html.classList.contains("dark");
        setDarkMode(isDark);
      });

      // Mobile menu toggle
      const mobileMenuToggle = document.getElementById("mobileMenuToggle");
      const tocSidebar = document.getElementById("tocSidebar");

      mobileMenuToggle.addEventListener("click", () => {
        tocSidebar.classList.toggle("mobile-open");
        const expanded =
          mobileMenuToggle.getAttribute("aria-expanded") === "true";
        mobileMenuToggle.setAttribute("aria-expanded", String(!expanded));
      });

      // Close mobile menu when clicking outside
      document.addEventListener("click", (e) => {
        if (window.innerWidth <= 768) {
          const isClickInsideMenu = tocSidebar.contains(e.target);
          const isClickOnToggle = mobileMenuToggle.contains(e.target);
          if (!isClickInsideMenu && !isClickOnToggle && tocSidebar.classList.contains("mobile-open")) {
            tocSidebar.classList.remove("mobile-open");
            mobileMenuToggle.setAttribute("aria-expanded", "false");
          }
        }
      });

      // Handle URL hash navigation on initial page load
      if (window.location.hash) {
        // Small delay to ensure page is fully rendered
        setTimeout(() => {
          const targetId = window.location.hash.slice(1);
          const target = document.getElementById(targetId);
          if (target) {
            target.scrollIntoView({ behavior: reduceMotion ? "auto" : "smooth", block: "start" });
          }
        }, 100);
      }

      // Smooth scroll for TOC links
      document.querySelectorAll(".toc-link").forEach((link) => {
        link.addEventListener("click", (e) => {
          const targetId = link.getAttribute("href").slice(1);
          const target = document.getElementById(targetId);
          if (target) {
            if (reduceMotion) {
              // let browser handle default jump, keep URL hash
              // If we prevented default earlier accidentally, ensure instant scroll
              target.scrollIntoView({ behavior: "auto", block: "start" });
            } else {
              e.preventDefault();
              target.scrollIntoView({ behavior: "smooth", block: "start" });
            }
            // persist hash for deep-linking/back/forward
            history.replaceState(null, "", `#${targetId}`);
            // Close mobile menu if open
            if (window.innerWidth <= 768 && tocSidebar.classList.contains("mobile-open")) {
              tocSidebar.classList.remove("mobile-open");
              mobileMenuToggle.setAttribute("aria-expanded", "false");
            }
          }
        });
      });

      // Active section highlighting in TOC
      const sections = document.querySelectorAll("section[id]");
      const observerOptions = {
        root: null,
        rootMargin: "-100px 0px -66%",
        threshold: 0,
      };

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const id = entry.target.getAttribute("id");
            const links = document.querySelectorAll(".toc-link");
            links.forEach((link) => {
              link.classList.remove("active");
              link.removeAttribute("aria-current");
            });
            const active = Array.from(links).find(
              (l) => l.getAttribute("href") === `#${id}`
            );
            if (active) {
              active.classList.add("active");
              active.setAttribute("aria-current", "true");
            }
          }
        });
      }, observerOptions);

      sections.forEach((section) => observer.observe(section));

      // Copy code button functionality
      document.querySelectorAll(".copy-button").forEach((button) => {
        button.addEventListener("click", () => {
          const codeBlock = button.nextElementSibling.querySelector("code");
          const text = codeBlock.textContent;

          navigator.clipboard.writeText(text).then(() => {
            const originalText = button.textContent;
            button.textContent = "Copied!";
            button.classList.add("bg-green-600");
            const live = document.getElementById("copy-status");
            if (live) live.textContent = "Code copied to clipboard";

            setTimeout(() => {
              button.textContent = originalText;
              button.classList.remove("bg-green-600");
            }, 2000);
          });
        });
      });

      // Highlight.js initialization
      // Wait for hljs to be loaded (scripts are deferred)
      function initHighlighting() {
        if (typeof hljs !== 'undefined') {
          hljs.highlightAll();
        } else {
          // Retry after a short delay if hljs not loaded yet
          setTimeout(initHighlighting, 50);
        }
      }
      initHighlighting();

      // Fade-in animation on scroll (skip if reduced motion)
      if (!reduceMotion) {
        const fadeElements = document.querySelectorAll("section");
        const fadeObserver = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                entry.target.classList.add("animate-fade-in");
              }
            });
          },
          { threshold: 0.1 }
        );
        fadeElements.forEach((el) => fadeObserver.observe(el));
      }

      // Back to top button functionality
      const backToTopButton = document.getElementById("backToTop");

      window.addEventListener("scroll", () => {
        if (window.pageYOffset > 300) {
          backToTopButton.classList.add("show");
        } else {
          backToTopButton.classList.remove("show");
        }
      });

      backToTopButton.addEventListener("click", () => {
        window.scrollTo({
          top: 0,
          behavior: reduceMotion ? "auto" : "smooth",
        });
      });

      // Scroll progress bar
      const scrollProgress = document.getElementById("scrollProgress");

      window.addEventListener("scroll", () => {
        const windowHeight =
          document.documentElement.scrollHeight -
          document.documentElement.clientHeight;
        const scrolled = (window.pageYOffset / windowHeight) * 100;
        scrollProgress.style.width = scrolled + "%";
      });

      // Keyboard navigation improvements
      const keyboardHelp = document.getElementById("keyboardHelp");
      if (keyboardHelp) {
        keyboardHelp.setAttribute("role", "dialog");
        keyboardHelp.setAttribute("aria-modal", "false");
        keyboardHelp.setAttribute("aria-hidden", "true");
      }
      let helpVisible = false;

      document.addEventListener("keydown", (e) => {
        // Ignore if typing in input/textarea
        const isTyping =
          e.target.tagName === "INPUT" || e.target.tagName === "TEXTAREA";

        // Press '?' to toggle keyboard help
        if (e.key === "?" && !e.ctrlKey && !e.metaKey && !isTyping) {
          e.preventDefault();
          helpVisible = !helpVisible;
          keyboardHelp.classList.toggle("show", helpVisible);
          keyboardHelp.setAttribute("aria-hidden", String(!helpVisible));
          keyboardHelp.setAttribute("aria-modal", String(!!helpVisible));
        }

        // Press 't' to toggle dark mode
        if (e.key === "t" && !e.ctrlKey && !e.metaKey && !isTyping) {
          darkModeToggle.click();
        }

        // Press 'Escape' to close mobile menu or help panel
        if (e.key === "Escape") {
          if (window.innerWidth <= 768 && tocSidebar.classList.contains("mobile-open")) {
            tocSidebar.classList.remove("mobile-open");
            mobileMenuToggle.setAttribute("aria-expanded", "false");
          }
          if (helpVisible) {
            helpVisible = false;
            keyboardHelp.classList.remove("show");
            keyboardHelp.setAttribute("aria-hidden", "true");
            keyboardHelp.setAttribute("aria-modal", "false");
          }
        }
      });

      // Auto-hide keyboard help after 5 seconds
      let helpTimeout;
      keyboardHelp.addEventListener("transitionend", () => {
        if (helpVisible) {
          clearTimeout(helpTimeout);
          helpTimeout = setTimeout(() => {
            helpVisible = false;
            keyboardHelp.classList.remove("show");
            keyboardHelp.setAttribute("aria-hidden", "true");
            keyboardHelp.setAttribute("aria-modal", "false");
          }, 5000);
        }
      });
    </script>

    <!-- Live region for copy notifications -->
    <div
      id="copy-status"
      role="status"
      aria-live="polite"
      class="sr-only"
    ></div>

    <!-- Cloudflare Web Analytics -->
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "59e5a9d9fcad49c3b3e54b2493fb9ac1"}'
    ></script>
    <!-- End Cloudflare Web Analytics -->
  </body>
</html>
